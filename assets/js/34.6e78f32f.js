(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{438:function(t,s,a){"use strict";a.r(s);var e=a(34),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"element-组件库也支持暗黑模式啦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#element-组件库也支持暗黑模式啦"}},[t._v("#")]),t._v(" Element 组件库也支持暗黑模式啦")]),t._v(" "),a("p",[a("img",{attrs:{src:"/js/dark/banner.gif",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("  最近参考了"),a("code",[t._v("Element Plus")]),t._v("风格样式，修改了"),a("code",[t._v("Element")]),t._v("内部样式源文件，并发布了自定义的暗黑主题包 "),a("a",{attrs:{href:"https://github.com/dongwei1125/theme-dark",target:"_blank",rel:"noopener noreferrer"}},[t._v("element-theme-darkplus"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("  效果预览 👉"),a("a",{attrs:{href:"https://dongwei1125.github.io/theme-dark/",target:"_blank",rel:"noopener noreferrer"}},[t._v("戳这里"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("Vue")]),t._v("版本经历了"),a("code",[t._v("2")]),t._v("到"),a("code",[t._v("3")]),t._v("的大迭代，与之相关的一些生态系统也发生了变化和改动。")]),t._v(" "),a("p",[t._v("  例如组件库 "),a("a",{attrs:{href:"https://element.eleme.io/#/zh-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("Element"),a("OutboundLink")],1),t._v(" 升级为了 "),a("a",{attrs:{href:"https://element-plus.org/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Element Plus"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("Element Plus")]),t._v("相较于"),a("code",[t._v("Element")]),t._v("。")]),t._v(" "),a("ul",[a("li",[t._v("组件上新增加了 "),a("a",{attrs:{href:"https://element-plus.org/zh-CN/component/tree-select.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("TreeSelect"),a("OutboundLink")],1),t._v(" 树形选择、"),a("a",{attrs:{href:"https://element-plus.org/zh-CN/component/text.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Text"),a("OutboundLink")],1),t._v(" 文本等")]),t._v(" "),a("li",[t._v("性能上优化了用户体验，例如表格组件在大数据量的情况下渲染速度更快，输入框组件在输入响应上更加流畅等")]),t._v(" "),a("li",[t._v("开发上也支持"),a("code",[t._v("TypeScript")]),t._v("，能体验到更好的编码书写和类型检查")]),t._v(" "),a("li",[t._v("主题上特性最佳，新增了暗黑模式，可动态切换")])]),t._v(" "),a("p",[t._v("  那么为什么"),a("code",[t._v("Element")]),t._v("无法支持暗黑模式呢？原因包括。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Element")]),t._v("支持自定义主题，却忽略了暗黑模式")]),t._v(" "),a("li",[a("code",[t._v("Element")]),t._v("创建初"),a("code",[t._v("CSS")]),t._v("样式表中 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/var",target:"_blank",rel:"noopener noreferrer"}},[t._v("var"),a("OutboundLink")],1),t._v(" 技术并未成为标准")]),t._v(" "),a("li",[a("code",[t._v("Element")]),t._v("内部样式与"),a("code",[t._v("scss")]),t._v("变量强关联，很难达到动态切换主题")])]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("GitHub")]),t._v("仓库 "),a("a",{attrs:{href:"https://github.com/ElementUI/theme-chalk",target:"_blank",rel:"noopener noreferrer"}},[t._v("theme-chalk"),a("OutboundLink")],1),t._v(" 保存了"),a("code",[t._v("Element")]),t._v("样式源文件，其中"),a("code",[t._v("src")]),t._v("目录下有很多的"),a("code",[t._v(".scss")]),t._v("文件。如果想要"),a("code",[t._v("Element")]),t._v("内部支持"),a("code",[t._v("var")]),t._v("变量，几乎所有的"),a("code",[t._v(".scss")]),t._v("都将修改，并且还要进行全面测试。如此庞大的工作量，对于仅剩社区维护的"),a("code",[t._v("Element")]),t._v("来说，是根本不可能的。所以在"),a("code",[t._v("Element")]),t._v("停止维护之前，都没有支持暗黑模式。")]),t._v(" "),a("h2",{attrs:{id:"思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#思路"}},[t._v("#")]),t._v(" 思路")]),t._v(" "),a("p",[t._v("  现在功能就在这里，如何实现呢？")]),t._v(" "),a("p",[t._v("  暗黑模式实际上就是一套"),a("code",[t._v("Element")]),t._v("自定义主题包。而对于自定义主题，最好看看官方是否支持，而官网也确实提供了自定义主题的 "),a("a",{attrs:{href:"https://element.eleme.io/#/zh-CN/component/custom-theme",target:"_blank",rel:"noopener noreferrer"}},[t._v("实践方案"),a("OutboundLink")],1),t._v("。一共四种方法，可以进行不同程度的样式自定义。实际上可概括为两种方法，分别为浅层次和深层次的主题定制。")]),t._v(" "),a("h3",{attrs:{id:"浅层次"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浅层次"}},[t._v("#")]),t._v(" 浅层次")]),t._v(" "),a("p",[t._v("  即使用 "),a("a",{attrs:{href:"https://element.eleme.io/#/zh-CN/theme/preview",target:"_blank",rel:"noopener noreferrer"}},[t._v("在线主题编辑器"),a("OutboundLink")],1),t._v(" 或者 "),a("a",{attrs:{href:"https://chrome.google.com/webstore/detail/element-theme-roller/lifkjlojflekabbmlddfccdkphlelmim",target:"_blank",rel:"noopener noreferrer"}},[t._v("主题编辑器 Chrome 插件"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("  原理上是浏览器修改了"),a("code",[t._v("scss")]),t._v("变量值，在线服务实时打包并返回构建好的"),a("code",[t._v("CSS")]),t._v("样式代码。")]),t._v(" "),a("p",[t._v("  其优点在于。")]),t._v(" "),a("ul",[a("li",[t._v("交互式修改"),a("code",[t._v("Element")]),t._v("全局"),a("code",[t._v("scss")]),t._v("样式变量")]),t._v(" "),a("li",[t._v("快捷实时地预览修改后的视觉效果")]),t._v(" "),a("li",[t._v("支持样式文件包上传、修改和下载")])]),t._v(" "),a("p",[t._v("  缺点在于。")]),t._v(" "),a("ul",[a("li",[t._v("在线服务请求较慢或者根本无法访问。大概率报错"),a("code",[t._v("Server Error 500")]),t._v("，当然也能访问，注意"),a("code",[t._v("方式方法")]),t._v("哈")]),t._v(" "),a("li",[t._v("部分文件或组件内部颜色值固定，无法修改。例如 "),a("a",{attrs:{href:"https://github.com/ElementUI/theme-chalk/blob/master/src/mixins/mixins.scss#L29",target:"_blank",rel:"noopener noreferrer"}},[t._v("mixins.scss"),a("OutboundLink")],1),t._v("，滚动条滑块背景色"),a("code",[t._v("$--scrollbar-thumb-background")]),t._v("变量固定为了"),a("code",[t._v("#b4bccc")])])]),t._v(" "),a("h3",{attrs:{id:"深层次"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#深层次"}},[t._v("#")]),t._v(" 深层次")]),t._v(" "),a("p",[t._v("  即使用命令行主题工具 "),a("a",{attrs:{href:"https://github.com/ElementUI/element-theme",target:"_blank",rel:"noopener noreferrer"}},[t._v("element-theme"),a("OutboundLink")],1),t._v(" 搭配"),a("code",[t._v("Element")]),t._v("白垩主题包 "),a("a",{attrs:{href:"https://github.com/ElementUI/theme-chalk",target:"_blank",rel:"noopener noreferrer"}},[t._v("theme-chalk"),a("OutboundLink")],1),t._v(" 工作。")]),t._v(" "),a("p",[t._v("  原理上是在线主题编辑器的本地运行版，一共两个步骤，分别为创建变量文件和打包构建。")]),t._v(" "),a("ul",[a("li",[t._v("命令行运行"),a("code",[t._v("et -i")]),t._v("，工具"),a("code",[t._v("element-theme")]),t._v("将抓取文件"),a("code",[t._v("node_modules/element-ui/packages/theme-chalk/src/common/var.scss")]),t._v("，"),a("code",[t._v("var.scss")]),t._v("内保存了白垩主题全局的样式变量。然后拷贝到根目录下生成"),a("code",[t._v("element-variables.scss")]),t._v("变量基础文件")]),t._v(" "),a("li",[t._v("命令行运行"),a("code",[t._v("et")]),t._v("，工具"),a("code",[t._v("element-theme")]),t._v("利用构建工具"),a("code",[t._v("gulp")]),t._v("和相关依赖，打包"),a("code",[t._v("element-variables.scss")]),t._v("内自定义的变量值到"),a("code",[t._v("src")]),t._v("目录下诸如"),a("code",[t._v("index.scss")]),t._v("、"),a("code",[t._v("alert.scss")]),t._v("等文件中，编译生成可供使用的"),a("code",[t._v("index.css")]),t._v("、"),a("code",[t._v("alert.css")]),t._v("等等，共同构成一个主题包")])]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("element-theme")]),t._v("相关依赖项包括。")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/tj/commander.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("commander"),a("OutboundLink")],1),t._v("：可构建"),a("code",[t._v("node")]),t._v("的命令行程序，提供了命令行输入和参数解析等功能")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/sindresorhus/ora",target:"_blank",rel:"noopener noreferrer"}},[t._v("ora"),a("OutboundLink")],1),t._v("：命令行"),a("code",[t._v("loading")]),t._v("加载效果插件")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/gulpjs/gulp",target:"_blank",rel:"noopener noreferrer"}},[t._v("gulp"),a("OutboundLink")],1),t._v("：流的自动化代码构建系统")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/sindresorhus/gulp-autoprefixer",target:"_blank",rel:"noopener noreferrer"}},[t._v("gulp-autoprefixer"),a("OutboundLink")],1),t._v("：为"),a("code",[t._v("CSS")]),t._v("文件添加浏览器前缀，以兼容不同浏览器")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/gulp-cssmin",target:"_blank",rel:"noopener noreferrer"}},[t._v("gulp-cssmin"),a("OutboundLink")],1),t._v("：压缩"),a("code",[t._v("CSS")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/dlmanning/gulp-sass",target:"_blank",rel:"noopener noreferrer"}},[t._v("gulp-sass"),a("OutboundLink")],1),t._v("："),a("code",[t._v("SASS")]),t._v("编译")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/teambition/gulp-sequence",target:"_blank",rel:"noopener noreferrer"}},[t._v("run-sequence"),a("OutboundLink")],1),t._v("："),a("code",[t._v("gulp")]),t._v("多任务按次序执行")])]),t._v(" "),a("p",[t._v("  其优点在于。")]),t._v(" "),a("ul",[a("li",[t._v("支持深层次的主题定制")]),t._v(" "),a("li",[t._v("附加可选配置，修改变量更加灵活，本地构建速率快效率高")])]),t._v(" "),a("p",[t._v("  缺点主要包括三种。")]),t._v(" "),a("p",[t._v("  第一"),a("code",[t._v("element-theme")]),t._v("强关联"),a("code",[t._v("node")]),t._v("版本，依赖关系为"),a("code",[t._v("element-theme")]),t._v(" "),a("code",[t._v(">")]),t._v(" "),a("a",{attrs:{href:"https://github.com/ElementUI/element-theme/blob/master/package.json#L52",target:"_blank",rel:"noopener noreferrer"}},[t._v("gulp-sass 3.1.0"),a("OutboundLink")],1),t._v(" "),a("code",[t._v(">")]),t._v(" "),a("a",{attrs:{href:"https://github.com/dlmanning/gulp-sass/blob/v3.1.0/package.json#L26",target:"_blank",rel:"noopener noreferrer"}},[t._v("node-sass 4.2.0"),a("OutboundLink")],1),t._v(" "),a("code",[t._v(">")]),t._v(" "),a("code",[t._v("node 12")]),t._v("。")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("node-sass")]),t._v("与"),a("code",[t._v("node")]),t._v("对应版本可参考官方 "),a("a",{attrs:{href:"https://github.com/sass/node-sass#node-version-support-policy",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node version support policy"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("  一种解决方式是升级"),a("code",[t._v("gulp-sass")]),t._v("版本或者降级"),a("code",[t._v("node")]),t._v("版本，另一种方式是使用"),a("code",[t._v("node")]),t._v("版本适配的第三方库。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("node < 12")]),t._v("："),a("a",{attrs:{href:"https://www.npmjs.com/package/element-theme",target:"_blank",rel:"noopener noreferrer"}},[t._v("element-theme"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("node = 12.x")]),t._v("："),a("a",{attrs:{href:"https://www.npmjs.com/package/element-themex",target:"_blank",rel:"noopener noreferrer"}},[t._v("element-themex"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("node >= 14")]),t._v("："),a("a",{attrs:{href:"https://www.npmjs.com/package/element-theme-replace",target:"_blank",rel:"noopener noreferrer"}},[t._v("element-theme-replace"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("  第二"),a("code",[t._v("theme-chalk")]),t._v("内部文件 "),a("a",{attrs:{href:"https://github.com/ElementUI/theme-chalk/blob/v2.15.7/src/common/var.scss#L1019",target:"_blank",rel:"noopener noreferrer"}},[t._v("var.scss"),a("OutboundLink")],1),t._v(" 语法错误，导致拷贝生成的"),a("code",[t._v("element-variables.scss")]),t._v("也有此问题。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/common/var.scss")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("breakpoints"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("spec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'xs-only'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("sm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'sm-and-up'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("sm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'sm-only'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(min-width: #{$--sm}) and (max-width: #{$--md - 1})"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'sm-and-down'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("md "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'md-and-up'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("md"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'md-only'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(min-width: #{$--md}) and (max-width: #{$--lg - 1})"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'md-and-down'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("lg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'lg-and-up'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("lg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'lg-only'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(min-width: #{$--lg}) and (max-width: #{$--xl - 1})"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'lg-and-down'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("xl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'xl-only'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("xl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("  手动修改为。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/common/var.scss")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("breakpoints"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("spec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'xs-only'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("sm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'sm-and-up'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("sm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'sm-only'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("sm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("md "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'sm-and-down'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("md "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'md-and-up'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("md"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'md-only'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("md"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("lg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'md-and-down'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("lg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'lg-and-up'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("lg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'lg-only'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("lg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("xl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'lg-and-down'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("xl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'xl-only'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("xl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("  第三"),a("code",[t._v("theme-chalk")]),t._v("内部变量过于固定，例如 "),a("a",{attrs:{href:"https://github.com/ElementUI/theme-chalk/blob/v2.15.7/src/common/var.scss#L25",target:"_blank",rel:"noopener noreferrer"}},[t._v("mix"),a("OutboundLink")],1),t._v(" 函数强制混合"),a("code",[t._v("$--color-white")]),t._v("变量，并不适用于暗黑主题。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/common/var.scss")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("primary"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("light"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("white"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("primary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 53a8ff */")]),t._v("\n")])])]),a("p",[t._v("  另外很多文件中存在白垩主题固定的颜色值，例如 "),a("a",{attrs:{href:"https://github.com/ElementUI/theme-chalk/blob/v2.15.7/src/upload.scss#L32",target:"_blank",rel:"noopener noreferrer"}},[t._v("upload.scss"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/upload.scss")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n@include "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("upload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n  @include "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("m")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("picture"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("card")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    background"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #fbfdff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("border")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 1px dashed #c0ccda"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"自定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义"}},[t._v("#")]),t._v(" 自定义")]),t._v(" "),a("p",[t._v("  两种方式都或多或少有缺点，解决起来也不是那么容易。")]),t._v(" "),a("p",[t._v("  实际上深层次定制是有一些可取的部分的，解决掉附带的缺点，是不是就是可行的呢？")]),t._v(" "),a("p",[t._v("  参考"),a("code",[t._v("element-theme")]),t._v("我做了如下几个修改。")]),t._v(" "),a("h4",{attrs:{id:"维护-scss-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#维护-scss-文件"}},[t._v("#")]),t._v(" 维护 scss 文件")]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("theme-chalk")]),t._v("源文件自身存在语法错误，那根据源文件生成新文件就毫无意义了。干脆省略"),a("code",[t._v("element-theme")]),t._v("创建变量文件那一步，拷贝"),a("code",[t._v("theme-chalk")]),t._v("的最新源文件 "),a("a",{attrs:{href:"https://github.com/ElementUI/theme-chalk/tree/v2.15.7/src",target:"_blank",rel:"noopener noreferrer"}},[t._v("src"),a("OutboundLink")],1),t._v(" 到根目录下。然后修复语法错误，自行维护"),a("code",[t._v("src")]),t._v("源文件。")]),t._v(" "),a("h4",{attrs:{id:"升级依赖项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级依赖项"}},[t._v("#")]),t._v(" 升级依赖项")]),t._v(" "),a("p",[t._v("  升级所有依赖项，压缩插件"),a("code",[t._v("gulp-cssmin")]),t._v("替换为"),a("code",[t._v("gulp-clean-css")]),t._v("，"),a("code",[t._v("gulp-sass")]),t._v("内部依赖"),a("code",[t._v("node-sass")]),t._v("切换为 "),a("a",{attrs:{href:"https://github.com/sass/dart-sass",target:"_blank",rel:"noopener noreferrer"}},[t._v("dart-sass"),a("OutboundLink")],1),t._v("，新增了"),a("code",[t._v("CSS")]),t._v("命名空间插件 "),a("a",{attrs:{href:"https://github.com/atskimura/gulp-css-wrap",target:"_blank",rel:"noopener noreferrer"}},[t._v("gulp-css-wrap"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("  以下代码"),a("code",[t._v("compileCss")]),t._v("函数选中了"),a("code",[t._v("src")]),t._v("目录下所有"),a("code",[t._v(".scss")]),t._v("文件，"),a("code",[t._v("gulp-sass")]),t._v("编译构建，然后"),a("code",[t._v("gulp-autoprefixer")]),t._v("添加浏览器前缀，"),a("code",[t._v("gulp-css-wrap")]),t._v("新增类命名空间，最后"),a("code",[t._v("gulp-clean-css")]),t._v("压缩代码，输出至根目录下"),a("code",[t._v("lib")]),t._v("文件夹中。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// gulpfile.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compileCss")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/*.scss'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("autoprefixer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cascade")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cssWrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("selector")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.dark'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cleanCss")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("  以"),a("code",[t._v("button")]),t._v("为例，原样式代码为。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("button "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FFF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("  新增命名空间样式代码为。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dark "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("button "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FFF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"修改源文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改源文件"}},[t._v("#")]),t._v(" 修改源文件")]),t._v(" "),a("p",[t._v("  暗黑主题风格参照了"),a("code",[t._v("Elemenet Plus")]),t._v("，修改"),a("code",[t._v("src")]),t._v("下所有源文件颜色变量值。内部固定颜色值替换为已有变量，或者新增全局变量。")]),t._v(" "),a("p",[t._v("  思路较简单，但工作量极大。")]),t._v(" "),a("h4",{attrs:{id:"编写-gulp-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写-gulp-插件"}},[t._v("#")]),t._v(" 编写 gulp 插件")]),t._v(" "),a("p",[t._v("  若一个项目有白垩和暗黑两种主题，也能动态切换，我们先看看白垩的部分样式代码。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("button "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("display")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" inline"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("block"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  line"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  white"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("space"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nowrap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cursor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" pointer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FFF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("border")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 1px solid #"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DCDFE6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("606266")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("  然后看看暗黑的对应样式代码。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dark "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("button "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("display")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" inline"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("block"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  line"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  white"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("space"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nowrap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cursor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" pointer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" transparent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("border")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 1px solid #4c4d4f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #cfd3dc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("  发现问题没有，主题切换只是颜色值改变，但是却额外维护了重复的样式代码，比如"),a("code",[t._v("cursor: pointer")]),t._v("等。")]),t._v(" "),a("p",[t._v("  我们完全可以将白垩主题作为基础，而暗黑部分仅仅引入颜色样式即可。可能像如下方式引入，"),a("code",[t._v("index.color.css")]),t._v("中仅仅只有颜色代码，没有其它"),a("code",[t._v("CSS")]),t._v("代码。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui/lib/theme-chalk/index.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-theme-darkplus/lib/index.color.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("  新增插件"),a("code",[t._v("extract-color")]),t._v("用于抽取暗黑主题中所有的颜色样式代码，核心的样式提取函数"),a("code",[t._v("cssExtractor")]),t._v("引用于插件 "),a("a",{attrs:{href:"https://github.com/hzsrc/webpack-theme-color-replacer/blob/master/src/CssExtractor.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-theme-color-replacer"),a("OutboundLink")],1),t._v("，"),a("code",[t._v("webpack-theme-color-replacer")]),t._v("可提取出"),a("code",[t._v("CSS")]),t._v("中指定关键字的代码。")]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("gulpfile.js")]),t._v("新增颜色提取函数"),a("code",[t._v("compileColorCss")]),t._v("，其中"),a("code",[t._v("rename")]),t._v("为 "),a("a",{attrs:{href:"https://github.com/hparra/gulp-rename",target:"_blank",rel:"noopener noreferrer"}},[t._v("gulp-rename"),a("OutboundLink")],1),t._v(" 插件，用于修改文件名。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// gulpfile.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compileColorCss")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/*.scss'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("autoprefixer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cascade")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cssWrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("selector")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.dark'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("extractColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("keywords")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rgb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'transparent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cleanCss")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("suffix")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.color'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("  以上代码大概率报错，原因是"),a("code",[t._v("cssWrap()")]),t._v("运行报错，"),a("code",[t._v("css-wrap")]),t._v("不能处理空文件。")]),t._v(" "),a("p",[t._v("  本地新增插件"),a("code",[t._v("css-wrap")]),t._v("，空文件跳过"),a("code",[t._v("css-wrap")]),t._v("处理。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugins/css-wrap.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cssWrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("obj")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" contents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"新增主题预览"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增主题预览"}},[t._v("#")]),t._v(" 新增主题预览")]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("element-theme-darkplus")]),t._v("内很多配置文件都是用于开发阶段格式化"),a("code",[t._v(".vue")]),t._v("和"),a("code",[t._v(".js")]),t._v("的，更多 "),a("RouterLink",{attrs:{to:"/pages/js/eslint-prettier.html"}},[t._v("详细参考")]),t._v("。")],1),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("docs/index.html")]),t._v("文件中以"),a("code",[t._v("cdn")]),t._v("方式引入了 "),a("a",{attrs:{href:"https://github.com/FranckFreiburger/vue3-sfc-loader/blob/main/docs/examples.md#vue2-basic-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue2-sfc-loader"),a("OutboundLink")],1),t._v("，非脚手架页面也能解析"),a("code",[t._v(".vue")]),t._v("文件了。")]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("cdn")]),t._v("引入了多个依赖包，导致首屏加载慢，长时间处于白屏状态，这里复用了 "),a("a",{attrs:{href:"https://github.com/vueComponent/ant-design-vue-pro/blob/master/public/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ant Design Pro Vue"),a("OutboundLink")],1),t._v(" 加载动画效果。")]),t._v(" "),a("h3",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("element-theme-darkplus")]),t._v("参考了"),a("code",[t._v("element-theme")]),t._v("进一步优化了"),a("code",[t._v("gulpfile.js")]),t._v("逻辑部分，新增了"),a("code",[t._v("extract-color")]),t._v("颜色提取插件，可最小化实现主题切换功能。拷贝了"),a("code",[t._v("theme-chalk")]),t._v("白垩主题的源文件，修复了问题文件语法错误，自主维护全局变量。")]),t._v(" "),a("h2",{attrs:{id:"优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[t._v("#")]),t._v(" 优化")]),t._v(" "),a("h3",{attrs:{id:"关键字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关键字"}},[t._v("#")]),t._v(" 关键字")]),t._v(" "),a("p",[t._v("  虽然"),a("code",[t._v("extract-color")]),t._v("插件能提取颜色类代码，但有种情况却不能合理提取出来，例如 "),a("a",{attrs:{href:"https://github.com/ElementUI/theme-chalk/blob/master/src/menu.scss#L53",target:"_blank",rel:"noopener noreferrer"}},[t._v("menu.scss"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/menu.scss")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n@include "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("menu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n  @include "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("m")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("horizontal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    border"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("right"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("  代码"),a("code",[t._v("border-right: none")]),t._v("中并没有关键字"),a("code",[t._v("#")]),t._v("、"),a("code",[t._v("rgb")]),t._v("或者"),a("code",[t._v("transparent")]),t._v("，插件提取不出来也很正常，那如何优化呢？")]),t._v(" "),a("p",[t._v("  拟采用关键字注释，但"),a("code",[t._v("extract-color")]),t._v("插件对注释并不敏感，这里使用"),a("code",[t._v("var")]),t._v("来折中处理。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/menu.scss")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n@include "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("menu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n  @include "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("m")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("horizontal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("ec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ignore"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("br"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    border"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("right"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("ec"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ignore"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("br"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("  关键字新增"),a("code",[t._v("--ec-ignore")]),t._v("，以上变量和"),a("code",[t._v("var")]),t._v("语句均能提取出来。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("extractColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("keywords")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--ec-ignore'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rgb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'transparent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("  你可能发现了白垩主题内部并未引入"),a("code",[t._v("CSS")]),t._v("变量，出于兼容性考虑，最新版本已弃用。在"),a("code",[t._v("cssExtractor")]),t._v("提取函数上我做了部分修改，思路效仿了 "),a("a",{attrs:{href:"https://github.com/clean-css/clean-css?tab=readme-ov-file#how-to-preserve-a-comment-block",target:"_blank",rel:"noopener noreferrer"}},[t._v("clean-css"),a("OutboundLink")],1),t._v(" 的特殊注释。原理即在匹配到特殊注释"),a("code",[t._v("/* extract-color ignore */")]),t._v("时，"),a("code",[t._v("CSS")]),t._v("代码段仍然保留而不仅限于颜色值，衍生出了"),a("code",[t._v("ignoreSpecialComments")]),t._v("配置项（默认值"),a("code",[t._v("false")]),t._v("）。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("extractColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("keywords")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rgb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'transparent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ignoreSpecialComments")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"级联选择器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#级联选择器"}},[t._v("#")]),t._v(" 级联选择器")]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("cascader")]),t._v("级联选择器稳定复现图标外现的问题。")]),t._v(" "),a("p",[a("img",{attrs:{src:"/js/dark/cascader.png",alt:""}})]),t._v(" "),a("p",[t._v("  ;"),a("code",[t._v("checkbox")]),t._v("新增"),a("code",[t._v("overflow: hidden")]),t._v("可解决，但可能会产生其它的问题，暂时不解决。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("checkbox__inner "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("overflow")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" hidden"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"进度条-评分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进度条-评分"}},[t._v("#")]),t._v(" 进度条/评分")]),t._v(" "),a("p",[t._v("  评分组件 "),a("a",{attrs:{href:"https://github.com/ElemeFE/element/blob/master/packages/rate/src/main.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rate"),a("OutboundLink")],1),t._v(" 较为特殊，"),a("code",[t._v("Element")]),t._v("内部与颜色相关"),a("code",[t._v("props")]),t._v("均定义了默认值，且"),a("code",[t._v("template")]),t._v("模板中都采用内联样式，导致外部主题样式无法覆盖。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("code",[t._v("Props")])]),t._v(" "),a("th",[a("code",[t._v("默认值")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("void-color")])]),t._v(" "),a("td",[a("code",[t._v("#c6d1de")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("disabled-void-color")])]),t._v(" "),a("td",[a("code",[t._v("#eff2f7")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("text-color")])]),t._v(" "),a("td",[a("code",[t._v("#1f2d3d")])])])])]),t._v(" "),a("p",[t._v("  可传空值重置相应"),a("code",[t._v("props")]),t._v("值使主题生效。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-rate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("show-text")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("void-color")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("text-color")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[t._v("  进度条组件 "),a("a",{attrs:{href:"https://github.com/ElemeFE/element/blob/master/packages/progress/src/progress.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("Progress"),a("OutboundLink")],1),t._v(" 类似，仅线形进度条支持，环形和仪表盘形不支持。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("code",[t._v("Props")])]),t._v(" "),a("th",[a("code",[t._v("默认值")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("define-back-color")])]),t._v(" "),a("td",[a("code",[t._v("#ebeef5")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("text-color")])]),t._v(" "),a("td",[a("code",[t._v("#606266")])])])])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-progress")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":percentage")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("define-back-color")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("text-color")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("p",[t._v("  虽然两组件可以传空值重置属性以支持暗黑主题，而对于不关心此功能的同学，却不清楚为什么会传入诸如"),a("code",[t._v('text-color=""')]),t._v("这样的属性，这无疑在开发层面徒增了心智负担。")]),t._v(" "),a("p",[t._v("  嗯"),a("code",[t._v("...")]),t._v("样式么法解决"),a("code",[t._v("Rate")]),t._v("和"),a("code",[t._v("Progress")]),t._v("根本性问题了。")]),t._v(" "),a("p",[t._v("  重新定义"),a("code",[t._v("Rate")]),t._v("和"),a("code",[t._v("Progress")]),t._v("组件可以吗？还不能破坏原组件的拓展性和唯一性，则采用继承原始组件并在"),a("code",[t._v("javascript")]),t._v("里做了一个中间层，帮助用户初始置空相关颜色"),a("code",[t._v("props")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ElementUI "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Darken "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-theme-darkplus/utils/darken'")]),t._v("\n\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ElementUI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nVue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Darken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ElementUI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"🎉-写在最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🎉-写在最后"}},[t._v("#")]),t._v(" 🎉 写在最后")]),t._v(" "),a("p",[t._v("🍻伙伴们，如果你已经看到了这里，觉得这篇文章有帮助到你的话不妨点赞👍或 "),a("a",{attrs:{href:"https://github.com/dongwei1125/blog",target:"_blank",rel:"noopener noreferrer"}},[t._v("Star"),a("OutboundLink")],1),t._v(" ✨支持一下哦！")]),t._v(" "),a("p",[t._v("手动码字，如有错误，欢迎在评论区指正💬~")]),t._v(" "),a("p",[t._v("你的支持就是我更新的最大动力💪~")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/dongwei1125",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub"),a("OutboundLink")],1),t._v(" / "),a("a",{attrs:{href:"https://gitee.com/dongwei1125",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gitee"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://dongwei1125.github.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Pages"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://juejin.cn/user/2621689331987783",target:"_blank",rel:"noopener noreferrer"}},[t._v("掘金"),a("OutboundLink")],1),t._v("、"),a("a",{attrs:{href:"https://blog.csdn.net/Don_GW",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSDN"),a("OutboundLink")],1),t._v(" 同步更新，欢迎关注😉~")])])}),[],!1,null,null,null);s.default=n.exports}}]);