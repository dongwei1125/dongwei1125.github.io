(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{432:function(e,r,t){"use strict";t.r(r);var _=t(34),v=Object(_.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"script"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#script"}},[e._v("#")]),e._v(" Script")]),e._v(" "),t("p",[t("img",{attrs:{src:"/html/label/script/banner.jpg",alt:""}})]),e._v(" "),t("p",[e._v("  ;"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/script",target:"_blank",rel:"noopener noreferrer"}},[e._v("script"),t("OutboundLink")],1),e._v(" 用于嵌入或者引用可执行脚本。")]),e._v(" "),t("p",[e._v("  其中可选属性如下。")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("type")]),e._v("：用于定义脚本语言的 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types",target:"_blank",rel:"noopener noreferrer"}},[e._v("MIME"),t("OutboundLink")],1),e._v(" 类型，包括"),t("code",[e._v("text/javascript")]),e._v("、"),t("code",[e._v("text/ecmascript")]),e._v("、"),t("code",[e._v("application/javascript")]),e._v("、"),t("code",[e._v("application/ecmascript")]),e._v("，注意"),t("code",[e._v("HTML5")]),e._v("中可以省略掉"),t("code",[e._v("type")]),e._v("，其默认值为"),t("code",[e._v("text/javascript")])]),e._v(" "),t("li",[t("code",[e._v("src")]),e._v("：指定引用的外部脚本的"),t("code",[e._v("URL")])]),e._v(" "),t("li",[t("code",[e._v("defer")]),e._v("：仅适用于外链，规定脚本延迟执行")]),e._v(" "),t("li",[t("code",[e._v("async")]),e._v("：仅适用于外链，规定脚本异步执行")]),e._v(" "),t("li",[t("code",[e._v("integrity")]),e._v("：用于验证获取的资源是否被篡改，若接收的资源的签名和"),t("code",[e._v("integrity")]),e._v("指定的签名不匹配，页面会报错，脚本也不会执行")]),e._v(" "),t("li",[t("code",[e._v("crossorigin")]),e._v("：浏览器启用"),t("code",[e._v("CROS")]),e._v("访问检查，属性值包括"),t("code",[e._v("anonymous")]),e._v("、"),t("code",[e._v("use-credentials")]),e._v("，若未指定属性值或非法属性值，浏览器默认采用"),t("code",[e._v("anonymous")])])]),e._v(" "),t("h2",{attrs:{id:"defer-async"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#defer-async"}},[e._v("#")]),e._v(" defer/async")]),e._v(" "),t("p",[e._v("  一般的"),t("code",[e._v("script")]),e._v("标签都是会阻塞页面的解析，为了避免"),t("code",[e._v("DOM")]),e._v("的解析被阻塞，通常是将"),t("code",[e._v("script")]),e._v("标签放在"),t("code",[e._v("html")]),e._v("页面的底部。")]),e._v(" "),t("p",[e._v("  ;"),t("code",[e._v("defer")]),e._v("在页面完成解析才执行代码（即"),t("code",[e._v("DOM")]),e._v("加载完毕，图片资源等还未下载），带有"),t("code",[e._v("defer")]),e._v("属性的"),t("code",[e._v("script")]),e._v("，其下载会与后续的文档元素的解析并行加载，而脚本会延迟到"),t("code",[e._v("DOM")]),e._v("解析完成，而在"),t("code",[e._v("DOMContentLoaded")]),e._v("之前执行。")]),e._v(" "),t("p",[e._v("  带有"),t("code",[e._v("async")]),e._v("属性的"),t("code",[e._v("script")]),e._v("，其下载会与后续的文档元素的解析并行加载，但是只要"),t("code",[e._v("script")]),e._v("下载完成，那么就会立即执行，若此时"),t("code",[e._v("DOM")]),e._v("未加载完毕，则会阻塞"),t("code",[e._v("DOM")]),e._v("解析。")]),e._v(" "),t("p",[e._v("  两者都是后续的文档元素的解析与脚本的下载并行执行，唯一不同在于脚本执行的时机，"),t("code",[e._v("defer")]),e._v("是延迟到"),t("code",[e._v("DOM")]),e._v("解析完成且"),t("code",[e._v("DOMContentLoaded")]),e._v("之前执行，而"),t("code",[e._v("async")]),e._v("则是在下载完立即执行，若"),t("code",[e._v("DOM")]),e._v("未加载完毕，则其解析会被阻塞。")]),e._v(" "),t("p",[e._v("  更多阻塞问题参考 "),t("RouterLink",{attrs:{to:"/pages/html/perform/block-dom.html"}},[e._v("关于 JS 与 CSS 是否阻塞 DOM 的渲染和解析")]),e._v("。")],1),e._v(" "),t("h2",{attrs:{id:"integrity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#integrity"}},[e._v("#")]),e._v(" integrity")]),e._v(" "),t("p",[e._v("  如下告知浏览器使用"),t("code",[e._v("sha256")]),e._v("签名算法对下载的"),t("code",[e._v("js")]),e._v("文件进行计算，并且与"),t("code",[e._v("integrity")]),e._v("提供的签名进行对比，若二者不一致，就不会执行此脚本。")]),e._v(" "),t("p",[e._v("  ;"),t("code",[e._v("integrity")]),e._v("一般是是对 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Glossary/CDN",target:"_blank",rel:"noopener noreferrer"}},[e._v("CDN"),t("OutboundLink")],1),e._v(" 上的静态文件使用。"),t("code",[e._v("CDN")]),e._v("虽然好用但是 "),t("code",[e._v("CDN")]),e._v("有可能被劫持，导致下载的文件是被篡改过的，有了"),t("code",[e._v("integrity")]),e._v("就可以检查文件是否是原版。而本地文件用的域名跟网页是同一个域名，不存在劫持的问题，所以本地静态文件没有必要用此属性。")]),e._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("script integrity"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"sha256-PJJrxrJLzT6CCz1jDfQXTRWOO9zmemDQbmLtSlFQluc="')]),e._v(" src"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://xxx.xxx.js"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("script"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("h2",{attrs:{id:"crossorigin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#crossorigin"}},[e._v("#")]),e._v(" crossorigin")]),e._v(" "),t("p",[e._v("  当网页引入跨域的脚本时，若此脚本有错误，由于浏览器的限制（根本原因是协议的规定），是获取不到错误信息的。在本地尝试"),t("code",[e._v("window.onerror")]),e._v("去捕获脚本的错误时，跨域脚本的错误只会返回"),t("code",[e._v("Script error")]),e._v("。")]),e._v(" "),t("p",[e._v("  而"),t("code",[e._v("HTML5")]),e._v("规定是可以允许本地获取到跨域脚本的错误信息的，但是要满足两个条件，一是跨域脚本的服务器必须通过"),t("code",[e._v("Access-Control-Allow-Origin")]),e._v("头信息允许当前域名可以获取错误信息，二是"),t("code",[e._v("script")]),e._v("标签必须指明"),t("code",[e._v("src")]),e._v("属性指定的地址是支持跨域的地址，即"),t("code",[e._v("crossorigin")]),e._v("属性，详细参考 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes/crossorigin",target:"_blank",rel:"noopener noreferrer"}},[e._v("MDN"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("h2",{attrs:{id:"🎉-写在最后"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🎉-写在最后"}},[e._v("#")]),e._v(" 🎉 写在最后")]),e._v(" "),t("p",[e._v("🍻伙伴们，如果你已经看到了这里，觉得这篇文章有帮助到你的话不妨点赞👍或 "),t("a",{attrs:{href:"https://github.com/dongwei1125/blog",target:"_blank",rel:"noopener noreferrer"}},[e._v("Star"),t("OutboundLink")],1),e._v(" ✨支持一下哦！")]),e._v(" "),t("p",[e._v("手动码字，如有错误，欢迎在评论区指正💬~")]),e._v(" "),t("p",[e._v("你的支持就是我更新的最大动力💪~")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/dongwei1125",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub"),t("OutboundLink")],1),e._v(" / "),t("a",{attrs:{href:"https://gitee.com/dongwei1125",target:"_blank",rel:"noopener noreferrer"}},[e._v("Gitee"),t("OutboundLink")],1),e._v("、"),t("a",{attrs:{href:"https://dongwei1125.github.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub Pages"),t("OutboundLink")],1),e._v("、"),t("a",{attrs:{href:"https://juejin.cn/user/2621689331987783",target:"_blank",rel:"noopener noreferrer"}},[e._v("掘金"),t("OutboundLink")],1),e._v("、"),t("a",{attrs:{href:"https://blog.csdn.net/Don_GW",target:"_blank",rel:"noopener noreferrer"}},[e._v("CSDN"),t("OutboundLink")],1),e._v(" 同步更新，欢迎关注😉~")])])}),[],!1,null,null,null);r.default=v.exports}}]);