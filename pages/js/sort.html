<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript 中常见的排序类型 | DonV</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/header.jpg">
    <meta name="description" content="A paper about JavaScript, HTML and CSS.">
    
    <link rel="preload" href="/assets/css/0.styles.87611319.css" as="style"><link rel="preload" href="/assets/js/app.0aa97f73.js" as="script"><link rel="preload" href="/assets/js/2.f850a8ef.js" as="script"><link rel="preload" href="/assets/js/50.d051084c.js" as="script"><link rel="preload" href="/assets/js/3.31ebf682.js" as="script"><link rel="prefetch" href="/assets/js/10.cb041c1b.js"><link rel="prefetch" href="/assets/js/11.1aadbcee.js"><link rel="prefetch" href="/assets/js/12.77cc8e56.js"><link rel="prefetch" href="/assets/js/13.7e8162d9.js"><link rel="prefetch" href="/assets/js/14.dea6ba67.js"><link rel="prefetch" href="/assets/js/15.a786d687.js"><link rel="prefetch" href="/assets/js/16.163edf25.js"><link rel="prefetch" href="/assets/js/17.3a0232cb.js"><link rel="prefetch" href="/assets/js/18.91bd2dd7.js"><link rel="prefetch" href="/assets/js/19.a36993f8.js"><link rel="prefetch" href="/assets/js/20.30dd9f79.js"><link rel="prefetch" href="/assets/js/21.5e3c83a3.js"><link rel="prefetch" href="/assets/js/22.88d5e321.js"><link rel="prefetch" href="/assets/js/23.b54a65a7.js"><link rel="prefetch" href="/assets/js/24.51df379f.js"><link rel="prefetch" href="/assets/js/25.79342bd2.js"><link rel="prefetch" href="/assets/js/26.643d5441.js"><link rel="prefetch" href="/assets/js/27.54b7d7b4.js"><link rel="prefetch" href="/assets/js/28.d01a4aee.js"><link rel="prefetch" href="/assets/js/29.7d932073.js"><link rel="prefetch" href="/assets/js/30.4c2f5636.js"><link rel="prefetch" href="/assets/js/31.b00c42d5.js"><link rel="prefetch" href="/assets/js/32.e9a0f488.js"><link rel="prefetch" href="/assets/js/33.f510b5fd.js"><link rel="prefetch" href="/assets/js/34.6e78f32f.js"><link rel="prefetch" href="/assets/js/35.04d666a2.js"><link rel="prefetch" href="/assets/js/36.900a3beb.js"><link rel="prefetch" href="/assets/js/37.19ddf8d7.js"><link rel="prefetch" href="/assets/js/38.35f899bd.js"><link rel="prefetch" href="/assets/js/39.fe9ea525.js"><link rel="prefetch" href="/assets/js/4.3c7083a8.js"><link rel="prefetch" href="/assets/js/40.0d116ce0.js"><link rel="prefetch" href="/assets/js/41.6cdce4cf.js"><link rel="prefetch" href="/assets/js/42.ab0bd0d5.js"><link rel="prefetch" href="/assets/js/43.66c8f8eb.js"><link rel="prefetch" href="/assets/js/44.ac02981e.js"><link rel="prefetch" href="/assets/js/45.479814b0.js"><link rel="prefetch" href="/assets/js/46.29956259.js"><link rel="prefetch" href="/assets/js/47.a89cf7d2.js"><link rel="prefetch" href="/assets/js/48.859e3502.js"><link rel="prefetch" href="/assets/js/49.d0fa0b25.js"><link rel="prefetch" href="/assets/js/5.206809f3.js"><link rel="prefetch" href="/assets/js/51.fa831e6a.js"><link rel="prefetch" href="/assets/js/52.3ed98760.js"><link rel="prefetch" href="/assets/js/53.016b1c3c.js"><link rel="prefetch" href="/assets/js/54.c88e06c5.js"><link rel="prefetch" href="/assets/js/55.937bfe09.js"><link rel="prefetch" href="/assets/js/56.03003660.js"><link rel="prefetch" href="/assets/js/57.8bcda68a.js"><link rel="prefetch" href="/assets/js/58.286692ba.js"><link rel="prefetch" href="/assets/js/59.fbfe98aa.js"><link rel="prefetch" href="/assets/js/6.6f9d9bda.js"><link rel="prefetch" href="/assets/js/60.0975844e.js"><link rel="prefetch" href="/assets/js/61.0af6cf48.js"><link rel="prefetch" href="/assets/js/62.66c23699.js"><link rel="prefetch" href="/assets/js/63.7fda9b3f.js"><link rel="prefetch" href="/assets/js/7.6f64fba1.js"><link rel="prefetch" href="/assets/js/8.a163349f.js"><link rel="prefetch" href="/assets/js/9.9058d3cc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.87611319.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/header.jpg" alt="DonV" class="logo"> <span class="site-name can-hide">DonV</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/js/nav.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/pages/html/nav.html" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/pages/css/nav.html" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/pages/other/nav.html" class="nav-link">
  其它
</a></div><div class="nav-item"><a href="/pages/app/nav.html" class="nav-link">
  应用
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/~dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/js/nav.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/pages/html/nav.html" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/pages/css/nav.html" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/pages/other/nav.html" class="nav-link">
  其它
</a></div><div class="nav-item"><a href="/pages/app/nav.html" class="nav-link">
  应用
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/~dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript 中常见的排序类型</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/js/sort.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/js/sort.html#排序" class="sidebar-link">排序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/js/sort.html#冒泡排序" class="sidebar-link">冒泡排序</a></li><li class="sidebar-sub-header"><a href="/pages/js/sort.html#选择排序" class="sidebar-link">选择排序</a></li><li class="sidebar-sub-header"><a href="/pages/js/sort.html#插入排序" class="sidebar-link">插入排序</a></li><li class="sidebar-sub-header"><a href="/pages/js/sort.html#归并排序" class="sidebar-link">归并排序</a></li><li class="sidebar-sub-header"><a href="/pages/js/sort.html#快速排序" class="sidebar-link">快速排序</a></li><li class="sidebar-sub-header"><a href="/pages/js/sort.html#计数排序" class="sidebar-link">计数排序</a></li><li class="sidebar-sub-header"><a href="/pages/js/sort.html#基数排序" class="sidebar-link">基数排序</a></li><li class="sidebar-sub-header"><a href="/pages/js/sort.html#桶排序" class="sidebar-link">桶排序</a></li><li class="sidebar-sub-header"><a href="/pages/js/sort.html#堆排序" class="sidebar-link">堆排序</a></li></ul></li><li><a href="/pages/js/sort.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/js/sort.html#🎉-写在最后" class="sidebar-link">🎉 写在最后</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript-中常见的排序类型"><a href="#javascript-中常见的排序类型" class="header-anchor">#</a> JavaScript 中常见的排序类型</h1> <p><img src="/js/sort/banner.jpg" alt=""></p> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>  此文浅总结了常见的几大排序，并介绍了相关特性和优化方式。对稳定性、复杂度的含义和分析也做了简单说明，另外对于递归函数中，分析时间复杂度的<code>master</code>公式也做了阐述，希望对你有用。</p> <h2 id="排序"><a href="#排序" class="header-anchor">#</a> 排序</h2> <h3 id="冒泡排序"><a href="#冒泡排序" class="header-anchor">#</a> 冒泡排序</h3> <p>  冒泡排序（<code>Bubble Sort</code>）非常形象，数组在每次循环时，从左至右，相邻元素两两比较，将最大的元素逐渐交换到最后，每一轮循环最大元素在视觉上像是冒泡一样上浮到数组末尾。</p> <p><img src="/js/sort/bubble.gif" alt=""></p> <p>  以数组<code>[4, 3, 2, 1]</code>为例子，数组前一个元素与后一个元素比较，若前一个元素大则交换，一轮下来最大值被交换至末尾。数量上共计<code>3</code>（<code>4 - 1</code>）轮，第一轮将<code>4</code>放在末尾，第二轮将<code>3</code>放在末尾，第三轮将<code>2</code>放在末尾。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
<span class="token comment">// [3, 2, 1, 4]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// [2, 1, 3, 4]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><p>  ;<code>swap</code>用于交换数组两个元素。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
  arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp
<span class="token punctuation">}</span>

<span class="token comment">// ES6</span>
<span class="token keyword">function</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">;</span><span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>  可以发现，每轮的比较次数都会少一次，原因在于每一轮结束后就会正确排列出一个数，下一轮则不用再比较。例如第一轮结束数组为<code>[3, 2, 1, 4]</code>，下一轮时<code>4</code>就不用比较了。</p> <p>  封装为以下函数，其中外层循环用于控制轮数，内层循环用于比较交换。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h4> <p>  以数组<code>[1, 2, 3, 4]</code>为例子，第一轮所有元素都没有发生交换，说明数组的顺序已经达到要求，可以跳出不用继续循环了。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> isChange<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isChange <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>

        isChange <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isChange<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="特性"><a href="#特性" class="header-anchor">#</a> 特性</h4> <p>  最优情况下，数组已经是升序，例如<code>[1, 2, 3, 4]</code>，比较次数为<code>3</code>次。对于长度为<code>n</code>的升序数组，比较次数则为<code>n - 1</code>，所以时间复杂度为<code>O(n)</code>。</p> <p>  最坏情况下，数组是降序，例如<code>[4, 3, 2, 1]</code>，比较次数为<code>3 + 2 + 1 = 6</code>次。对于长度为<code>n</code>的降序数组，比较次数则为<code>(n - 1) + (n - 2) + ... + 2 + 1</code>，即<code>n * (n - 1) / 2</code>次，所以时间复杂度为<code>O(n<sup>2</sup>)</code>。</p> <p>  一般讨论的时间复杂度均是最坏情况下的时间复杂度，保证算法的运行时长不会比最差情况更长，因此冒泡排序的时间复杂度为<code>O(n<sup>2</sup>)</code>。另外冒泡排序的空间复杂度为常数级，即<code>O(1)</code>。</p> <p>  冒泡排序也属于原地排序，即未占用额外空间，并且在原数组上发生的交换。</p> <p>  冒泡排序也属于稳定排序。</p> <p>  何为稳定性呢？即排序后相同值元素的原始顺序不改变。</p> <p>  举个例子，若数组为<code>[3, 2, 3', 1]</code>，注意<code>3</code>和<code>3'</code>相等都是数值<code>3</code>，此处用于区分两者说明问题。冒泡排序结束后，数组为<code>[1, 2, 3, 3']</code>。排序前<code>3</code>位于<code>3'</code>前面，排序后<code>3</code>同样也是位于<code>3'</code>前面，此特性就是稳定性。</p> <h3 id="选择排序"><a href="#选择排序" class="header-anchor">#</a> 选择排序</h3> <p>  选择排序（<code>Selection Sort</code>）也非常形象，实际上是在冒泡排序思路上的进一步优化。思考一下，冒泡排序过程中，为了将最大元素冒泡到数组末尾，两两元素交换是否有必要。结果当然是不必要，每一轮比较过程中，仅记录最大元素的索引值即可，一轮在结束时再去将最大元素交换到末尾即可。每一轮循环在视觉上相当于选择出最大元素，然后交换至末尾。</p> <p><img src="/js/sort/selection.gif" alt=""></p> <p>  以数组<code>[3, 4, 2, 1]</code>为例子，默认最大元素索引值为<code>0</code>，数组从索引<code>1</code>元素开始遍历，当元素值大于最大元素，则最大元素索引值更新为当前索引值。共计<code>3</code>（<code>4 - 1</code>）轮，第一轮选择出<code>4</code>，第二轮选择出<code>3</code>，第三轮选择出<code>2</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> maxIndex <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>maxIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    maxIndex <span class="token operator">=</span> i
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> maxIndex<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">// [3, 1, 2, 4]</span>

<span class="token keyword">var</span> maxIndex <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>maxIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    maxIndex <span class="token operator">=</span> i
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> maxIndex<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// [2, 1, 3, 4]</span>

<span class="token keyword">var</span> maxIndex <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>maxIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    maxIndex <span class="token operator">=</span> i
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> maxIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><p>  也能发现，每轮比较次数都会少一次，原因也是每一轮都会正确排列出一个元素，下一轮不用再比较。另外每一轮循环结束，还要将最大元素交换至末尾。</p> <p>  封装为以下函数，外层循环控制轮数，内存循环用于比较更新最大索引。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">selectionSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> maxIndex<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    maxIndex <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>maxIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        maxIndex <span class="token operator">=</span> j
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> maxIndex<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="特性-2"><a href="#特性-2" class="header-anchor">#</a> 特性</h4> <p>  选择排序的时间复杂度为<code>O(n<sup>2</sup>)</code>，虽然与冒泡排序的时间复杂度一致，但是元素的交换次数很少，最多交换<code>n - 1</code>次，而冒泡排序则远不止，因此性能上选择排序优于冒泡排序。空间复杂度上选择排序为<code>O(1)</code>。</p> <p>  选择排序也属于原地排序，但是选择排序不稳定。</p> <p>  为什么呢？</p> <p>  还是以<code>[3, 2, 3', 1]</code>数组为例子，第一轮开始<code>maxIndex</code>为<code>0</code>，遍历过程中<code>maxIndex</code>未发生改变，结束时数组为<code>[1, 2, 3', 3]</code>。明显发现，排序前<code>3</code>位于<code>3'</code>前面，排序后<code>3</code>却位于<code>3'</code>后面，因此选择排序是不稳定的。</p> <h3 id="插入排序"><a href="#插入排序" class="header-anchor">#</a> 插入排序</h3> <p>  插入排序（<code>Insertion Sort</code>）也非常形象，思路上相对复杂一点，但是也很好理解。取出数组的一个元素，依次与前面元素比较，若前面元素较大，则将前面元素后移，否则插入放回。视觉上确实是将元素值插入到数组前面。</p> <p><img src="/js/sort/insertion.gif" alt=""></p> <p>  以数组<code>[4, 3, 2, 1]</code>为例子，取出元素<code>3</code>，与前面的元素依次比较，<code>4</code>大于<code>3</code>，将<code>4</code>后移动一位至索引<code>1</code>位置，而<code>3</code>则插入到索引<code>0</code>处。共计<code>3</code>轮，第一轮插入<code>3</code>，第二轮插入<code>2</code>，第三轮插入<code>1</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> current <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  i<span class="token operator">--</span>
<span class="token punctuation">}</span>
arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> current
<span class="token comment">// [3, 4, 2, 1]</span>

<span class="token keyword">var</span> current <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  i<span class="token operator">--</span>
<span class="token punctuation">}</span>
arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> current
<span class="token comment">// [2, 3, 4, 1]</span>

<span class="token keyword">var</span> current <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  i<span class="token operator">--</span>
<span class="token punctuation">}</span>
arr<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> current
<span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><p>  封装为以下函数，其中外层循环控制轮数并取出元素，内层循环用于比较并右移元素。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">insertionSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j<span class="token punctuation">,</span> current<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    current <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
      j<span class="token operator">--</span>
    <span class="token punctuation">}</span>

    arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> current
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="特性-3"><a href="#特性-3" class="header-anchor">#</a> 特性</h4> <p>  最优情况下，数组已经是升序，例如<code>[1, 2, 3, 4]</code>，比较次数为<code>3</code>次。对于长度为<code>n</code>的升序数组，比较次数为<code>n - 1</code>，所以时间复杂度为<code>O(n)</code>。</p> <p>  最坏情况下，数组是降序，例如<code>[4, 3, 2, 1]</code>，比较次数为<code>1 + 2 + 3 = 6</code>次。对于长度为<code>n</code>的降序数组，比较次数则为<code>1 + 2 + ... + (n - 2) + (n - 1)</code>，即<code>n * (n - 1) / 2</code>次，所以时间复杂度为<code>O(n<sup>2</sup>)</code>。另外插入排序的空间复杂度为常数级<code>O(1)</code>。</p> <p>  插入排序也属于原地排序和稳定排序。</p> <h3 id="归并排序"><a href="#归并排序" class="header-anchor">#</a> 归并排序</h3> <p>  归并排序（<code>Merge Sort</code>）即递归与合并，是分而治之思想的典型例子，先递归将原数组二分拆为多个单数组，然后以合并两个有序数组为核心，持续合并为有序数组。</p> <p><img src="/js/sort/merge.gif" alt=""></p> <p>  以数组<code>[8, 7, 2, 1, 6, 5, 4, 3]</code>为例子，将数组从中部持续拆分下去，拆分为<code>8</code>个单数组（例如<code>[8]</code>或<code>[7]</code>等等）结束，单数组必然是有序的。然后考虑两个有序数组合并的问题，并持续合并成有序的数组。</p> <p><img src="/js/sort/merge.png" alt=""></p> <p>  封装为以下函数，其中<code>mergeSort</code>用于递归拆分数组为单数组，<code>merge</code>用于合并两个有序的数组。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length

  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr

  <span class="token keyword">var</span> middleIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>len <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> middleIndex<span class="token punctuation">)</span>
  <span class="token keyword">var</span> right <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>middleIndex<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token function">mergeSort</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>left<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> right<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>right<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>left<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>left<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>right<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>right<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><h4 id="master-主定理"><a href="#master-主定理" class="header-anchor">#</a> master 主定理</h4> <p>  递归非常常见，编写出的代码也相当简洁。但是相对于循环程序，递归的时间复杂度却难以估计，<code>master</code>公式就是用于估计递归程序的时间复杂度的。</p> <div class="math"><span class="latex"></span></div> <p>  以下为各变量的含义，<strong>注意子问题的规模大小要相同</strong>。</p> <ul><li><code>n</code>：问题的规模大小</li> <li><code>a</code>：原问题拆分出的子问题个数</li> <li><code>n / b</code>：每个子问题的规模大小，</li> <li><code>O(n<sup>d</sup>)</code>：除了递归之外，剩余的程序的时间复杂度</li></ul> <p>  其中常量<code>a</code>、<code>b</code>和<code>d</code>存在三种关系。</p> <ul><li><code>log<sub>b</sub>a &gt; d</code>：时间复杂度为<code>O(n<sup>log<sub>b</sub>a</sup>)</code></li> <li><code>log<sub>b</sub>a = d</code>：时间复杂度为<code>O(n<sup>d</sup>logn)</code></li> <li><code>log<sub>b</sub>a &lt; d</code>：时间复杂度为<code>O(n<sup>d</sup>)</code></li></ul> <blockquote><p>提供一个简单的记忆方式，等于关系记为<code>O(n<sup>d</sup>logn)</code>。而大小于关系，<code>log<sub>b</sub>a</code>和<code>d</code>两者谁大，<code>n</code>的指数就是谁</p></blockquote> <p>  以获取数组最大值为实例，来分析下各种情况的时间复杂度。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length

  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

  <span class="token keyword">var</span> middleIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>len <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> middleIndex<span class="token punctuation">)</span>
  <span class="token keyword">var</span> right <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>middleIndex<span class="token punctuation">)</span>

  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">getMax</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getMax</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>  若数组长度为<code>n</code>，执行<code>getMax</code>函数时，会将数组从中间拆分为两个数组。问题即转换为求两个长度为<code>n / 2</code>的数组的最大值。因此数组<code>n</code>求最大值所消耗的时间可以表示为<code>T(n) = T(n / 2) + T(n / 2) + f(n)</code>，其中<code>f(n)</code>表示除了递归之外的程序花费的时间，<code>f(n)</code>可以计为<code>O(n<sup>d</sup>)</code>。</p> <p>  例如<code>getMax</code>中求出左右数组的最大值之后，还要对左右的最大值再求一次最大值，此次花费的时间即为<code>f(n)</code>。</p> <h5 id="大于"><a href="#大于" class="header-anchor">#</a> 大于</h5> <p>  ;<code>getMax</code>消耗的时间为<code>T(n) = 2T(n / 2) + O(n<sup>d</sup>)</code>，对照<code>master</code>公式明显发现，常数<code>a = 2</code>且<code>b = 2</code>。</p> <p>  除了递归之外，还要额外执行一次<code>Math.max</code>函数，用于求左右最大值的最大值，其时间复杂度为<code>O(1)</code>。很好理解，因为只执行了一次，所以为常数级<code>O(1)</code>，故常数<code>d = 0</code>。</p> <p>  现在<code>a = 2</code>，<code>b = 2</code>和<code>d = 0</code>恰好满足<code>log<sub>b</sub>a &gt; d</code>，因此<code>getMax</code>的时间复杂度为<code>O(n<sup>log<sub>b</sub>a</sup>) = O(n)</code>。实际上求最大值，一个<code>for</code>循环的时间复杂度也是<code>O(n)</code>，故此时递归和循环是一样的。</p> <h5 id="等于"><a href="#等于" class="header-anchor">#</a> 等于</h5> <p>  稍微修改下<code>getMax</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length

  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

  <span class="token keyword">var</span> middleIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>len <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> middleIndex<span class="token punctuation">)</span>
  <span class="token keyword">var</span> right <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>middleIndex<span class="token punctuation">)</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">getMax</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getMax</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>  根据刚才的分析，<code>a</code>和<code>b</code>都为<code>2</code>。但是额外增加了一个<code>for</code>循环，<code>f(n)</code>额外时间则为执行<code>for</code>循环和<code>Math.max</code>所花费的时间。很明显<code>for</code>循环的时间复杂度为<code>O(n)</code>，因此<code>d = 1</code>。</p> <p>  现在<code>a = 2</code>，<code>b = 2</code>和<code>d = 1</code>恰好满足<code>log<sub>b</sub>a = d</code>，因此<code>getMax</code>的时间复杂度为<code>O(n<sup>d</sup>logn) = O(nlogn)</code>。</p> <h5 id="小于"><a href="#小于" class="header-anchor">#</a> 小于</h5> <p>  现在来思考一个问题，若<code>getMax</code>函数拆分的数组不是从中间，而是从其它位置呢。比如<code>left</code>为数组的前<code>2 / 3</code>部分，<code>right</code>为数组的后<code>2 / 3</code>部分，虽然说两数组会有重叠部分，但是两数组或者说两子问题的规模是一致的吧，都是<code>2n / 3</code>的规模。</p> <p>  因此<code>getMax</code>消耗的时间为<code>T(n) = 2T(2n / 3) + O(n<sup>d</sup>)</code>，故<code>a = 2</code>，<code>b = 3 / 2</code>。若<code>getMax</code>内部<code>for</code>循环还嵌套了<code>for</code>循环，时间复杂度为<code>O(n<sup>2</sup>)</code>，则<code>d = 2</code>。</p> <p>  现在<code>a = 2</code>，<code>b = 3 / 2</code>和<code>d = 2</code>恰好满足<code>log<sub>b</sub>a &lt; d</code>，因此<code>getMax</code>的时间复杂度为<code>O(n<sup>d</sup>) = O(n<sup>2</sup>)</code>。</p> <h4 id="特性-4"><a href="#特性-4" class="header-anchor">#</a> 特性</h4> <h5 id="时间复杂度"><a href="#时间复杂度" class="header-anchor">#</a> 时间复杂度</h5> <p>  归并排序内部为递归算法，子问题的规模为<code>n / 2</code>且子问题规模一致，<code>master</code>公式为<code>T(n) = 2T(n / 2) + O(n<sup>d</sup>)</code>，因此<code>a = 2</code>，<code>b = 2</code>。除了递归之外，额外的程序即<code>merge</code>合并函数，由于其内部为<code>while</code>循环，<code>merge</code>函数的时间复杂度为<code>O(n)</code>，故<code>d = 1</code>。</p> <p>  ;<code>a = 2</code>，<code>b = 2</code>，<code>d = 1</code>，符合<code>log<sub>b</sub>a = d</code>条件，时间复杂度为<code>O(n<sup>d</sup>logn) = O(nlogn)</code>。</p> <h5 id="空间复杂度"><a href="#空间复杂度" class="header-anchor">#</a> 空间复杂度</h5> <p>  注意归并排序的空间复杂度为<code>O(n)</code>，而不是<code>O(nlogn)</code>。</p> <p>  虽然在合并过程中会开辟<code>log<sub>2</sub>n</code>个长度为<code>n</code>的数组，总占用的空间为<code>nlog<sub>2</sub>n</code>。但是在排序过程中，始终只有一个<code>merge</code>合并函数执行，而之前的<code>merge</code>函数在执行后会将占用的空间释放。</p> <p>  以长度为<code>8</code>的数组为例，将开辟<code>3</code>（<code>log<sub>2</sub>8</code>）个长度为<code>8</code>的数组，总占用空间为<code>8 * log<sub>2</sub>8 = 8 * 3</code>，<code>merge</code>函数占用的空间长度依次为<code>2, 2, 2, 2, 4, 4, 8</code>。最后一次合并时，<code>merge</code>函数占用的空间才会达到最大长度<code>8</code>，而之前合并占用的空间都已经被释放。</p> <p><img src="/js/sort/log28.png" alt=""></p> <p>  为了进一步说明，我们来改动一下<code>merge</code>函数，将临时数组<code>result</code>作为全局变量。若<code>mergeSort</code>排序的数组长度为<code>n</code>，则临时数组<code>result</code>最大长度将达到<code>n</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>left<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> right<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>left<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>right<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><p>  因此若数组长度为<code>n</code>，占用的最大临时空间则为<code>n</code>，故空间复杂度为<code>O(n)</code>。</p> <h5 id="稳定性"><a href="#稳定性" class="header-anchor">#</a> 稳定性</h5> <p>  以<code>[3, 3', 2, 1]</code>为例子，将拆分为<code>[3]</code>和<code>[3']</code>两个数组，合并阶段由于<code>3</code>等于<code>3'</code>，则临时数组先<code>push</code>推入<code>3</code>，然后继续推入<code>3'</code>，排序前后<code>3</code>均位于<code>3'</code>前面，因此归并排序是稳定的。</p> <blockquote><p>注意条件<code>left[0] &lt;= right[0]</code>，若条件仅为<code>left[0] &lt; right[0]</code>，则会造成排序不稳定</p></blockquote> <p>  另外归并排序是非原地排序，因为占用了额外空间，也未在原数组上排序。</p> <h3 id="快速排序"><a href="#快速排序" class="header-anchor">#</a> 快速排序</h3> <p>  快速排序（<code>Quick Sort</code>）也非常形象，即排序性能上非常快，另外快速排序也是分而治之思想的典型例子。核心原理是规定基准值（<code>pivot</code>），然后根据基准值将数组一分为三，包括小于基准值的部分、基准值、大于基准值的部分。</p> <p><img src="/js/sort/quick.gif" alt=""></p> <p>  以数组<code>[4, 5, 2, 1, 3]</code>为例来说明分区原理，将数组末尾的元素作为基准值，然后遍历数组，若元素小于或者等于基准值，则将其交换至数组头部。另外注意当遍历到数组末尾处元素时，必然会等于基准值，发生交换，换句话说基准值也会被交换到头部。</p> <p><img src="/js/sort/pivot.png" alt=""></p> <p>  封装为以下函数，其中<code>quickSort</code>对基准值分成的左右部分进行递归排序，<code>partition</code>用于将数组分区。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">&gt;=</span> end<span class="token punctuation">)</span> <span class="token keyword">return</span>

  <span class="token keyword">var</span> pivotIndex <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>
  <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> start<span class="token punctuation">,</span> pivotIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> pivotIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> start<span class="token punctuation">,</span> j <span class="token operator">=</span> start<span class="token punctuation">,</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> pivot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> j <span class="token operator">-</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>  数组<code>[7, 4, 5, 2, 8, 1, 3, 6]</code>的排序过程，搭配动图参考效果更加。</p> <p><img src="/js/sort/quick.png" alt=""></p> <h4 id="特性-5"><a href="#特性-5" class="header-anchor">#</a> 特性</h4> <h5 id="时间复杂度-2"><a href="#时间复杂度-2" class="header-anchor">#</a> 时间复杂度</h5> <p>  最优情况下，每次递归选取的基准值，刚好将数组分为长度相同的两个区间。对规模为<code>n</code>的数组排序，即转换为对两个规模为<code>n / 2</code>的数组排序，符合<code>master</code>主定理条件，时间复杂度为<code>T(n) = 2T(n / 2) + O(n)</code>。容易知道，<code>a = 2</code>，<code>b = 2</code>和<code>d = 1</code>，因此最优情况下的时间复杂度为<code>O(n<sup>d</sup>logn) = O(nlogn)</code>。</p> <p>  最坏情况下，数组是升序，例如<code>[1, 2, 3, 4]</code>，比较次数为<code>4 + 3 + 2 = 9</code>次。对于长度为<code>n</code>的升序数组，比较次数则为<code>n + (n - 1) + ... + 3 + 2</code>，即<code>(n + 2) * (n - 1) / 2</code>次（算法代码存在差异，比较次数也会有所差异，注意区分），所以最坏情况下的时间复杂度为<code>O(n<sup>2</sup>)</code>。</p> <p>  快速排序的平均时间复杂度为<code>O(nlogn)</code>，对分析过程感兴趣的可以参考文末，此处不作过多说明。</p> <h5 id="空间复杂度-2"><a href="#空间复杂度-2" class="header-anchor">#</a> 空间复杂度</h5> <p>  空间复杂度参考两条原则，数组长度和递归深度，其中包括。</p> <ul><li>若为数组，数组长度则为空间复杂度。例如一维数组长度为<code>n</code>，空间复杂度为<code>O(n)</code>。二维数组长度为<code>n * n</code>，空间复杂度为<code>O(n<sup>2</sup>)</code>，多维以此类推</li> <li>若为递归，递归深度则为空间复杂度的最大值。例如递归深度为<code>n</code>，空间复杂度为<code>O(n)</code></li> <li>若递归和数组两者都有，则空间复杂度为两者中较大值</li></ul> <p>  快速排序虽然为原地排序，没有占用额外的数组，空间复杂度为<code>O(1)</code>。</p> <p>  但是注意存在递归，最优情况下递归深度为<code>log<sub>2</sub>n</code>，最差情况下递归深度为<code>n</code>，故快速排序空间复杂度范围为<code>O(logn)</code>到<code>O(n)</code>。</p> <h5 id="稳定性-2"><a href="#稳定性-2" class="header-anchor">#</a> 稳定性</h5> <p>  快速排序是不稳定的，以<code>[3, 1, 3', 2]</code>数组为例子，分区后数组为<code>[1, 2, 3', 3]</code>，很明显快速排序是不稳定的。</p> <h4 id="非原地排序版"><a href="#非原地排序版" class="header-anchor">#</a> 非原地排序版</h4> <p>  此版本与归并排序非常类似，但是更加符合快速排序的原理，即数组一分为三个区间。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length

  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr

  <span class="token keyword">var</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">&lt;=</span> pivot <span class="token operator">&amp;&amp;</span> i <span class="token operator">!==</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> right <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v <span class="token operator">&gt;</span> pivot<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>pivot<span class="token punctuation">,</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>  最优情况下，数组规模<code>n</code>转换为两个<code>n / 2</code>规模的数组，<code>T(n) = 2T(n / 2) + O(n)</code>，<code>filter</code>时间复杂度为<code>O(n)</code>，多个也是<code>O(n)</code>，根据<code>master</code>主定理，时间复杂度为<code>O(nlogn)</code>。</p> <p>  最差情况下，即升序，例如<code>[1, 2, 3, 4]</code>，比较次数为<code>4 + 3 + 2</code>。长度为<code>n</code>的数组，比较次数为<code>n + (n - 1) + ... + 3 + 2</code>，即<code>(n + 2) * (n - 1) / 2</code>，时间复杂度为<code>O(n<sup>2</sup>)</code>。</p> <p>  空间复杂度与归并一致，均为<code>O(n)</code>，仅最后一次<code>concat</code>拼接时，占用的空间才会达到最大长度<code>n</code>，之前占用的空间都已经被释放，另外此排序是稳定的。</p> <h3 id="计数排序"><a href="#计数排序" class="header-anchor">#</a> 计数排序</h3> <p>  计数排序（<code>Count Sort</code>）也非常形象，是非比较排序，原理是开辟一个新数组，然后遍历原数组，将数据值转换为新数组的键，键上的值记录数据值出现的次数。</p> <p><img src="/js/sort/count.gif" alt=""></p> <p>  封装为以下函数，注意新数组中可能存在很多的<code>empty</code>空位，<code>for</code>循环不会跳过空位。</p> <p>  ;<code>counts</code>为计数数组，例如数组<code>[0, 1, 3, 1]</code>，生成的计数数组<code>counts</code>为<code>[1, 2, empty, 1]</code>，表示数值<code>0</code>有<code>1</code>个，数值<code>1</code>有两个，数值<code>3</code>有<code>1</code>个。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">countSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> value<span class="token punctuation">,</span> counts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> counts<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
      counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">--</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><p>  以上<code>countSort</code>函数无法排序负数，引入<code>min</code>最小值偏移量。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">countSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> value<span class="token punctuation">,</span> counts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> min

    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> counts<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>j <span class="token operator">+</span> min<span class="token punctuation">)</span>
      counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">--</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><h4 id="特性-6"><a href="#特性-6" class="header-anchor">#</a> 特性</h4> <p>  以上计数排序的循环次数为<code>n + n + n + k</code>次，其中获取最小值循环<code>n</code>次，生成计数数组循环<code>n</code>次，<code>while</code>循环恰好为<code>count</code>总数，也就是原数组长度<code>n</code>，<code>k</code>为计数数组长度，故时间复杂度为<code>O(n + k)</code>。</p> <p>  空间复杂度为<code>O(n + k)</code>，<code>k</code>为计数数组<code>counts</code>的长度，<code>n</code>为结果数组<code>result</code>的长度。</p> <p>  另外以上计数排序不是原地排序，并且不稳定。</p> <h4 id="稳定版"><a href="#稳定版" class="header-anchor">#</a> 稳定版</h4> <p>  在计数数组之上，衍生出了累加数组，何为累加数组呢？即累加数组中的元素都是计数数组对应元素与之前元素之和。</p> <p>  比如计数数组<code>[1, 2, 3]</code>，生成的累加数组为<code>[1, 3, 6]</code>。累加数组的第三个元素<code>6</code>就是计数数组的第三个元素<code>3</code>与之前元素<code>1</code>和<code>2</code>相加的和。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> counts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> adds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> counts<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  adds<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> sum
<span class="token punctuation">}</span>

adds <span class="token comment">// [1, 3, 6]</span>
</code></pre></div><p>  若累加数组就用<code>counts</code>表示呢？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> counts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> counts<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
  counts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> counts<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

counts <span class="token comment">// [1, 3, 6]</span>
</code></pre></div><p>  数组<code>[2, 1, 2, 0, 2, 1]</code>，计数数组为<code>[1, 2, 3]</code>，累加数组为<code>[1, 3, 6]</code>，排序结果<code>result</code>为<code>[0, 1, 1, 2, 2, 2]</code>。</p> <p>  现在思考下累加数组的作用呢？</p> <p>  以累加数组第一个元素<code>1</code>（索引<code>0</code>）为例，表明了数值<code>0</code>一定位于结果数组<code>result</code>的<code>0</code>（<code>1 - 0</code>）索引处。若有相同数值，例如第二个元素<code>3</code>（索引<code>1</code>），表明数值<code>1</code>最后的位置一定位于<code>result</code>的<code>2</code>（<code>3 - 1</code>）的索引处。</p> <p>  很明显发现，累加数组就是保存了数值在结果数组中的位置信息，相同数值则保存的是最后出现的位置。</p> <p>  封装为以下函数，注意生成<code>result</code>时，是倒序循环的原数组，保证了稳定性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">countSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> counts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> value<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> counts<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
    counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> counts<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> k <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> k<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span>

    index <span class="token operator">=</span> counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span>
    result<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">--</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><p>  数组<code>[0, 1, 3, 1]</code>的排序过程，其中累加数组为<code>[1, 3, 3, 4]</code>。</p> <p><img src="/js/sort/count.png" alt=""></p> <p>  引入<code>min</code>偏移量可排序负数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">countSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> counts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> value<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> min

    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> counts<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
    counts<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> counts<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> k <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> k<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span> min

    index <span class="token operator">=</span> counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span>
    result<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
    counts<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">--</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><p>  稳定版计数排序的循环次数为<code>n + n + k + n</code>，因此时间复杂度为<code>O(n + k)</code>，空间复杂度为<code>O(n + k)</code>，非原地排序。</p> <p>  计数排序的缺点也很明显。</p> <ul><li>无法排序非整数，局限性很高</li> <li>适用于数据范围较小的数组，数据范围较大时耗费内存</li> <li>数据量大的时候可能存在排序效率不如比较排序的情况</li></ul> <h3 id="基数排序"><a href="#基数排序" class="header-anchor">#</a> 基数排序</h3> <p>  基数排序（<code>Radix Sort</code>）也非常形象，运用了桶的概念，桶的数量由基数决定的。例如十进制数的基数为<code>10</code>，则桶的数量为<code>10</code>个，保存位数在<code>0 ~ 9</code>之间的数。</p> <p>  数组中的最值决定排序次数，每次排序获取数值的位数，放入对应的桶中，然后循环桶将数值取出。由于桶是有序的，取出的数在位数上则也是有序的，并且排序是由低位开始，故排序结束数组将是有序的。</p> <p><img src="/js/sort/radix.gif" alt=""></p> <p>  以数组<code>[1, 61, 865, 65, 5]</code>为例子，最大值为<code>865</code>，则排序<code>3</code>轮，分别为个位十位百位。</p> <p><img src="/js/sort/radix.png" alt=""></p> <p>  封装为以下函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">radixSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> buckets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>

  <span class="token keyword">do</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> value <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">const</span> digit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>value <span class="token operator">/</span> n<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span>

      buckets<span class="token punctuation">[</span>digit<span class="token punctuation">]</span> <span class="token operator">=</span> buckets<span class="token punctuation">[</span>digit<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      buckets<span class="token punctuation">[</span>digit<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

      <span class="token keyword">while</span> <span class="token punctuation">(</span>buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        k<span class="token operator">++</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    n <span class="token operator">*=</span> <span class="token number">10</span>
  <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>max <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>  其中<code>digit</code>表示取出数字的固定位，以<code>865</code>为例。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 个位</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">865</span> <span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span>   <span class="token comment">// 5</span>

<span class="token comment">// 十位</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">865</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span>  <span class="token comment">// 6</span>

<span class="token comment">// 百位</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">865</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span> <span class="token comment">// 8 </span>
</code></pre></div><h4 id="特性-7"><a href="#特性-7" class="header-anchor">#</a> 特性</h4> <p>  以上基数排序的循环次数为<code>n + k * 2n</code>，其中获取最大值循环<code>n</code>次，<code>do ... while</code>循环<code>k</code>次，<code>k</code>由最大值决定。<code>2n</code>为<code>n + n</code>，<code>do ... while</code>循环体中，数字放入桶中循环<code>n</code>次，从桶中取出循环<code>n</code>次（<code>while</code>总的循环次数恰好为原数组长度<code>n</code>），故时间复杂度为<code>o(kn)</code>。</p> <p>  空间复杂度为<code>O(n + k)</code>，其中<code>n</code>为原数组长度，<code>k</code>为桶的数量或者基数。</p> <p>  由于占用了额外的空间，基数排序为非原地排序，但是为稳定排序。</p> <h4 id="负数版"><a href="#负数版" class="header-anchor">#</a> 负数版</h4> <p>  以上基数排序的排序范围非常小，只能排序<code>0</code>和正数，引入偏移量可排序负数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">radixSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> buckets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> min <span class="token operator">=</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> max <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">Infinity</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> max<span class="token punctuation">)</span> max <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> min<span class="token punctuation">)</span> min <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  max <span class="token operator">-=</span> min

  <span class="token keyword">do</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> value <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> min
      <span class="token keyword">const</span> digit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>value <span class="token operator">/</span> n<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span>

      buckets<span class="token punctuation">[</span>digit<span class="token punctuation">]</span> <span class="token operator">=</span> buckets<span class="token punctuation">[</span>digit<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      buckets<span class="token punctuation">[</span>digit<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

      <span class="token keyword">while</span> <span class="token punctuation">(</span>buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> buckets<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> min
        k<span class="token operator">++</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    n <span class="token operator">*=</span> <span class="token number">10</span>
  <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>max <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>  负数版的时间空间复杂度与之前的基数排序一致，注意负数版由于存在数值与<code>min</code>加减运算的情况，是不稳定的。</p> <p>  例如数组<code>[1, 3, new Number(1)]</code>，之前版本将排序为<code>[1, Number, 3]</code>，而负数版则为<code>[1, 1, 3]</code>，排序的元素由<code>new Number(1)</code>变成了<code>1</code>，去探讨稳定性没有多大意义。你也可以理解为扩大了排序范围，但是丢失了稳定性，毕竟元素都改变了。</p> <h3 id="桶排序"><a href="#桶排序" class="header-anchor">#</a> 桶排序</h3> <p>  桶排序（<code>Bucket Sort / Bin Sort</code>）即将待排序元素放入对应的桶，桶间有序，桶内无序，然后局部排序桶内元素即可。其中计数排序和基数排序就属于一类比较特殊的桶排序。</p> <p>  严格来说，桶排序不是一种排序方式，因为独立的桶内部还是依赖于常见的排序，更多的是一种数组预处理的过程，或者说是一种优化方式，符合分而治之的思想，对于处理大批量的数据将会非常有用。</p> <p><img src="/js/sort/bucket.gif" alt=""></p> <p>  封装为以下函数，其中桶的数量为<code>count</code>，由最值和桶内的数据个数<code>size</code>决定。合理的<code>size</code>将决定桶内数据的排序方式，插入排序在数据量不大的时候就比较合适。当<code>size</code>为<code>1</code>时，桶排序与计数排序将高度相似。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bucketSort</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> size <span class="token operator">=</span> <span class="token number">6</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> buckets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span> min <span class="token operator">=</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> max <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">Infinity</span>
    
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> max<span class="token punctuation">)</span> max <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> min<span class="token punctuation">)</span> min <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  count <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">/</span> size<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    buckets<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">/</span> size<span class="token punctuation">)</span>

    buckets<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> buckets<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> item <span class="token operator">=</span> buckets<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

	<span class="token function">insertionSort</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> item<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
      n<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>  以数据量为<code>100000</code>的数组为例，桶排序与插入排序的效率对比。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> first <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> second <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">100000</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  first<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  second<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token operator">...</span>

console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'bucketSort'</span><span class="token punctuation">)</span>
<span class="token function">bucketSort</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'bucketSort'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'insertionSort'</span><span class="token punctuation">)</span>
<span class="token function">insertionSort</span><span class="token punctuation">(</span>second<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'insertionSort'</span><span class="token punctuation">)</span>

<span class="token comment">// bucketSort: 11.285888671875 ms</span>
<span class="token comment">// insertionSort: 1559.23193359375 ms</span>
</code></pre></div><h4 id="特性-8"><a href="#特性-8" class="header-anchor">#</a> 特性</h4> <h5 id="时间复杂度-3"><a href="#时间复杂度-3" class="header-anchor">#</a> 时间复杂度</h5> <p>  桶排序的时间复杂度分为三个部分，包括。</p> <ul><li>获取最值，根据最值和桶内元素的个数创建桶，元素分配到桶中</li> <li>所有的桶独立排序</li> <li>桶元素依次取出，完成排序</li></ul> <p>  第一步为<code>O(n + k + n)</code>，其中获取最值循环<code>n</code>次，创建桶循环<code>k</code>次，<code>k</code>为桶的个数，元素分配到桶中循环<code>n</code>次。第三步循环<code>k</code>个桶，将<code>n</code>个元素取出，即<code>O(n + k)</code>。</p> <p>  第二步选择的排序方式不同，时间复杂度也会不同。例如插入排序，时间复杂度为<code>O(n)</code>到<code>O(n<sup>2</sup>)</code>之间，<code>k</code>个规模为<code>m</code>（<code>n / k</code>）的数组时间复杂度为<code>O(km)</code>到<code>O(km<sup>2</sup>)</code>之间，代入<code>m = n / k</code>则为<code>O(n)</code>到<code>O(n<sup>2</sup> / k)</code>范围。</p> <p>  合并的时间复杂度为<code>O(n + k)</code>到<code>O(n<sup>2</sup>)</code>。</p> <h5 id="空间复杂度-3"><a href="#空间复杂度-3" class="header-anchor">#</a> 空间复杂度</h5> <p>  空间复杂度，桶排序的稳定性都由内部的排序决定。例如内部为插入排序，则桶排序的空间复杂度为<code>O(n + k)</code>，<code>n</code>为桶内数组的长度之和，也就是原数组的长度，<code>k</code>为桶的数量。插入排序为稳定排序，因此以上桶排序也是稳定的。</p> <p>  另外由于占用了额外空间，桶排序则不是原地排序。</p> <p>  桶排序的缺点也很明显。</p> <ul><li>占用空间，桶的数量越多，空间复杂度就越高，相对的时间复杂度就越低。当桶的数量与数组个数相等时，将退化成计数排序</li> <li>数据要相当紧凑，太分散会创建很多空的桶</li></ul> <h3 id="堆排序"><a href="#堆排序" class="header-anchor">#</a> 堆排序</h3> <p>  堆排序（<code>Heap Sort</code>）也非常形象，主要原理是运用堆的性质，依次取出数组中的最大值。</p> <h4 id="大顶堆"><a href="#大顶堆" class="header-anchor">#</a> 大顶堆</h4> <p>  堆排序中提到的堆是一种叫做完全二叉树的数据结构，包括大顶堆和小顶堆。</p> <p><img src="/js/sort/maxHeap.png" alt=""></p> <p>  以大顶堆为例，它的根节点一定是最大值，且每个节点都大于或者等于左右子节点的值。</p> <p>  若当前节点的索引为<code>i</code>，则左子节点为<code>i * 2 + 1</code>，右子节点为<code>i * 2 + 2</code>，父节点为<code>Math.floor((i - 1) / 2)</code>。</p> <p>  注意观察，最后一个叶子节点的父节点，一定是最后一个非叶子节点。最后一个非叶子节点之前的节点，也全部都是非叶子节点。</p> <p>  数组长度为<code>n</code>，最后一个叶子节点为<code>n - 1</code>。<code>n - 1</code>代入<code>Math.floor((i - 1) / 2)</code>则有<code>Math.floor((n - 1 - 1) / 2)</code>，化简即最后一个非叶子节点为<code>Math.floor(n / 2) - 1</code>。</p> <h4 id="堆化"><a href="#堆化" class="header-anchor">#</a> 堆化</h4> <p>  那么如何将一个无序序列构建成大顶堆呢？</p> <p>  根据大顶堆的性质，非叶子节点均大于等于左右子节点。因此先要找到所有的非叶子节点，然后交换当前节点和左右子节点，形成父节点大于子节点的结构。</p> <p><img src="/js/sort/heapify.png" alt=""></p> <p>  又如何找到所有的非叶子节点呢？</p> <p>  刚才已经知道，最后一个非叶子节点之前的所有节点都是非叶子节点，且最后一个非叶子节点的索引为<code>Math.floor(n / 2) - 1</code>，故索引在<code>0</code>到<code>Math.floor(n / 2) - 1</code>之间都是非叶子节点。</p> <p>  以数组<code>[6, 5, 1, 7, 8, 4]</code>为例，<code>Math.floor(6 / 2) - 1 = 2</code>，故索引为<code>0 1 2</code>的节点都是非叶子节点。</p> <p><img src="/js/sort/leaf.png" alt=""></p> <p>  思考一个问题，是自顶向下从<code>0</code>开始循环到<code>2</code>，还是自底向上从<code>2</code>开始循环到<code>0</code>呢？</p> <p>  假设当前节点位于二叉树第<code>i</code>层，如果是自顶向下，在与第<code>i + 1</code>层的子节点发生交换后，第<code>i</code>层并不能保证小于第<code>i - 1</code>层，还要向上回溯第<code>i - 1</code>层。</p> <p>  如果是自底向上，在与第<code>i + 1</code>层交换后，事实上也不能保证第<code>i</code>层小于第<code>i - 1</code>层。但是注意，由于是自底向上，循环了第<code>i</code>层后，紧接着会继续循环<code>i - 1</code>层，而此时就保证了第<code>i</code>层小于第<code>i - 1</code>层。</p> <p>  还是以数组<code>[6, 5, 1, 7, 8, 4]</code>为例，两种情况的过程为。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 自顶向下</span>
     <span class="token number">6</span>             <span class="token number">6</span>             <span class="token number">8</span>             <span class="token number">8</span>             <span class="token number">8</span>
   <span class="token operator">/</span>   \         <span class="token operator">/</span>   \         <span class="token operator">/</span>   \         <span class="token operator">/</span>   \         <span class="token operator">/</span>   \
  <span class="token number">5</span>     <span class="token number">1</span>  <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token number">8</span>     <span class="token number">1</span>  <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token number">6</span>     <span class="token number">1</span>  <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token number">7</span>     <span class="token number">1</span>  <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token number">7</span>     <span class="token number">4</span>
 <span class="token operator">/</span> \   <span class="token operator">/</span>       <span class="token operator">/</span> \   <span class="token operator">/</span>       <span class="token operator">/</span> \   <span class="token operator">/</span>       <span class="token operator">/</span> \   <span class="token operator">/</span>       <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> \   </span><span class="token regex-delimiter">/</span></span>
<span class="token number">7</span>   <span class="token number">8</span> <span class="token number">4</span>       <span class="token number">7</span>   <span class="token number">5</span> <span class="token number">4</span>       <span class="token number">7</span>   <span class="token number">5</span> <span class="token number">4</span>       <span class="token number">6</span>   <span class="token number">5</span> <span class="token number">4</span>       <span class="token number">6</span>   <span class="token number">5</span> <span class="token number">1</span>

<span class="token comment">// 自底向上</span>
     <span class="token number">6</span>             <span class="token number">6</span>             <span class="token number">6</span>             <span class="token number">8</span>             <span class="token number">8</span>
   <span class="token operator">/</span>   \         <span class="token operator">/</span>   \         <span class="token operator">/</span>   \         <span class="token operator">/</span>   \         <span class="token operator">/</span>   \
  <span class="token number">5</span>     <span class="token number">1</span>  <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token number">5</span>     <span class="token number">4</span>  <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token number">8</span>     <span class="token number">4</span>  <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token number">6</span>     <span class="token number">4</span>  <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token number">7</span>     <span class="token number">4</span>
 <span class="token operator">/</span> \   <span class="token operator">/</span>       <span class="token operator">/</span> \   <span class="token operator">/</span>       <span class="token operator">/</span> \   <span class="token operator">/</span>       <span class="token operator">/</span> \   <span class="token operator">/</span>       <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> \   </span><span class="token regex-delimiter">/</span></span>
<span class="token number">7</span>   <span class="token number">8</span> <span class="token number">4</span>       <span class="token number">7</span>   <span class="token number">8</span> <span class="token number">1</span>       <span class="token number">7</span>   <span class="token number">5</span> <span class="token number">1</span>       <span class="token number">7</span>   <span class="token number">5</span> <span class="token number">1</span>       <span class="token number">6</span>   <span class="token number">5</span> <span class="token number">1</span>
</code></pre></div><p>  自底向上的动态过程。</p> <p><img src="/js/sort/maxHeap.gif" alt=""></p> <p>  构建大顶堆过程封装为<code>buildMaxHeap</code>函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">buildMaxHeap</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
    max <span class="token operator">=</span> i<span class="token punctuation">,</span>
    left <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    right <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>max<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    max <span class="token operator">=</span> left
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>max<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    max <span class="token operator">=</span> right
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">!==</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> max<span class="token punctuation">)</span>
    <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> max<span class="token punctuation">,</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token function">buildMaxHeap</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [8, 7, 4, 6, 5, 1]</span>
</code></pre></div><h4 id="排序-2"><a href="#排序-2" class="header-anchor">#</a> 排序</h4> <p>  构建出大顶堆，排序过程就非常简单了。</p> <p>  大顶堆的根节点为最大值，将根节点与末尾节点交换，取出最大值，然后对剩下的节点持续构建成大顶堆。</p> <p>  注意取出最大值后，二叉树除了根节点不符合当前节点大于等于子节点的性质之外，剩下的所有节点都符合。因此仅仅对根节点执行堆化即可。</p> <p><img src="/js/sort/heapify.gif" alt=""></p> <p>  封装为以下函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">heapSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length

  <span class="token function">buildMaxHeap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> len<span class="token punctuation">)</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span>
    <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">buildMaxHeap</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> len</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>len <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> max <span class="token operator">=</span> i<span class="token punctuation">,</span>
    left <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    right <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>max<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    max <span class="token operator">=</span> left
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>max<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    max <span class="token operator">=</span> right
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">!==</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> max<span class="token punctuation">)</span>
    <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> max<span class="token punctuation">,</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="特性-9"><a href="#特性-9" class="header-anchor">#</a> 特性</h4> <p>  堆排序的时间复杂度为<code>O(nlogn)</code>，空间复杂度为<code>O(1)</code>，没有占用额外的空间，即也是原地排序。</p> <p>  以数组<code>[2, 1, 2']</code>为例子，排序后为<code>[1, 2', 2]</code>，因此堆排序是不稳定的。</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://visualgo.net/zh/sorting" target="_blank" rel="noopener noreferrer">排序可视化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/341201904" target="_blank" rel="noopener noreferrer">快速排序的时间复杂度分析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.ruanyifeng.com/blog/2011/04/quicksort_in_javascript.html" target="_blank" rel="noopener noreferrer">阮一峰快速排序<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.zhihu.com/question/276746146/answer/392700912" target="_blank" rel="noopener noreferrer">如何看待文章《面试官：阮一峰版的快速排序完全是错的》？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="🎉-写在最后"><a href="#🎉-写在最后" class="header-anchor">#</a> 🎉 写在最后</h2> <p>🍻伙伴们，如果你已经看到了这里，觉得这篇文章有帮助到你的话不妨点赞👍或 <a href="https://github.com/dongwei1125/blog" target="_blank" rel="noopener noreferrer">Star<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ✨支持一下哦！</p> <p>手动码字，如有错误，欢迎在评论区指正💬~</p> <p>你的支持就是我更新的最大动力💪~</p> <p><a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> / <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer">Gitee<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://dongwei1125.github.io/" target="_blank" rel="noopener noreferrer">GitHub Pages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer">掘金<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer">CSDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 同步更新，欢迎关注😉~</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">5/30/2022, 10:00:14 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0aa97f73.js" defer></script><script src="/assets/js/2.f850a8ef.js" defer></script><script src="/assets/js/50.d051084c.js" defer></script><script src="/assets/js/3.31ebf682.js" defer></script>
  </body>
</html>
