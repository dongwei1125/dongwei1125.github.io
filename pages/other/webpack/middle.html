<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç† Webpack åŸºç¡€ï¼ˆä¸­ï¼‰ | DonV</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/header.jpg">
    <meta name="description" content="A paper about JavaScript, HTML and CSS.">
    
    <link rel="preload" href="/assets/css/0.styles.87611319.css" as="style"><link rel="preload" href="/assets/js/app.0aa97f73.js" as="script"><link rel="preload" href="/assets/js/2.f850a8ef.js" as="script"><link rel="preload" href="/assets/js/62.66c23699.js" as="script"><link rel="prefetch" href="/assets/js/10.cb041c1b.js"><link rel="prefetch" href="/assets/js/11.1aadbcee.js"><link rel="prefetch" href="/assets/js/12.77cc8e56.js"><link rel="prefetch" href="/assets/js/13.7e8162d9.js"><link rel="prefetch" href="/assets/js/14.dea6ba67.js"><link rel="prefetch" href="/assets/js/15.a786d687.js"><link rel="prefetch" href="/assets/js/16.163edf25.js"><link rel="prefetch" href="/assets/js/17.3a0232cb.js"><link rel="prefetch" href="/assets/js/18.91bd2dd7.js"><link rel="prefetch" href="/assets/js/19.a36993f8.js"><link rel="prefetch" href="/assets/js/20.30dd9f79.js"><link rel="prefetch" href="/assets/js/21.5e3c83a3.js"><link rel="prefetch" href="/assets/js/22.88d5e321.js"><link rel="prefetch" href="/assets/js/23.b54a65a7.js"><link rel="prefetch" href="/assets/js/24.51df379f.js"><link rel="prefetch" href="/assets/js/25.79342bd2.js"><link rel="prefetch" href="/assets/js/26.643d5441.js"><link rel="prefetch" href="/assets/js/27.54b7d7b4.js"><link rel="prefetch" href="/assets/js/28.d01a4aee.js"><link rel="prefetch" href="/assets/js/29.7d932073.js"><link rel="prefetch" href="/assets/js/3.31ebf682.js"><link rel="prefetch" href="/assets/js/30.4c2f5636.js"><link rel="prefetch" href="/assets/js/31.b00c42d5.js"><link rel="prefetch" href="/assets/js/32.e9a0f488.js"><link rel="prefetch" href="/assets/js/33.f510b5fd.js"><link rel="prefetch" href="/assets/js/34.6e78f32f.js"><link rel="prefetch" href="/assets/js/35.04d666a2.js"><link rel="prefetch" href="/assets/js/36.900a3beb.js"><link rel="prefetch" href="/assets/js/37.19ddf8d7.js"><link rel="prefetch" href="/assets/js/38.35f899bd.js"><link rel="prefetch" href="/assets/js/39.fe9ea525.js"><link rel="prefetch" href="/assets/js/4.3c7083a8.js"><link rel="prefetch" href="/assets/js/40.0d116ce0.js"><link rel="prefetch" href="/assets/js/41.6cdce4cf.js"><link rel="prefetch" href="/assets/js/42.ab0bd0d5.js"><link rel="prefetch" href="/assets/js/43.66c8f8eb.js"><link rel="prefetch" href="/assets/js/44.ac02981e.js"><link rel="prefetch" href="/assets/js/45.479814b0.js"><link rel="prefetch" href="/assets/js/46.29956259.js"><link rel="prefetch" href="/assets/js/47.a89cf7d2.js"><link rel="prefetch" href="/assets/js/48.859e3502.js"><link rel="prefetch" href="/assets/js/49.d0fa0b25.js"><link rel="prefetch" href="/assets/js/5.206809f3.js"><link rel="prefetch" href="/assets/js/50.d051084c.js"><link rel="prefetch" href="/assets/js/51.fa831e6a.js"><link rel="prefetch" href="/assets/js/52.3ed98760.js"><link rel="prefetch" href="/assets/js/53.016b1c3c.js"><link rel="prefetch" href="/assets/js/54.c88e06c5.js"><link rel="prefetch" href="/assets/js/55.937bfe09.js"><link rel="prefetch" href="/assets/js/56.03003660.js"><link rel="prefetch" href="/assets/js/57.8bcda68a.js"><link rel="prefetch" href="/assets/js/58.286692ba.js"><link rel="prefetch" href="/assets/js/59.fbfe98aa.js"><link rel="prefetch" href="/assets/js/6.6f9d9bda.js"><link rel="prefetch" href="/assets/js/60.0975844e.js"><link rel="prefetch" href="/assets/js/61.0af6cf48.js"><link rel="prefetch" href="/assets/js/63.7fda9b3f.js"><link rel="prefetch" href="/assets/js/7.6f64fba1.js"><link rel="prefetch" href="/assets/js/8.a163349f.js"><link rel="prefetch" href="/assets/js/9.9058d3cc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.87611319.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/header.jpg" alt="DonV" class="logo"> <span class="site-name can-hide">DonV</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/pages/js/nav.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/pages/html/nav.html" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/pages/css/nav.html" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/pages/other/nav.html" class="nav-link">
  å…¶å®ƒ
</a></div><div class="nav-item"><a href="/pages/app/nav.html" class="nav-link">
  åº”ç”¨
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…³äº" class="dropdown-title"><span class="title">å…³äº</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…³äº" class="mobile-dropdown-title"><span class="title">å…³äº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/~dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/pages/js/nav.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/pages/html/nav.html" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/pages/css/nav.html" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/pages/other/nav.html" class="nav-link">
  å…¶å®ƒ
</a></div><div class="nav-item"><a href="/pages/app/nav.html" class="nav-link">
  åº”ç”¨
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…³äº" class="dropdown-title"><span class="title">å…³äº</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…³äº" class="mobile-dropdown-title"><span class="title">å…³äº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/~dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç† Webpack åŸºç¡€ï¼ˆä¸­ï¼‰</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/other/webpack/middle.html#ä»£ç åˆ†ç‰‡" class="sidebar-link">ä»£ç åˆ†ç‰‡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#commonschunkplugin" class="sidebar-link">CommonsChunkPlugin</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#optimization-splitchunks" class="sidebar-link">optimization.splitChunks</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#splitchunks-é…ç½®å‚æ•°" class="sidebar-link">splitChunks é…ç½®å‚æ•°</a></li></ul></li><li><a href="/pages/other/webpack/middle.html#ç”Ÿäº§ç¯å¢ƒ" class="sidebar-link">ç”Ÿäº§ç¯å¢ƒ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#ç¯å¢ƒé…ç½®" class="sidebar-link">ç¯å¢ƒé…ç½®</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#production-æ¨¡å¼" class="sidebar-link">production æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#ç¯å¢ƒå˜é‡" class="sidebar-link">ç¯å¢ƒå˜é‡</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#åŒºåˆ†ç¯å¢ƒæ–¹å¼" class="sidebar-link">åŒºåˆ†ç¯å¢ƒæ–¹å¼</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#source-map" class="sidebar-link">source map</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#devtool-é…ç½®é¡¹" class="sidebar-link">devtool é…ç½®é¡¹</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#èµ„æºå‹ç¼©" class="sidebar-link">èµ„æºå‹ç¼©</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#ç¼“å­˜" class="sidebar-link">ç¼“å­˜</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#ç›‘æ§åˆ†æ" class="sidebar-link">ç›‘æ§åˆ†æ</a></li></ul></li><li><a href="/pages/other/webpack/middle.html#æ‰“åŒ…ä¼˜åŒ–" class="sidebar-link">æ‰“åŒ…ä¼˜åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#happypack" class="sidebar-link">HappyPack</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#ç¼©å°æ‰“åŒ…èŒƒå›´" class="sidebar-link">ç¼©å°æ‰“åŒ…èŒƒå›´</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#dllplugin" class="sidebar-link">DllPlugin</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/middle.html#tree-shaking" class="sidebar-link">tree shaking</a></li></ul></li><li><a href="/pages/other/webpack/middle.html#ğŸ‰-å†™åœ¨æœ€å" class="sidebar-link">ğŸ‰ å†™åœ¨æœ€å</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç†-webpack-åŸºç¡€-ä¸­"><a href="#ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç†-webpack-åŸºç¡€-ä¸­" class="header-anchor">#</a> ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç† Webpack åŸºç¡€ï¼ˆä¸­ï¼‰</h1> <p><img src="/other/webpack/banner.jpg" alt=""></p> <h2 id="ä»£ç åˆ†ç‰‡"><a href="#ä»£ç åˆ†ç‰‡" class="header-anchor">#</a> ä»£ç åˆ†ç‰‡</h2> <p>â€ƒâ€ƒä»£ç åˆ†ç‰‡ï¼ˆ<code>code splitting</code>ï¼‰æ˜¯<code>webpack</code>æ‰€ç‰¹æœ‰çš„ä¸€é¡¹æŠ€æœ¯ï¼Œå¯ä»¥å°†ä»£ç æŒ‰ç…§ç‰¹å®šçš„å½¢å¼è¿›è¡Œæ‹†åˆ†ï¼Œä¸ç”¨ä¸€æ¬¡å…¨éƒ¨åŠ è½½è€Œæ˜¯æŒ‰éœ€åŠ è½½ï¼Œèƒ½æœ‰æ•ˆé™ä½é¦–å±åŠ è½½èµ„æºçš„å¤§å°ã€‚</p> <h3 id="commonschunkplugin"><a href="#commonschunkplugin" class="header-anchor">#</a> CommonsChunkPlugin</h3> <p>â€ƒâ€ƒ;<code>CommonsChunkPlugin</code>æ˜¯<code>webpack4-</code>å†…éƒ¨è‡ªå¸¦çš„æ’ä»¶ï¼Œå¯ä»¥å°†å¤šä¸ª<code>chunk</code>ä¸­çš„å…¬å…±éƒ¨åˆ†æå–å‡ºæ¥ã€‚ä»è€Œå‡å°‘å¼€å‘è¿‡ç¨‹ä¸­æ¨¡å—çš„é‡å¤æ‰“åŒ…ï¼Œæå‡å¼€å‘é€Ÿåº¦ã€‚èµ„æºæ•´ä½“ä½“ç§¯ä¹Ÿå‡å°äº†ï¼Œå¹¶ä¸”å¯ä»¥æœ‰æ•ˆçš„åˆ©ç”¨å®¢æˆ·ç«¯ç¼“å­˜ã€‚</p> <p>â€ƒâ€ƒ;<code>CommonsChunkPlugin</code>å¯é…ç½®å±æ€§å¦‚ä¸‹ã€‚</p> <ul><li><code>name</code>ï¼šå°†<code>chunks</code>å±æ€§å¯¹åº”çš„<code>source chunk</code>ä¸­çš„å…¬å…±æ¨¡å—æå–åˆ°<code>name</code>ä¸­ï¼Œè‹¥æœªæŒ‡å®š<code>chunks</code>ï¼Œé»˜è®¤å°†æå–<code>entry chunks</code>ä¸­çš„å…¬å…±æ¨¡å—</li> <li><code>chunks</code>ï¼šæŒ‡å®š<code>source chunk</code>ï¼Œå³è¡¨ç¤ºä»å“ªäº›<code>chunk</code>ä¸­æŸ¥æ‰¾å…¬å…±æ¨¡å—ï¼Œçœç•¥æ­¤é€‰é¡¹é»˜è®¤ä¸º<code>entry chunks</code></li> <li><code>filename</code>ï¼šæå–åçš„èµ„æºæ–‡ä»¶åï¼Œæ”¯æŒæ¨¡æ¿è¯­è¨€çš„å½¢å¼åŠ¨æ€ç”Ÿæˆ</li> <li><code>minChunks</code>ï¼šå¯ä»¥ä¸ºæ•°å­—ã€å‡½æ•°æˆ–è€…<code>Infinity</code></li></ul> <h4 id="éæ’ä»¶æ‰“åŒ…"><a href="#éæ’ä»¶æ‰“åŒ…" class="header-anchor">#</a> éæ’ä»¶æ‰“åŒ…</h4> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>package.json</code>ã€<code>webpack.config.js</code>å’Œ<code>src</code>ç­‰ï¼Œ<code>src</code>ç›®å½•ä¸‹åŒ…æ‹¬<code>foo.js</code>ã€<code>bar.js</code>å’Œ<code>utils.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.10.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;jquery&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'./src/foo.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'./src/bar.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/bar.js</span>
<span class="token keyword">import</span> jquery <span class="token keyword">from</span> <span class="token string">'jquery'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./utils.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jquery<span class="token punctuation">,</span> log<span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>

<span class="token comment">// src/foo.js</span>
<span class="token keyword">import</span> jquery <span class="token keyword">from</span> <span class="token string">'jquery'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./utils.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jquery<span class="token punctuation">,</span> log<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>

<span class="token comment">// src/utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'log'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œæ‰“åŒ…åå°†åœ¨æ ¹ç›®å½•ä¸‹<code>dist</code>æ–‡ä»¶å¤¹ç”Ÿæˆ<code>bar.js</code>å’Œ<code>foo.js</code>ï¼Œå…¶ä¸­<code>jquery</code>å’Œ<code>utils</code>å‡è¢«æ‰“åŒ…è¿›äº†è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­ã€‚</p> <p><img src="/other/webpack/middle-noplugin-build.png" alt=""></p> <p>â€ƒâ€ƒæœ€åéœ€è¦åœ¨é¡µé¢æ·»åŠ <code>script</code>æ ‡ç­¾å¼•å…¥<code>foo.js</code>å’Œ<code>bar.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">...</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./bar.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./foo.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><h4 id="æå–å…¬å…±ä»£ç "><a href="#æå–å…¬å…±ä»£ç " class="header-anchor">#</a> æå–å…¬å…±ä»£ç </h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ï¼Œæ–°å¢<code>CommonsChunkPlugin</code>æ’ä»¶æå–å…¬å…±æ¨¡å—ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'./src/foo.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'./src/bar.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒå¦‚ä¸‹<code>foo.js</code>å’Œ<code>bar.js</code>ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>å’Œé¡¹ç›®å†…å…¬å…±æ¨¡å—<code>utils</code>ã€<code>webpack</code>è¿è¡Œæ–‡ä»¶éƒ½è¢«æ‰“åŒ…è¿›äº†<code>vendor.js</code>ï¼Œ<code>foo.js</code>å’Œ<code>bar.js</code>ä½“ç§¯æ˜æ˜¾å‡å°ã€‚</p> <p><img src="/other/webpack/middle-common-code.png" alt=""></p> <p>â€ƒâ€ƒé¡µé¢ä¸­<code>vendor.js</code>è¦åœ¨å…¶ä»–<code>js</code>ä¹‹å‰å¼•å…¥ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">...</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./vendor.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./bar.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./foo.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><h4 id="æå–è¿è¡Œæ—¶"><a href="#æå–è¿è¡Œæ—¶" class="header-anchor">#</a> æå–è¿è¡Œæ—¶</h4> <p>â€ƒâ€ƒå½“ä½¿ç”¨æ’ä»¶æå–å…¬å…±æ¨¡å—æ—¶ï¼Œæå–åçš„èµ„æºå†…éƒ¨ä¸ä»…ä»…åŒ…æ‹¬æ¨¡å—ä»£ç ï¼Œè¿˜åŒ…å«<code>webpack</code>è¿è¡Œæ—¶ã€‚<code>webpack</code>è¿è¡Œæ—¶æŒ‡çš„æ˜¯åˆå§‹åŒ–ç¯å¢ƒçš„ä»£ç ï¼Œå¦‚åˆ›å»ºæ¨¡å—ç¼“å­˜å¯¹è±¡ã€å£°æ˜æ¨¡å—åŠ è½½å‡½æ•°ç­‰ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹é¦–ä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹ä¼šæå–å‡º<code>foo.js</code>å’Œ<code>bar.js</code>ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>ã€æœ¬åœ°æ¨¡å—<code>utils</code>å’Œ<code>webpack</code>è¿è¡Œæ—¶æ–‡ä»¶åˆ°<code>vendor</code>ä¸­ã€‚</p> <p>â€ƒâ€ƒç„¶åæ¬¡ä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹å†åœ¨<code>vendor</code>ä¸­æå–å‡ºè¿è¡Œæ—¶æ–‡ä»¶åˆ°<code>runtime</code>ä¸­ï¼Œæœ€ç»ˆ<code>vendor</code>ä¸­åŒ…æ‹¬ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>å’Œæœ¬åœ°æ¨¡å—<code>utils</code>ï¼Œ<code>runtime</code>ä¸­åŒ…å«<code>webpack</code>è¿è¡Œæ—¶æ–‡ä»¶ã€‚</p> <p>â€ƒâ€ƒæ³¨æ„<code>runtime</code>çš„<code>CommonsChunkPlugin</code>å¿…é¡»å‡ºç°åœ¨<code>plugins</code>æœ€åï¼Œå¦åˆ™<code>webpack</code>å°†æ— æ³•æ­£å¸¸æå–æ¨¡å—ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'./src/foo.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'./src/bar.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'runtime'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vendor'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œæ‰“åŒ…å°†åœ¨<code>dist</code>ç›®å½•ä¸‹ç”Ÿæˆ<code>runtime.js</code>å’Œ<code>rendor.js</code>ç­‰æ–‡ä»¶ã€‚</p> <p><img src="/other/webpack/middle-runtime.png" alt=""></p> <p>â€ƒâ€ƒä¸Šè¿°<code>plugins</code>ç­‰ä»·äºå¦‚ä¸‹æ–¹å¼ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vendor'</span><span class="token punctuation">,</span> <span class="token string">'runtime'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>â€ƒâ€ƒä¹Ÿå¯ä»¥é€šè¿‡<code>minChunks</code>æ¥è¾¾åˆ°æå–å‡ºè¿è¡Œæ—¶æ–‡ä»¶çš„ç›®çš„ï¼Œå…¶ä¸­å½“è®¾ç½®<code>minChunks</code>ä¸º<code>n</code>æ—¶ï¼Œè¡¨ç¤ºæŸä¸ªæ¨¡å—åªæœ‰è¢«<code>n</code>ä¸ª<code>chunks</code>åŒæ—¶å¼•ç”¨æ‰ä¼šè¿›è¡Œæå–ï¼Œ<code>CommonsChunkPlugin</code>é»˜è®¤æ˜¯åªè¦ä¸€ä¸ªæ¨¡å—è¢«ä¸¤ä¸ªå…¥å£<code>chunk</code>å¼•ç”¨å°±ä¼šè¢«æå–å‡ºæ¥ï¼Œå³<code>minChunk</code>é»˜è®¤å€¼ä¸º<code>2</code>ã€‚</p> <p>â€ƒâ€ƒè®¾ç½®ä¸º<code>Infinity</code>è¡¨ç¤ºæå–çš„é˜ˆå€¼æ— é™é«˜ï¼Œå³æ‰€æœ‰æ¨¡å—éƒ½ä¸ä¼šè¢«æå–ã€‚</p> <p>â€ƒâ€ƒè®¾ç½®ä¸º<code>Infinity</code>ä¸€èˆ¬æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¯ä»¥è®©<code>webpack</code>åªæå–ç‰¹å®šçš„æ¨¡å—ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯ä¸ºäº†ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰ä»»ä½•æ¨¡å—è€Œæ˜¯ä»…ä»…åŒ…å«<code>webpack</code>è¿è¡Œæ—¶çš„æ–‡ä»¶<code>runtime</code>ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹è¡¨ç¤ºä»å…¥å£<code>chunk</code>ä¸­æå–å‡ºè¿è¡Œæ—¶æ–‡ä»¶ï¼Œç„¶åå†ä»<code>foo</code>å’Œ<code>bar</code>ä¸­æå–å‡ºç¬¬ä¸‰æ–¹æ¨¡å—å’Œæœ¬åœ°<code>utils</code>æ¨¡å—ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'runtime'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="æå–ç¬¬ä¸‰æ–¹æ¨¡å—å’Œæœ¬åœ°æ¨¡å—"><a href="#æå–ç¬¬ä¸‰æ–¹æ¨¡å—å’Œæœ¬åœ°æ¨¡å—" class="header-anchor">#</a> æå–ç¬¬ä¸‰æ–¹æ¨¡å—å’Œæœ¬åœ°æ¨¡å—</h4> <p>â€ƒâ€ƒé¦–ä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹çš„<code>minChunks</code>è®¾ç½®ä¸º<code>Infinity</code>ï¼Œå³è¡¨ç¤ºæ‰€æœ‰æ¨¡å—éƒ½ä¸ä¼šè¢«æå–ï¼Œæ­¤æ—¶<code>name</code>è®¾ç½®ä¸º<code>runtime</code>æ˜¯å¯ä»¥æå–å‡º<code>webpack</code>è¿è¡Œæ—¶æ–‡ä»¶çš„ã€‚ä½†æ˜¯ç”±äº<code>name</code>æŒ‡å®šä¸º<code>vendor</code>ï¼Œä¸”<code>vendor</code>åœ¨å…¥å£<code>entry</code>ä¸­å£°æ˜äº†ï¼Œå³è¡¨ç¤ºåªæå–å‡º<code>vendor</code>æ•°ç»„å¯¹åº”çš„æ¨¡å—ï¼ˆ<code>jquery</code>ï¼‰å’Œ<code>webpack</code>è¿è¡Œæ—¶æ–‡ä»¶ã€‚</p> <p>â€ƒâ€ƒæ¬¡ä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹å³ä»<code>vendor</code>ä¸­æå–å‡º<code>webpack</code>è¿è¡Œæ—¶æ–‡ä»¶ï¼Œæ­¤æ—¶<code>vendor</code>ä¸­ä»…ä»…åªåŒ…å«ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>ï¼Œ<code>runtime</code>ä¸­åŒ…å«è¿è¡Œæ—¶æ–‡ä»¶ã€‚</p> <p>â€ƒâ€ƒæœ«ä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹æœ€åä»<code>foo</code>å’Œ<code>bar</code>ä¸­æå–å‡ºæœ¬åœ°æ¨¡å—åˆ°<code>utils</code>ä¸­ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'./src/foo.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'./src/bar.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'runtime'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vendor'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'utils'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œæ‰“åŒ…å°†åœ¨<code>dist</code>ç›®å½•ä¸‹ç”Ÿæˆ<code>vendor.js</code>ã€<code>utils.js</code>å’Œ<code>runtime.js</code>ã€‚</p> <p><img src="/other/webpack/middle-thrid-local.png" alt=""></p> <p>â€ƒâ€ƒä¸Šè¿°<code>plugins</code>ç­‰ä»·äºå¦‚ä¸‹æ–¹å¼ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vendor'</span><span class="token punctuation">,</span> <span class="token string">'runtime'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'utils'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>â€ƒâ€ƒå¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨<code>minChunks</code>çš„å‡½æ•°æ–¹å¼ï¼Œå…¶ä¸­é¦–ä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹çš„<code>minChunks</code>å‡½æ•°ä¸­ï¼Œ<code>module.resource</code>ä¸ºåŒ…å«æ¨¡å—åçš„å®Œæ•´è·¯å¾„ï¼Œ<code>count</code>ä¸ºæ¨¡å—è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œé€šè¿‡å¯¹å…¥å£æ–‡ä»¶åŠå…¶ä¾èµ–çš„æ¨¡å—è¿›è¡Œéå†ï¼Œå¦‚æœæ¨¡å—åœ¨<code>node_modules</code>ä¸­ï¼Œå°±ä¼šè¢«æå–åˆ°<code>vendor</code>ä¸­ï¼Œå®è´¨æ­¤æ–¹å¼å¯ä»¥è®©<code>vendor</code>åªä¿ç•™ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'./src/foo.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'./src/bar.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">minChunks</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> module<span class="token punctuation">.</span>resource <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'runtime'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vendor'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'utils'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒé¡µé¢ä¸­å¼•ç”¨å„<code>js</code>æ–¹å¼å¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">...</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./runtime.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./utils.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./vendor.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./foo.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./bar.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><h4 id="å•é¡µåº”ç”¨æå–ç¬¬ä¸‰æ–¹æ¨¡å—"><a href="#å•é¡µåº”ç”¨æå–ç¬¬ä¸‰æ–¹æ¨¡å—" class="header-anchor">#</a> å•é¡µåº”ç”¨æå–ç¬¬ä¸‰æ–¹æ¨¡å—</h4> <p>â€ƒâ€ƒå•é¡µåº”ç”¨å•ç‹¬åˆ›å»ºä¸€ä¸ªå…¥å£å³å¯ï¼Œå¦‚ä¸‹<code>vendor</code>ä¸­åŒ…å«ç¬¬ä¸‰æ–¹æ¨¡å—<code>vue</code>å’Œ<code>webpack</code>è¿è¡Œæ—¶æ–‡ä»¶ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒæ‰“åŒ…åæœ€ç»ˆ<code>dist</code>ç›®å½•ä¸‹ç”Ÿæˆ<code>main.js</code>å’Œ<code>vendor.js</code>ã€‚</p> <p><img src="/other/webpack/middle-spa-thrid.png" alt=""></p> <p>â€ƒâ€ƒé¡µé¢ä¸­å¼•ç”¨<code>js</code>æ–¹å¼å¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">...</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./vendor.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./main.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><h4 id="èµ„æºå¼‚æ­¥åŠ è½½"><a href="#èµ„æºå¼‚æ­¥åŠ è½½" class="header-anchor">#</a> èµ„æºå¼‚æ­¥åŠ è½½</h4> <p>â€ƒâ€ƒå½“æ¨¡å—æ•°é‡è¿‡å¤šã€èµ„æºä½“ç§¯è¿‡å¤§æ—¶ï¼Œä¸€éƒ¨åˆ†æš‚æ—¶ä¸ç”¨çš„æ¨¡å—å»¶è¿ŸåŠ è½½ã€‚ä½¿é¡µé¢åˆæ¬¡æ¸²æŸ“çš„æ—¶å€™ä¸‹è½½çš„èµ„æºå°½å¯èƒ½å°ï¼Œåç»­æ¨¡å—ç­‰åˆ°æ°å½“çš„æ—¶æœºå†å»è§¦å‘åŠ è½½ï¼Œæ­¤æ–¹å¼å³æŒ‰éœ€åŠ è½½ã€‚</p> <p>â€ƒâ€ƒ;<code>webpack</code>å®˜æ–¹æ¨èä½¿ç”¨<code>import</code>å‡½æ•°æ¥å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œå¹¶è¿”å›<code>Promise</code>å¯¹è±¡ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹æ ¹ç›®å½•åŒ…æ‹¬<code>webpack.config.js</code>å’Œ<code>src</code>æ–‡ä»¶å¤¹ç­‰ï¼Œå…¶ä¸­<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€<code>utils.js</code>ï¼Œ<code>main.js</code>ä¸­é€šè¿‡<code>import</code>å¼‚æ­¥åŠ è½½<code>utils.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;utils-chunk&quot; */</span> <span class="token string">'./utils.js'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">)</span>

<span class="token comment">// src/utils.js</span>
<span class="token keyword">import</span> jquery <span class="token keyword">from</span> <span class="token string">'jquery'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jquery<span class="token punctuation">,</span> <span class="token string">'utils'</span><span class="token punctuation">)</span>

<span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'../'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒ;<code>output.chunkFilename</code>ç”¨æ¥æŒ‡å®šå¼‚æ­¥<code>chunk</code>çš„æ–‡ä»¶åï¼Œæ”¯æŒæ¨¡æ¿è¯­è¨€çš„æ–¹å¼ï¼Œå¼‚æ­¥<code>chunk</code>é»˜è®¤æ²¡æœ‰åç§°ï¼Œå…¶é»˜è®¤å€¼ä¸º<code>[id].js</code>ï¼Œå¦‚<code>0.js</code>ã€<code>1.js</code>ç­‰ã€‚</p> <p>â€ƒâ€ƒé€šè¿‡<code>webpack</code>æ‰€ç‰¹æœ‰çš„æ³¨é‡Šå¯ä»¥è®©<code>webpack</code>è·å–åˆ°å¼‚æ­¥<code>chunk</code>çš„åå­—ï¼Œå¦‚ä¸Šè¿°ä¸­<code>/* webpackChunkName: &quot;utils-chunk&quot; */</code>ï¼Œæ‰“åŒ…å<code>chunk</code>åç§°ä¸º<code>utils-chunk</code>ã€‚</p> <p>â€ƒâ€ƒæ‰“åŒ…å<code>main.js</code>ä½œä¸ºé¦–å±åŠ è½½çš„èµ„æºï¼Œé¡µé¢ä¸­é€šè¿‡<code>script</code>æ ‡ç­¾æ¥å¼•ç”¨ï¼Œè€Œé—´æ¥èµ„æºï¼ˆ<code>utils-chunk.js</code>ï¼‰çš„è¯·æ±‚è·¯å¾„è¦é€šè¿‡<code>output.publicPath</code>æ¥æŒ‡å®šã€‚</p> <p><img src="/other/webpack/middle-async-chunks.png" alt=""></p> <p>â€ƒâ€ƒé¡µé¢å¼•ç”¨æ–¹å¼å¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">...</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./main.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>â€ƒâ€ƒ;<code>2s</code>åä¼šåœ¨é¡µé¢<code>head</code>æ ‡ç­¾å†…éƒ¨åŠ¨æ€æ’å…¥<code>script</code>æ ‡ç­¾ï¼Œæ ‡ç­¾å¼•ç”¨<code>utils-chunk.js</code>ã€‚</p> <p><img src="/other/webpack/middle-async-page.png" alt=""></p> <h3 id="optimization-splitchunks"><a href="#optimization-splitchunks" class="header-anchor">#</a> optimization.splitChunks</h3> <p>â€ƒâ€ƒ;<code>CommonsChunkPlugin</code>å¯ä»¥åœ¨å¾ˆå¤šåœºæ™¯ä¸‹æå–å…¬å…±æ¨¡å—ï¼Œä½†æ˜¯å…¶ç¼ºé™·ä¹Ÿéå¸¸æ˜æ˜¾ã€‚</p> <ul><li>å•ä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹åªèƒ½æå–å•ä¸ª<code>vendor</code>ï¼Œè‹¥è¦æå–å¤šä¸ª<code>vendor</code>éœ€è¦æ–°å¢å¤šä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹ï¼Œå®¹æ˜“é€ æˆé…ç½®ä»£ç é‡å¤</li> <li>å¤šä¸ª<code>CommonsChunkPlugin</code>å®ä¾‹ä¹‹é—´å¯èƒ½å­˜åœ¨é€»è¾‘å…³ç³»ï¼Œåªæœ‰æ­£ç¡®çš„é€»è¾‘å…³ç³»æ‰èƒ½ä¿è¯æå–çš„ä»£ç æŒ‰ç…§é¢„æœŸï¼Œè€Œä¸”éƒ¨åˆ†é…ç½®ä¸å®¹æ˜“ç†è§£ï¼Œæ— æ³•åšåˆ°å¼€ç®±å³ç”¨</li></ul> <p>â€ƒâ€ƒ;<code>webpack4</code>åˆ é™¤äº†<code>CommonsChunkPlugin</code>ï¼Œæ”¹è¿›äº†<code>CommonsChunkPlugin</code>å¹¶é‡æ–°è®¾è®¡å’Œå®ç°äº†ä»£ç åˆ†ç‰‡ç‰¹æ€§ï¼Œå‡†å¤‡é€šè¿‡<code>optimization.splitChunks</code>å±æ€§æ¥ç®€åŒ–ä»£ç åˆ†å‰²çš„é…ç½®ã€‚</p> <h4 id="æå–å…¬å…±ä»£ç -2"><a href="#æå–å…¬å…±ä»£ç -2" class="header-anchor">#</a> æå–å…¬å…±ä»£ç </h4> <p>â€ƒâ€ƒå°†<code>webpack</code>ç‰ˆæœ¬å‡çº§ï¼Œå¯¹<code>CommonsChunkPlugin</code>æ‰“åŒ…å¼‚æ­¥èµ„æºçš„åœºæ™¯æ¢æˆ<code>splitChunks</code>ï¼Œè°ƒæ•´<code>webpack.config.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œæ‰“åŒ…ç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­<code>main.js</code>å’Œ<code>utils.js</code>è¢«å•ç‹¬æ‰“åŒ…å‡ºæ¥ï¼Œ<code>utils.js</code>ä¸­å¼•ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>è¢«æ‰“åŒ…è¿›äº†<code>vendors~utils-chunk.js</code>ã€‚</p> <p><img src="/other/webpack/middle-common-chunks.png" alt=""></p> <p>â€ƒâ€ƒé¡µé¢å¼•ç”¨<code>main.js</code>åï¼Œ<code>2s</code>åä¼šåœ¨é¡µé¢<code>head</code>æ ‡ç­¾å†…éƒ¨ä¾æ¬¡æ’å…¥<code>vendors~utils-chunk.js</code>å’Œ<code>utils-chunk.js</code>ï¼Œæ­¤æ—¶å¹¶è¡Œè¯·æ±‚çš„æ•°é‡ä¸º<code>2</code>ã€‚</p> <p>â€ƒâ€ƒ;<code>CommonsChunkPlugin</code>åœºæ™¯æœªæå–å‡º<code>utils</code>ä¸­çš„<code>jquery</code>æ¨¡å—ï¼Œå€˜è‹¥ä»…ä¿®æ”¹<code>utils</code>ä¸­ä¸€è¡Œä»£ç ï¼Œå®¢æˆ·ç«¯å°±åªæœ‰é‡æ–°ä¸‹è½½æ•´ä¸ª<code>utils-chunk.js</code>ã€‚è€Œ<code>splitChunks</code>æå–å‡º<code>jquery</code>æ¨¡å—ï¼Œ<code>jquery</code>ä¸ä¼šç»å¸¸å˜åŠ¨ï¼Œä¿®æ”¹<code>utils</code>ä¸­ä¸€è¡Œä»£ç ï¼Œå®¢æˆ·ç«¯åªéœ€è¦é‡æ–°ä¸‹è½½<code>utils-chunk.js</code>ï¼Œè€Œæ­¤æ–‡ä»¶çš„ä½“ç§¯ä»…ä»…<code>1 KiB</code>ä¸åˆ°ï¼Œå¹¶ä¸”<code>vendor~utils-chunk.js</code>ä¹Ÿèƒ½å¾ˆå¥½çš„åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚</p> <p><img src="/other/webpack/middle-common-chunks-page.png" alt=""></p> <h4 id="æå–æ¡ä»¶"><a href="#æå–æ¡ä»¶" class="header-anchor">#</a> æå–æ¡ä»¶</h4> <p>â€ƒâ€ƒ;<code>CommonsChunkPlugin</code>é€šè¿‡é…ç½®é¡¹å°†ç‰¹å®šæ¨¡å—æå–å‡ºæ¥ï¼Œå…¶æ–¹å¼æ›´è´´è¿‘äºå‘½ä»¤å¼ã€‚è€Œ<code>splitChunks</code>çš„ä¸åŒä¹‹å¤„åœ¨äºä»…ä»…åªè®¾ç½®éƒ¨åˆ†æå–æ¡ä»¶ï¼Œå¦‚æ¨¡å—ä½“ç§¯ã€æ¨¡å—ä½ç½®ç­‰ï¼Œå½“æŸäº›æ¨¡å—è¾¾åˆ°è¿™äº›æ¡ä»¶å°±ä¼šè¢«è‡ªåŠ¨æå–å‡ºæ¥ï¼Œå…¶æ–¹å¼æ›´è´´è¿‘äºå£°æ˜å¼ã€‚<code>splitChunks</code>é»˜è®¤æå–æ¡ä»¶å¦‚ä¸‹ã€‚</p> <ul><li>æå–åçš„<code>chunk</code>æ¥è‡ª<code>node_modules</code>ç›®å½•ï¼Œå¤„äº<code>node_modules</code>çš„æ¨¡å—ä¸€èˆ¬ä¸ºé€šç”¨æ¨¡å—ï¼Œæ¯”è¾ƒé€‚åˆè¢«æå–å‡ºæ¥</li> <li>æå–åçš„<code>javascript chunk</code>ä½“ç§¯å¤§äº<code>30KB</code>ï¼Œ<code>CSS chunk</code>ä½“ç§¯å¤§äº<code>50KB</code>ï¼Œä¸€èˆ¬æå–åçš„èµ„æºä½“ç§¯å¤ªå°ï¼Œå¸¦æ¥çš„ä¼˜åŒ–æ•ˆæœä¹Ÿæ¯”è¾ƒä¸€èˆ¬</li> <li>æŒ‰éœ€åŠ è½½è¿‡ç¨‹ä¸­ï¼Œå¹¶è¡Œè¯·æ±‚çš„èµ„æºæœ€å¤§å€¼å°äºç­‰äº<code>5</code></li> <li>é¦–æ¬¡åŠ è½½æ—¶ï¼Œå¹¶è¡Œè¯·æ±‚çš„èµ„æºæ•°æœ€å¤§å€¼å°äºç­‰äº<code>3</code></li></ul> <h4 id="æå–å¤šå¼‚æ­¥èµ„æº"><a href="#æå–å¤šå¼‚æ­¥èµ„æº" class="header-anchor">#</a> æå–å¤šå¼‚æ­¥èµ„æº</h4> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>webpack.config.js</code>å’Œ<code>src</code>æ–‡ä»¶å¤¹ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>å’Œ<code>foo.js</code>ã€<code>bar.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;bar-chunk&quot; */</span> <span class="token string">'./bar.js'</span><span class="token punctuation">)</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;foo-chunk&quot; */</span> <span class="token string">'./foo.js'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">)</span>

<span class="token comment">// src/bar.js</span>
<span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">'react'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>react<span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>

<span class="token comment">// src/foo.js</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">'react'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vue<span class="token punctuation">,</span> react<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œæ‰“åŒ…åï¼Œ<code>webpack</code>ä¼šåˆ›å»ºåŒ…å«<code>vue</code>çš„ä»£ç å—ï¼ˆ<code>vendor~foo-chunk</code>ï¼‰ï¼Œ<code>foo-chunk</code>ä¾èµ–æ­¤ä»£ç å—ï¼ŒåŒæ—¶ä¹Ÿä¼šåˆ›å»ºåŒ…å«<code>react</code>çš„ä»£ç å—ï¼ˆ<code>vendors~bar-chunk~foo-chunk</code>ï¼‰ï¼Œ<code>foo-chunk</code>å’Œ<code>bar-chunk</code>ä¾èµ–æ­¤ä»£ç å—ã€‚</p> <p><img src="/other/webpack/middle-async-chunks-multiple.png" alt=""></p> <p>â€ƒâ€ƒåœ¨<code>import('./bar.js)</code>è°ƒç”¨çš„æ—¶å€™ï¼Œ<code>vendors~bar-chunk~foo-chunk.js</code>å’Œ<code>bar-chunk.js</code>å¹¶è¡ŒåŠ è½½ã€‚åœ¨<code>import('./foo.js)</code>è°ƒç”¨çš„æ—¶å€™ï¼Œ<code>vendor~foo-chunk.js</code>å’Œ<code>foo-chunk.js</code>å¹¶è¡ŒåŠ è½½ï¼Œæ­¤æ—¶ä¸ç”¨å†åŠ è½½<code>vendors~bar-chunk~foo-chunk.js</code>ï¼Œç›´æ¥è¯»å–ç¼“å­˜å³å¯ã€‚</p> <p><img src="/other/webpack/middle-async-chunks-multiple-req.png" alt=""></p> <h3 id="splitchunks-é…ç½®å‚æ•°"><a href="#splitchunks-é…ç½®å‚æ•°" class="header-anchor">#</a> splitChunks é…ç½®å‚æ•°</h3> <p>â€ƒâ€ƒ;<code>webpack</code>å®˜æ–¹ç»™å‡ºçš„<code>splitChunks</code>é»˜è®¤å€¼å¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'async'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxAsyncRequests</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxInitialRequests</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token literal-property property">automaticNameDelimiter</span><span class="token operator">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="chunks"><a href="#chunks" class="header-anchor">#</a> chunks</h4> <p>â€ƒâ€ƒ;<code>chunks</code>å¯é…ç½®<code>splitChunks</code>å·¥ä½œæ¨¡å¼ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå¯é€‰å€¼<code>async</code>ï¼ˆé»˜è®¤ï¼‰ã€<code>initial</code>ã€<code>all</code>ï¼Œå…¶ä¸­<code>async</code>å³åªæå–å¼‚æ­¥<code>chunk</code>ï¼Œ<code>initial</code>åªæå–å…¥å£åŒæ­¥<code>chunk</code>ï¼Œ<code>all</code>åˆ™æ˜¯ä¸¤ç§æ¨¡å¼åŒæ—¶å¼€å¯ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>webpack.config.js</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€<code>bar.js</code>å’Œ<code>foo.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> jquery <span class="token keyword">from</span> <span class="token string">'jquery'</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;bar-chunk&quot; */</span> <span class="token string">'./bar.js'</span><span class="token punctuation">)</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;foo-chunk&quot; */</span> <span class="token string">'./foo.js'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jquery<span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">)</span>

<span class="token comment">// src/bar.js</span>
<span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">'react'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>react<span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>

<span class="token comment">// src/foo.js</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">'react'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vue<span class="token punctuation">,</span> react<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>

<span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œæ‰“åŒ…åï¼Œ<code>main.js</code>ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>è¢«æå–åˆ°<code>vendor~main.js</code>ä¸­ï¼Œå‰©ä½™ä»£ç ä¿ç•™è‡³<code>main.js</code>ä¸­ï¼Œ<code>foo.js</code>ä¸­ç¬¬ä¸‰æ–¹æ¨¡å—<code>vue</code>è¢«æå–è‡³<code>vendor~foo-chunk.js</code>ï¼Œå‰©ä½™ä»£ç ä¿ç•™è‡³<code>foo-chunk.js</code>ä¸­ï¼Œ<code>foo.js</code>å’Œ<code>bar.js</code>ä¸­ç¬¬ä¸‰æ–¹æ¨¡å—<code>react</code>è¢«æå–è‡³<code>vendor~foo-chunk~bar-chunk.js</code>ï¼Œ<code>bar.js</code>å‰©ä½™ä»£ç ä¿ç•™è‡³<code>bar-chunk.js</code>ã€‚</p> <p><img src="/other/webpack/middle-chunks-list.png" alt=""></p> <p>â€ƒâ€ƒä¿®æ”¹<code>chunks</code>å±æ€§ä¸º<code>initial</code>åå†æ¬¡æ‰“åŒ…ï¼Œå…¶ä¸­ä»…<code>main.js</code>ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>è¢«æå–è‡³<code>vendor~main.js</code>ï¼Œå‰©ä½™ä»£ç ä¿ç•™è‡³<code>main.js</code>ï¼Œ<code>foo.js</code>å’Œ<code>bar.js</code>ä¸­ç¬¬ä¸‰æ–¹æ¨¡å—æœªè¢«æå–ï¼Œåªæ˜¯å°†å…¶ä¿ç•™è‡³<code>foo-chunk.js</code>å’Œ<code>bar-chunk.js</code>ã€‚</p> <p><img src="/other/webpack/middle-chunks-list-nothrid.png" alt=""></p> <p>â€ƒâ€ƒä¿®æ”¹<code>chunks</code>å±æ€§ä¸º<code>async</code>åå†æ¬¡æ‰“åŒ…ï¼Œ<code>main.js</code>ä¸­ä»£ç ä¿ç•™è‡³<code>main.js</code>ï¼Œå…¶ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—æœªåšæå–ï¼Œ<code>foo.js</code>ä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—<code>vue</code>è¢«æå–è‡³<code>vendor~foo-chunk.js</code>ï¼Œå‰©ä½™ä»£ç ä¿ç•™è‡³<code>foo-chunk.js</code>ï¼Œ<code>foo.js</code>å’Œ<code>bar.js</code>ä¸­ç¬¬ä¸‰æ–¹æ¨¡å—<code>react</code>è¢«æå–è‡³<code>vendor~bar-chunk~foo-chunk.js</code>ï¼Œ<code>bar.js</code>ä¸­å‰©ä½™ä»£ç ä¿ç•™è‡³<code>bar-chunk.js</code>ã€‚</p> <p><img src="/other/webpack/middle-chunks-list-thrid.png" alt=""></p> <h4 id="åŒ¹é…æ¡ä»¶"><a href="#åŒ¹é…æ¡ä»¶" class="header-anchor">#</a> åŒ¹é…æ¡ä»¶</h4> <ul><li><code>minSize</code>ï¼šæå–å‡ºæ¥çš„ä»£ç å—åœ¨å‹ç¼©å‰çš„æœ€å°å¤§å°ï¼Œé»˜è®¤ä¸º<code>30000</code>ï¼ˆ<code>30KB</code>ï¼‰</li> <li><code>maxSize</code>ï¼šæå–å‡ºæ¥çš„ä»£ç å—åœ¨å‹ç¼©å‰çš„æœ€å¤§å¤§å°ï¼Œé»˜è®¤ä¸º<code>0</code>ï¼Œå³ä¸é™åˆ¶å¤§å°</li> <li><code>minChunks</code>ï¼šæ¨¡å—è¢«å¼•ç”¨æ¬¡æ•°ï¼Œé»˜è®¤ä¸º<code>1</code></li> <li><code>maxAsyncRequests</code>ï¼šæœ€å¤§çš„æŒ‰éœ€åŠ è½½æ¬¡æ•°ï¼Œé»˜è®¤ä¸º<code>5</code></li> <li><code>maxInitialRequests</code>ï¼šæœ€å¤§çš„é¦–æ¬¡åˆå§‹åŒ–åŠ è½½æ¬¡æ•°ï¼Œé»˜è®¤ä¸º<code>3</code></li> <li><code>automaticNameDelimiter</code>ï¼šæå–å‡ºæ¥çš„ä»£ç å—è‡ªåŠ¨ç”Ÿæˆåå­—çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸º ~</li> <li><code>name</code>ï¼šæå–å‡ºçš„ä»£ç å—æ–‡ä»¶çš„åå­—ï¼Œé»˜è®¤ä¸º<code>true</code>ï¼Œå³è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶å</li></ul> <h4 id="ç¼“å­˜ç»„"><a href="#ç¼“å­˜ç»„" class="header-anchor">#</a> ç¼“å­˜ç»„</h4> <p>â€ƒâ€ƒç¼“å­˜ç»„<code>cacheGroups</code>é»˜è®¤åŒ…æ‹¬<code>vendors</code>å’Œ<code>default</code>ä¸¤ç§è§„åˆ™ï¼Œ<code>vendors</code>ç”¨äºæå–<code>node_modules</code>ä¸­ç¬¦åˆæ¡ä»¶çš„æ¨¡å—ï¼Œ<code>default</code>åˆ™ä½œç”¨äºè¢«å¤šæ¬¡å¼•ç”¨çš„æ¨¡å—ï¼Œè‹¥è¦ç¦ç”¨æŸç§è§„åˆ™ï¼Œå¯ç›´æ¥å°†å…¶ç½®ä¸º<code>false</code>ã€‚</p> <p>â€ƒâ€ƒ;<code>cacheGroups</code>ä¸­çš„æ¯ä¸€é¡¹éƒ½ä¼šç»§æ‰¿æˆ–è€…è¦†ç›–å¤–å±‚<code>splitChunks</code>ä¸­çš„å‚æ•°å€¼ï¼Œä¾‹å¦‚<code>cacheGroups.vendors</code>é¡¹ä¸­æ— <code>minChunks</code>å±æ€§ï¼Œåˆ™å®ƒå°†ç»§æ‰¿å¤–å±‚<code>splitChunks.minChunks</code>çš„å±æ€§å€¼ï¼Œå³<code>cacheGroups.vendors.minChunks</code>ä¸º<code>1</code>ã€‚<code>cacheGroups.default</code>é¡¹ä¸­æœ‰<code>minChunks</code>å±æ€§ï¼Œåˆ™å®ƒå°†è¦†ç›–å¤–å±‚<code>splitChunks.minChunks</code>çš„å±æ€§ã€‚</p> <p>â€ƒâ€ƒé™¤äº†ä¸Šè¿°å‚æ•°å€¼å¤–ï¼Œ<code>cacheGroups</code>é¢å¤–æä¾›äº†ä¸‰ä¸ªé…ç½®å±æ€§ã€‚</p> <ul><li><code>test</code>ï¼šå¯åŒ¹é…æ¨¡å—è·¯å¾„æˆ–è€…<code>chunk</code>åç§°ï¼Œé»˜è®¤ä¸ºæ‰€æœ‰çš„æ¨¡å—</li> <li><code>priority</code>ï¼šè¡¨ç¤ºæå–æƒé‡ï¼Œæ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ã€‚ä¸€ä¸ªæ¨¡å—å¯èƒ½æ»¡è¶³å¤šä¸ª<code>cacheGroups</code>ï¼Œåˆ™æå–åˆ°å“ªä¸ªå°±ç”±æƒé‡æœ€é«˜çš„æ§åˆ¶</li> <li><code>reuseExistingChunk</code>ï¼šæ˜¯å¦ä½¿ç”¨å·²æœ‰çš„<code>chunk</code>ï¼Œ<code>true</code>è¡¨ç¤ºå¦‚æœå½“å‰çš„<code>chunk</code>åŒ…å«çš„æ¨¡å—å·²ç»è¢«æå–å‡ºå»äº†ï¼Œåˆ™ä¸ä¼šå†é‡æ–°ç”Ÿæˆæ–°çš„</li></ul> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>webpack.config.js</code>å’Œ<code>src</code>æ–‡ä»¶å¤¹ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>å’Œ<code>utils.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./utils.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Vue<span class="token punctuation">,</span> Vuex<span class="token punctuation">,</span> VueRouter<span class="token punctuation">,</span> log<span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">)</span>

<span class="token comment">// src/utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'log'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œæ‰“åŒ…åç¬¬ä¸‰æ–¹æ¨¡å—<code>vue</code>ã€<code>vuex</code>å’Œ<code>vue-router</code>è¢«æå–è‡³<code>vendors~main.js</code>ï¼Œ<code>main.js</code>å‰©ä½™çš„ä»£ç å’Œ<code>utils.js</code>ä»£ç è¢«ä¿ç•™è‡³<code>main.js</code>ä¸­ã€‚</p> <p><img src="/other/webpack/middle-chunks-cache.png" alt=""></p> <p>â€ƒâ€ƒå¦‚æœæƒ³è¦å•ç‹¬æå–å‡º<code>utils.js</code>ï¼Œåˆ™å¯ä»¥è‡ªå®šä¹‰å¦‚ä¸‹<code>cacheGroups</code>ï¼Œå…¶ä¸­<code>module.resource</code>ä¸ºåŒ…å«æ¨¡å—åçš„å®Œæ•´è·¯å¾„ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">utils</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">test</span><span class="token operator">:</span> <span class="token parameter">module</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src\\utils</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>resource<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œæ‰“åŒ…åç¬¬ä¸‰æ–¹æ¨¡å—<code>vue</code>ã€<code>vuex</code>ã€<code>vue-router</code>è¢«æå–è‡³<code>vendors~main.js</code>ä¸­ï¼Œ<code>utils.js</code>ä¸­ä»£ç è¢«æå–è‡³<code>utils~main.js</code>ä¸­ï¼Œ<code>main.js</code>ä¸­å‰©ä½™ä»£ç ä¿ç•™ã€‚</p> <p><img src="/other/webpack/middle-chunks-cache-utils.png" alt=""></p> <h2 id="ç”Ÿäº§ç¯å¢ƒ"><a href="#ç”Ÿäº§ç¯å¢ƒ" class="header-anchor">#</a> ç”Ÿäº§ç¯å¢ƒ</h2> <p>â€ƒâ€ƒç”Ÿäº§ç¯å¢ƒä¸åŒäºå¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒå…³æ³¨çš„æ˜¯ç”¨æˆ·ä½“éªŒï¼Œå¦‚ä½•è®©ç”¨æˆ·æ›´å¿«åœ°åŠ è½½èµ„æºï¼ŒåŒ…æ‹¬å¦‚ä½•èµ„æºå‹ç¼©ã€æ·»åŠ ç¯å¢ƒå˜é‡ä¼˜åŒ–æ‰“åŒ…ã€å¦‚ä½•æœ€å¤§é™åº¦åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ç­‰ã€‚</p> <h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="header-anchor">#</a> ç¯å¢ƒé…ç½®</h3> <h4 id="å•ä¸€é…ç½®"><a href="#å•ä¸€é…ç½®" class="header-anchor">#</a> å•ä¸€é…ç½®</h4> <p>â€ƒâ€ƒå•ä¸€é…ç½®å³ä¸ç®¡åœ¨ä»€ä¹ˆç¯å¢ƒå‡ä½¿ç”¨<code>webpack.config.js</code>ï¼Œä»…ä»…æ˜¯åœ¨æ„å»ºåˆä¼ é€’ç¯å¢ƒå˜é‡å‚æ•°ï¼Œç„¶ååœ¨<code>webpack.config.js</code>ä¸­é€šè¿‡æ¡ä»¶æ¥å†³å®šä½¿ç”¨å“ªä¸ªé…ç½®ã€‚</p> <p>â€ƒâ€ƒæ³¨æ„<code>windows</code>ä¸æ”¯æŒä½¿ç”¨<code>ENV=development</code>çš„æ–¹å¼ï¼Œå‘½ä»¤ä¼šè¢«é˜»å¡å¯¼è‡´æŠ¥é”™ï¼Œç¬¬ä¸‰æ–¹æ’ä»¶<code>cross-env</code>å¯è§£å†³æ­¤é—®é¢˜ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npm i cross<span class="token operator">-</span>env <span class="token operator">--</span>save<span class="token operator">-</span>dev
</code></pre></div><p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>webpack.config.js</code>å’Œ<code>src</code>æ–‡ä»¶å¤¹ç­‰ï¼Œå…¶ä¸­<code>src</code>ä¸‹åŒ…æ‹¬<code>index.html</code>å’Œ<code>main.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env ENV=development webpack-dev-server&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env ENV=production webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.1.14&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;html-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token constant">ENV</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ENV</span>
<span class="token keyword">const</span> isProd <span class="token operator">=</span> <span class="token constant">ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> isProd <span class="token operator">?</span> <span class="token string">'./[name].[chunkhash:8].js'</span> <span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>dev</code>è„šæœ¬å‘½ä»¤ï¼Œæ§åˆ¶å°å¯æŸ¥çœ‹å¼€å‘ç¯å¢ƒæ‰“åŒ…åçš„è¾“å‡ºæ–‡ä»¶ã€‚</p> <p><img src="/other/webpack/middle-single-config-dev.png" alt=""></p> <p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶ã€‚</p> <p><img src="/other/webpack/middle-single-config-output.png" alt=""></p> <h4 id="å¤šç¯å¢ƒé…ç½®"><a href="#å¤šç¯å¢ƒé…ç½®" class="header-anchor">#</a> å¤šç¯å¢ƒé…ç½®</h4> <p>â€ƒâ€ƒå¯ä»¥ä¸ºæ¯ä¸ªç¯å¢ƒå•ç‹¬åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚å¼€å‘ç¯å¢ƒä¸º<code>webpack.dev.config.js</code>ï¼Œç”Ÿäº§ç¯å¢ƒä¸º<code>webpack.prod.config.js</code>ï¼Œä½†æ˜¯ä¸¤ä¸ªé…ç½®æ–‡ä»¶ä¸€èˆ¬ä¼šæœ‰é‡å¤çš„éƒ¨åˆ†ï¼Œä¸€æ”¹éƒ½è¦æ”¹ï¼Œä¸åˆ©äºç»´æŠ¤ã€‚</p> <p>â€ƒâ€ƒä¹Ÿå¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä¸ª<code>webpack.config.js</code>ï¼Œç„¶åå¦å¤–ä¸¤ä¸ª<code>js</code>åˆ†åˆ«å¼•ç”¨è¯¥æ–‡ä»¶å¹¶æ·»åŠ ä¸Šè‡ªèº«ç¯å¢ƒçš„é…ç½®ã€‚ä½†æ˜¯ä¸€èˆ¬éƒ½ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶<code>webpack-merge</code>ï¼Œç”¨æ¥åš<code>webpack</code>çš„é…ç½®åˆå¹¶ï¼Œä¾¿äºå¯¹ä¸åŒç¯å¢ƒçš„é…ç½®è¿›è¡Œç®¡ç†ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>build</code>ã€<code>package.json</code>ã€<code>src</code>æ–‡ä»¶å¤¹ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>index.html</code>å’Œ<code>main.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --config=./build/webpack.dev.config.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config=./build/webpack.prod.config.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒ;<code>build</code>ä¸­åŒ…æ‹¬<code>webpack.config.js</code>ã€<code>webpack.dev.config.js</code>å’Œ<code>webpack.prod.config.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// build/webpack.config.js</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// build/webpack.dev.config.js</span>
<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>webpackConfig<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// build/webpack.prod.config.js</span>
<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>webpackConfig<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒåˆ†åˆ«è¿è¡Œ<code>dev</code>å’Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼Œè¾“å‡ºç»“æœä¸å•ä¸€é…ç½®ä¸€è‡´ã€‚</p> <h3 id="production-æ¨¡å¼"><a href="#production-æ¨¡å¼" class="header-anchor">#</a> production æ¨¡å¼</h3> <p>â€ƒâ€ƒæ—©æœŸçš„<code>webpack</code>ç‰ˆæœ¬ä¸­ï¼Œä¸åŒçš„ç¯å¢ƒä½¿ç”¨çš„é…ç½®é¡¹å¤ªå¤šï¼Œæ— æ³•åšåˆ°å¼€ç®±å³ç”¨ã€‚<code>webpack4</code>ä¸­æ–°å¢äº†<code>mode</code>é…ç½®é¡¹ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥åˆ‡æ¢æ‰“åŒ…æ¨¡å¼ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹å½“å‰å¤„äºç”Ÿäº§ç¯å¢ƒï¼Œ<code>webpack</code>ä¼šè‡ªåŠ¨æ·»åŠ é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒçš„é…ç½®é¡¹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="header-anchor">#</a> ç¯å¢ƒå˜é‡</h3> <p>â€ƒâ€ƒåœ¨<code>webpack</code>ä¸­å¯ä»¥ä½¿ç”¨<code>DefinePlugin</code>ä¸ºç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒæ·»åŠ ä¸åŒçš„ç¯å¢ƒå˜é‡ï¼Œå³<code>webpack.DefinePlugin</code>æ˜¯ç”¨æ¥è®¾ç½®æµè§ˆå™¨ç¯å¢ƒä¸‹çš„å…¨å±€å˜é‡ï¼ˆä¸ä¼šè¢«æŒ‚è½½åˆ°<code>window</code>ä¸Šï¼‰ã€‚</p> <p>â€ƒâ€ƒ;<code>webpack.DefinePlugin</code>ä½œç”¨äºæ‰€æœ‰æ¨¡å—ï¼Œä¼šå°†æ¨¡å—ä¸­çš„ç¯å¢ƒå˜é‡å®Œå…¨æ›¿æ¢ä¸ºè®¾ç½®çš„å€¼ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>webpack.config.js</code>ã€<code>package.json</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token constant">ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">ENV</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒæ‰“åŒ…åæŸ¥çœ‹è¾“å‡ºç›®å½•<code>dist</code>ä¸­çš„<code>main.js</code>æ–‡ä»¶ï¼Œå…¶ä¸­<code>ENV</code>è¢«å®Œå…¨æ›¿æ¢ä¸º<code>&quot;production&quot;</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// dist/main.js</span>
<span class="token string-property property">'./src/main.js'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>â€ƒâ€ƒæ³¨æ„å¯¹äºå­—ç¬¦ä¸²æˆ–è€…åŒ…å«å­—ç¬¦ä¸²çš„å¯¹è±¡éƒ½è¦åŠ ä¸Š<code>JSON.stringify</code>ï¼Œè‹¥ä¸æ·»åŠ <code>JSON.stringify</code>ï¼Œåœ¨æ›¿æ¢ä¹‹åå°±ä¼šæˆä¸ºå˜é‡åï¼Œè€Œéå­—ç¬¦ä¸²å€¼ï¼Œå³ä¸Šè¿°<code>ENV</code>ä¼šè¢«æ›¿æ¢ä¸º<code>production</code>ï¼ˆæ— å­—ç¬¦ä¸²å¼•å·ï¼‰ã€‚</p> <p>â€ƒâ€ƒé™¤äº†å­—ç¬¦ä¸²ç±»å‹çš„å€¼å¤–ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å…¶ä»–ç±»å‹çš„ç¯å¢ƒå˜é‡ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token constant">ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token constant">ENVIR</span><span class="token operator">:</span> <span class="token string">'&quot;development&quot;'</span><span class="token punctuation">,</span>
  <span class="token constant">IS_PRODUCTION</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token constant">ENV_ID</span><span class="token operator">:</span> <span class="token number">1038</span><span class="token punctuation">,</span>
  <span class="token constant">CONSTANTS</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">TYPES</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒå¾ˆå¤šæ¡†æ¶å’Œåº“éƒ½ä½¿ç”¨<code>process.env.NODE_ENV</code>ä½œä¸ºåŒºåˆ«å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„å˜é‡ï¼Œå…¶å€¼ä¸º<code>production</code>å³è¡¨ç¤ºå½“å‰ç¯å¢ƒä¸ºç”Ÿäº§ç¯å¢ƒï¼Œåº“å’Œæ¡†æ¶åœ¨æ‰“åŒ…æ—¶ä¼šå»æ‰è¯¸å¦‚è­¦å‘Šä¿¡æ¯å’Œæ—¥å¿—ç­‰çš„å¼€å‘ç¯å¢ƒçš„ä»£ç ï¼Œå°†æœ‰åŠ©äºå‡å°ä»£ç ä½“ç§¯æå‡è¿è¡Œé€Ÿåº¦ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹å¯é…ç½®<code>process.env.NODE_ENV</code>å˜é‡ï¼Œæ³¨æ„è‹¥å¯ç”¨äº†<code>mode: 'production'</code>ï¼Œåˆ™<code>webapck</code>ä¼šè‡ªåŠ¨è®¾ç½®<code>process.env.NODE_ENV</code>çš„å€¼ï¼Œä¸ç”¨å†é‡å¤è®¾ç½®ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">'process.env.NODE_ENV'</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'development'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="åŒºåˆ†ç¯å¢ƒæ–¹å¼"><a href="#åŒºåˆ†ç¯å¢ƒæ–¹å¼" class="header-anchor">#</a> åŒºåˆ†ç¯å¢ƒæ–¹å¼</h3> <h4 id="scripts"><a href="#scripts" class="header-anchor">#</a> scripts</h4> <p>â€ƒâ€ƒ;<code>webpack4</code>ç‰ˆæœ¬å¼•å…¥<code>mode</code>å±æ€§ï¼ŒåŒ…æ‹¬<code>development</code>ã€<code>production</code>ã€<code>none</code>ä¸‰ç§æ¨¡å¼ã€‚</p> <p>â€ƒâ€ƒ;<code>development</code>æ¨¡å¼ä¼šå°†æ¨¡å—å†…<code>process.env.NODE_ENV</code>çš„å€¼è®¾ä¸º<code>development</code>ï¼ŒåŒæ—¶å¯ç”¨å¼€å‘ç¯å¢ƒçš„<code>webpack</code>æ’ä»¶ã€‚<code>production</code>æ¨¡å¼ä¼šå°†æ¨¡å—å†…<code>process.env.NODE_ENV</code>çš„å€¼è®¾ä¸º<code>production</code>ï¼ŒåŒæ—¶å¯ç”¨ç”Ÿäº§ç¯å¢ƒçš„<code>webpack</code>æ’ä»¶ã€‚</p> <p>â€ƒâ€ƒå¯åœ¨<code>webpack.config.js</code>ä¸­è®¾ç½®<code>mode</code>ï¼Œä¹Ÿå¯åœ¨<code>package.json</code>ä¸­<code>scripts</code>è„šæœ¬å‘½ä»¤ä¸­è®¾ç½®<code>--mode</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;build-dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode=development&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;build-prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode=production&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒç‰¹æ®Šè„šæœ¬ä¹Ÿä¼šé»˜è®¤è®¾ç½®<code>mode</code>ï¼Œå¦‚ä¸‹<code>&quot;dev&quot;: &quot;webpack-dev-server&quot;</code>çš„<code>mode</code>ä¸º<code>development</code>ï¼Œ<code>&quot;build&quot;: &quot;webpack&quot;</code>çš„<code>mode</code>ä¸º<code>production</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè€Œåœ¨æ¨¡å—å†…éƒ¨å°±å¯æ ¹æ®<code>process.env.NODE_ENV</code>çš„å€¼åˆ¤æ–­å½“å‰çš„ç¯å¢ƒï¼Œæ³¨æ„<code>mode</code>çš„æ–¹å¼æ˜¯å¯ä»¥åœ¨ä»»æ„æ¨¡å—å†…é€šè¿‡<code>process.env.NODE_ENV</code>è·å–å½“å‰çš„ç¯å¢ƒå˜é‡ï¼Œä½†æ˜¯æ— æ³•åœ¨<code>node</code>ç¯å¢ƒï¼ˆ<code>webpack</code>é…ç½®æ–‡ä»¶ï¼‰ä¸­è·å–å½“å‰çš„ç¯å¢ƒå˜é‡ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/mian.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token comment">// production</span>

<span class="token comment">// webpack.config.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒå¦‚ä¸‹<code>webpack.config.js</code>ä¸­å¯ä»¥é€šè¿‡å‡½æ•°çš„æ–¹å¼è·å–ç¯å¢ƒå˜é‡ï¼Œä½†æ˜¯ä¹Ÿæ— æ³•åœ¨å‡½æ•°å¤–è·å–ç¯å¢ƒå˜é‡ï¼Œ<code>main.js</code>ä¸­èƒ½è¾“å‡º<code>production</code>æ˜¯å› ä¸ºç‰¹æ®Šè„šæœ¬<code>&quot;build&quot;: &quot;webpack&quot;</code>ä¼šé»˜è®¤è®¾ç½®<code>mode</code>ä¸º<code>production</code>æ¨¡å¼ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;build-dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --env=development&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;build-prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --env=production&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token comment">// development | production</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token comment">// production</span>
</code></pre></div><h4 id="webpack-defineplugin"><a href="#webpack-defineplugin" class="header-anchor">#</a> webpack.DefinePlugin</h4> <p>â€ƒâ€ƒ;<code>scripts</code>çš„æ–¹å¼æ¨¡å—å†…çš„<code>process.env.NODE_ENV</code>åªèƒ½ä¸ºå›ºå®šçš„å‡ ä¸ªå€¼ã€‚</p> <p>â€ƒâ€ƒ;<code>webpack.DefinePlugin</code>åˆ™å¯ä»¥è®¾ç½®æ¨¡å—å†…<code>process.env.NODE_ENV</code>ä¸ºä»»æ„å€¼ï¼Œä½†æ˜¯ä¹Ÿæ— æ³•åœ¨<code>node</code>ç¯å¢ƒä¸­è·å–å½“å‰çš„ç¯å¢ƒå˜é‡ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string-property property">'process.env.NODE_ENV'</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token comment">// dev</span>
</code></pre></div><h4 id="cross-env"><a href="#cross-env" class="header-anchor">#</a> cross-env</h4> <p>â€ƒâ€ƒä¸Šè¿°ä¸¤ç§æ–¹å¼å‡æ— æ³•åœ¨<code>node</code>ç¯å¢ƒï¼ˆ<code>webpak</code>é…ç½®æ–‡ä»¶ï¼‰ä¸­è·å–ç¯å¢ƒå˜é‡ï¼Œ<code>scripts</code>æ–¹å¼ä¹Ÿåªèƒ½é€šè¿‡å‡½æ•°çš„æ–¹å¼åœ¨å‡½æ•°å†…éƒ¨è·å–ï¼Œæ— æ³•åœ¨<code>webpack.config.js</code>ä¸­è·å–åˆ°å½“å‰çš„ç¯å¢ƒå˜é‡ã€‚</p> <p>â€ƒâ€ƒå€ŸåŠ©ç¬¬ä¸‰æ–¹æ’ä»¶<code>cross-env</code>å¯ä»¥åœ¨<code>node</code>ç¯å¢ƒè·å–å½“å‰çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶ä¸”å¯ä»¥ä»»æ„è®¾ç½®ç¯å¢ƒå˜é‡çš„å€¼ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env ENVIR=prod webpack&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;cross-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.0.3&quot;</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ENVIR</span><span class="token punctuation">)</span> <span class="token comment">// prod</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ENVIR</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre></div><h3 id="source-map"><a href="#source-map" class="header-anchor">#</a> source map</h3> <p>â€ƒâ€ƒ;<code>source map</code>æŒ‡çš„æ˜¯å°†ç¼–è¯‘ã€å‹ç¼©ã€æ‰“åŒ…åçš„ä»£ç æ˜ å°„å›æºä»£ç çš„è¿‡ç¨‹ï¼Œ<code>webpack</code>æ‰“åŒ…å‹ç¼©åçš„ä»£ç åŸºæœ¬ä¸å…·å¤‡å¯è¯»æ€§ï¼Œæ­¤æ—¶ä»£ç æŠ›å‡ºé”™è¯¯ï¼Œæƒ³è¦å›æº¯å…¶è°ƒç”¨æ ˆéå¸¸å›°éš¾ã€‚</p> <h4 id="æœªå¯ç”¨é…ç½®"><a href="#æœªå¯ç”¨é…ç½®" class="header-anchor">#</a> æœªå¯ç”¨é…ç½®</h4> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>package.json</code>ã€<code>webpack.config.js</code>å’Œ<code>src</code>æ–‡ä»¶å¤¹ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>index.html</code>ã€<code>main.js</code>å’Œ<code>style.scss</code>ï¼Œå…¶ä¸­<code>MiniCssExtractPlugin</code>æ’ä»¶ä¸»è¦ä½œç”¨æ˜¯æå–å‡º<code>css</code>æ ·å¼æ–‡ä»¶ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;css-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.28.9&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;html-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;node-sass&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.7.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;sass-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^6.0.7&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;mini-css-extract-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.5.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;style-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.19.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].css'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'[id].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'./index.scss'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'source-map'</span><span class="token punctuation">)</span>

<span class="token comment">// src/index.scss</span>
<span class="token literal-property property">$color</span><span class="token operator">:</span> red<span class="token punctuation">;</span>

p <span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> $color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒæ‰§è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…åï¼Œæ ¹ç›®å½•ä¸‹è¾“å‡º<code>index.html</code>ã€<code>main.css</code>ã€<code>main.js</code>ï¼Œåˆ©ç”¨<code>VS Code</code>ç¼–è¾‘å™¨æ’ä»¶<code>Live Server</code>ï¼Œ<code>index.html</code>å†…éƒ¨å³å‡»<code>Open with Live Server</code>ï¼ŒæŸ¥çœ‹<code>index.html</code>éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šçš„æƒ…å†µã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹æ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœã€‚</p> <p><img src="/other/webpack/middle-close-console.png" alt=""></p> <p>â€ƒâ€ƒå•å‡»<code>mian.js:formatted:76</code>è·³è½¬è‡³å¦‚ä¸‹ä½ç½®ï¼Œä½†æ˜¯ä»…èƒ½æŸ¥çœ‹æ­¤è¾“å‡ºè¯­å¥åœ¨æ‰“åŒ…åçš„ä»£ç ä¸­çš„ä½ç½®ï¼Œæ— æ³•å›æº¯åˆ°æºä»£ç ã€‚</p> <p><img src="/other/webpack/middle-close-source.png" alt=""></p> <p>â€ƒâ€ƒç„¶ååœ¨æ§åˆ¶å°æŸ¥çœ‹æ ·å¼ã€‚</p> <p><img src="/other/webpack/middle-close-page.png" alt=""></p> <p>â€ƒâ€ƒå•å‡»<code>mian.css:1</code>è·³è½¬è‡³å¦‚ä¸‹ä½ç½®ï¼Œä¹Ÿä»…èƒ½æŸ¥çœ‹æ‰“åŒ…åçš„æ ·å¼ä»£ç ï¼Œæ— æ³•å›æº¯ã€‚</p> <p><img src="/other/webpack/middle-close-style.png" alt=""></p> <h4 id="å¯ç”¨é…ç½®"><a href="#å¯ç”¨é…ç½®" class="header-anchor">#</a> å¯ç”¨é…ç½®</h4> <p>â€ƒâ€ƒåœ¨<code>webpack.config.js</code>ä¸­æ·»åŠ <code>devtool</code>å¼€å¯<code>js</code>æ–‡ä»¶çš„<code>source map</code>ï¼Œè€Œå¯¹äº<code>scss</code>ã€<code>css</code>åˆ™éœ€è¦æ·»åŠ é¢å¤–çš„<code>source map</code>é…ç½®é¡¹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">sourceMap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">sourceMap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒå†æ¬¡æ‰§è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…ï¼Œ<code>dist</code>ç›®å½•ä¸‹ä¼šå¤šå‡ºå‡ ä¸ª<code>map</code>æ–‡ä»¶ï¼Œç”±äºå¯ç”¨äº†<code>devtool</code>é…ç½®é¡¹ï¼Œ<code>source map</code>å°±ä¼šè·Ÿéšæºä»£ç ä¸€æ­¥æ­¥è¢«ä¼ é€’ï¼Œç›´åˆ°ç”Ÿæˆæœ€åçš„<code>map</code>æ–‡ä»¶ï¼Œå…¶æ–‡ä»¶åé»˜è®¤ä¸ºè¾“å‡ºæ–‡ä»¶åŠ ä¸Š<code>.map</code>åç¼€ï¼Œå¦‚<code>main.js.map</code>ï¼Œ<code>main.js</code>å°¾éƒ¨è¿˜ä¼šé»˜è®¤è¿½åŠ ä¸€å¥æ³¨é‡Šæ¥æ ‡è¯†<code>map</code>æ–‡ä»¶çš„ä½ç½®ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token operator">...</span>
<span class="token comment">//# sourceMappingURL=main.js.map</span>
</code></pre></div><p>â€ƒâ€ƒæ§åˆ¶å°å†æ¬¡æŸ¥çœ‹è¾“å‡ºç»“æœï¼Œå·²ç»å¯ä»¥çœ‹åˆ°æ­¤è¯­å¥åœ¨æºä»£ç ä¸­çš„å…·ä½“è¡Œæ•°ã€‚</p> <p><img src="/other/webpack/middle-open-console.png" alt=""></p> <p>â€ƒâ€ƒå•å‡»<code>main.js:2</code>è·³è½¬è‡³å¦‚ä¸‹ï¼Œå¯çœ‹è§æ­¤è¯­å¥çš„å…·ä½“æƒ…å†µã€‚</p> <p><img src="/other/webpack/middle-open-source.png" alt=""></p> <p>â€ƒâ€ƒæ ·å¼åˆ™å®Œå…¨å¯ä»¥å›æº¯åˆ°<code>scss</code>æ–‡ä»¶ä¸­ã€‚</p> <p><img src="/other/webpack/middle-open-page.png" alt=""></p> <p>â€ƒâ€ƒå•å‡»<code>index.scss:3</code>è·³è½¬è‡³å¦‚ä¸‹ã€‚</p> <p><img src="/other/webpack/middle-open-style.png" alt=""></p> <h4 id="å®‰å…¨æ€§èƒ½"><a href="#å®‰å…¨æ€§èƒ½" class="header-anchor">#</a> å®‰å…¨æ€§èƒ½</h4> <p>â€ƒâ€ƒå¼€å¯<code>source map</code>ä¹‹åï¼Œå¼€å‘è€…å·¥å…·ä¸­çš„<code>webpack://</code>ç›®å½•ä¸­å¯ä»¥æ‰¾åˆ°è§£æåçš„å·¥ç¨‹æºç ã€‚</p> <p>â€ƒâ€ƒæ³¨æ„å½“æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æ—¶ï¼Œ<code>map</code>æ–‡ä»¶ä¼šè¢«åŒæ—¶åŠ è½½ï¼Œç„¶åæµè§ˆå™¨ä½¿ç”¨å®ƒæ¥è§£æå¯¹åº”çš„è¾“å‡ºæ–‡ä»¶ï¼Œåˆ†æå‡ºæºä»£ç çš„ç›®å½•ç»“æ„å’Œå†…å®¹ã€‚</p> <p>â€ƒâ€ƒ;<code>map</code>æ–‡ä»¶ä¸€èˆ¬æ¯”è¾ƒå¤§ï¼Œä¸æ‰“å¼€å¼€å‘è€…å·¥å…·æ˜¯ä¸ä¼šåŠ è½½çš„ï¼Œä½†æ˜¯ä½¿ç”¨<code>source map</code>ä¼šæœ‰ä¸€å®šçš„å®‰å…¨éšæ‚£ã€‚</p> <p>â€ƒâ€ƒ;<code>webpack</code>æä¾›äº†<code>hidden-source-map</code>å’Œ<code>nosources-source-map</code>ä¸¤ç§ç­–ç•¥æ¥æå‡<code>source map</code>çš„å®‰å…¨æ€§ã€‚</p> <p>â€ƒâ€ƒ;<code>hidden-source-map</code>ä»ç„¶ä¼šç”Ÿæˆå®Œæ•´çš„<code>map</code>æ–‡ä»¶ï¼Œä½†æ˜¯è¾“å‡ºæ–‡ä»¶ä¸­ä¸ä¼šæ·»åŠ å¯¹<code>map</code>æ–‡ä»¶çš„å¼•ç”¨ã€‚è‹¥è¦å›æº¯æºç ï¼Œå¯å€ŸåŠ©ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆä¾‹å¦‚ <a href="https://sentry.io/welcome/" target="_blank" rel="noopener noreferrer">Sentry<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ï¼Œå°†<code>map</code>æ–‡ä»¶ä¸Šä¼ ä¸Šå»ã€‚</p> <p>â€ƒâ€ƒ;<code>nosources-source-map</code>å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹æºç çš„ç›®å½•ç»“æ„ï¼Œä½†æ˜¯æ–‡ä»¶å…·ä½“å†…å®¹ä¼šè¢«éšè—ã€‚å¯ä»¥åœ¨æ§åˆ¶å°æŸ¥çœ‹<code>console</code>æ—¥å¿—çš„å‡†ç¡®è¡Œæ•°ï¼Œå¯¹äºå›æº¯é”™è¯¯åŸºæœ¬è¶³å¤Ÿã€‚</p> <p><img src="/other/webpack/middle-safe.png" alt=""></p> <h3 id="devtool-é…ç½®é¡¹"><a href="#devtool-é…ç½®é¡¹" class="header-anchor">#</a> devtool é…ç½®é¡¹</h3> <p>â€ƒâ€ƒ;<code>devtool</code>ç”¨ä½œè°ƒè¯•ï¼ŒåŒ…æ‹¬å¦‚ä¸‹åå‡ ç§ç­‰é…ç½®ã€‚</p> <ul><li><code>none</code></li> <li><code>eval</code></li> <li><code>eval-source-map</code></li> <li><code>cheap-eval-source-map</code></li> <li><code>cheap-module-eval-source-map</code></li> <li><code>source-map</code></li> <li><code>cheap-source-map</code></li> <li><code>cheap-module-source-map</code></li> <li><code>inline-source-map</code></li> <li><code>inline-cheap-source-map</code></li> <li><code>inline-cheap-module-source-map</code></li> <li><code>hidden-source-map</code></li> <li><code>nosources-source-map</code></li></ul> <p>â€ƒâ€ƒå…¶ä¸­åŒ…æ‹¬<code>eval</code>ã€<code>cheap</code>ã€<code>module</code>ã€<code>source-map</code>ç­‰å…³é”®å­—ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ç»„åˆè€Œæˆï¼Œå…·ä½“ç‰¹æ€§å¦‚ä¸‹ã€‚</p> <ul><li><code>eval</code>ï¼šä½¿ç”¨<code>eval</code>åŒ…è£¹æ¨¡å—ä»£ç ï¼Œå¹¶ä¸”å­˜åœ¨<code>sourceURL</code>ï¼Œ<code>sourceURL</code>æŒ‡å‘åŸæ–‡ä»¶</li> <li><code>cheap</code>ï¼šæ‰“åŒ…<code>map</code>æ–‡ä»¶æ—¶ï¼Œä¸ä¿å­˜åŸå§‹ä»£ç çš„åˆ—ä½ç½®ä¿¡æ¯ï¼ŒåªåŒ…å«è¡Œä½ç½®ä¿¡æ¯ã€‚å¿½ç•¥<code>loader</code>çš„<code>source map</code>ï¼Œå¹¶ä¸”ä»…æ˜¾ç¤ºè½¬è¯‘åçš„ä»£ç </li> <li><code>module</code>ï¼šåŒ…æ‹¬<code>loader</code>çš„<code>sourcemap</code></li> <li><code>source-map</code>ï¼šç”Ÿæˆ<code>.map</code>æ–‡ä»¶</li></ul> <h4 id="none"><a href="#none" class="header-anchor">#</a> none</h4> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>package.json</code>ã€<code>webpack.config.js</code>å’Œ<code>src</code>æ–‡ä»¶å¤¹ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>index.html</code>å’Œ<code>main.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;@babel/core&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.2.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@babel/preset-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.3.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;babel-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.0.5&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;html-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'source map'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤åï¼Œæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœã€‚</p> <p><img src="/other/webpack/middle-config-none-console.png" alt=""></p> <p>â€ƒâ€ƒå•å‡»<code>mian.js:97</code>è·³è½¬å¦‚ä¸‹ã€‚</p> <p><img src="/other/webpack/middle-config-none-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>none</code>é…ç½®é¡¹å³æ— æ³•å›æº¯åˆ°æºä»£ç ï¼Œä»…ä»…æ˜¯æ ¹æ®é…ç½®çš„<code>loader</code>è½¬è¯‘äº†æ¨¡å—çš„ä»£ç ã€‚</p> <h4 id="eval"><a href="#eval" class="header-anchor">#</a> eval</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>eval</code>ï¼Œå†è¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-eval-package.png" alt=""></p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-eval-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>eval</code>é…ç½®é¡¹ä¸­ï¼Œæ‰“åŒ…åæ¨¡å—ä»£ç è¢«<code>eval</code>åŒ…è£¹ï¼ŒåŒæ—¶åŒ…æ‹¬<code>sourceURL</code>ï¼Œå›æº¯çš„æºä»£ç è¢«<code>loader</code>è½¬æ¢è¿‡ï¼ˆç®­å¤´å‡½æ•°è½¬æ¢ä¸ºæ™®é€šå‡½æ•°ï¼‰ï¼Œå¹¶å¸¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯ã€‚</p> <h4 id="source-map-2"><a href="#source-map-2" class="header-anchor">#</a> source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>source-map</code>ï¼Œå†æ¬¡è¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼Œ<code>dist</code>ç›®å½•ä¸‹å¤šç”Ÿæˆäº†<code>.map</code>æ–‡ä»¶ã€‚</p> <p><img src="/other/webpack/middle-config-source-map-map.png" alt=""></p> <p>â€ƒâ€ƒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-source-map-package.png" alt=""></p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-source-map-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>source-map</code>é…ç½®é¡¹ä¸­ï¼Œç”Ÿæˆäº†<code>.map</code>æ–‡ä»¶ï¼Œæ‰“åŒ…è¾“å‡ºçš„ä»£ç å°¾éƒ¨è¿½åŠ äº†<code>sourceMappingURL</code>ï¼Œå›æº¯çš„æºä»£ç ä¸ºåŸå§‹ä»£ç ï¼Œå¹¶å¸¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯ã€‚</p> <h4 id="cheap-source-map"><a href="#cheap-source-map" class="header-anchor">#</a> cheap-source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>cheap-source-map</code>ï¼Œè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼Œä¹Ÿä¼šåœ¨<code>dist</code>ç›®å½•ä¸‹ç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼Œæ‰“åŒ…è¾“å‡ºçš„ä»£ç å’Œ<code>source-map</code>ä¸€è‡´ã€‚</p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-cheap-source-map.png" alt=""></p> <p>â€ƒâ€ƒ;<code>cheap-source-map</code>é…ç½®é¡¹ä¸­ï¼Œä¹Ÿä¼šç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼Œæ‰“åŒ…è¾“å‡ºçš„ä»£ç å°¾éƒ¨ä¹Ÿä¼šè¿½åŠ <code>sourceMappingURL</code>ï¼Œå›æº¯çš„æºä»£ç è¢«<code>loader</code>è½¬æ¢è¿‡ï¼ˆç®­å¤´å‡½æ•°è½¬æ¢ä¸ºæ™®é€šå‡½æ•°ï¼‰ï¼Œä¸å¸¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯ï¼ˆå…‰æ ‡ä½äºè¡Œé¦–ï¼‰ã€‚</p> <h4 id="eval-source-map"><a href="#eval-source-map" class="header-anchor">#</a> eval-source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>eval-source-map</code>ï¼Œè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-eval-source-map-package.png" alt=""></p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-eval-source-map-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>eval-source-map</code>é…ç½®é¡¹ä¸­ï¼Œæ‰“åŒ…åæ¨¡å—ä»£ç è¢«<code>eval</code>åŒ…è£¹ï¼ŒåŒæ—¶åŒ…æ‹¬<code>sourceURL</code>å’Œ<code>sourceMappingURL</code>ï¼Œä¸ä¼šç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼Œè€Œæ˜¯å°†<code>map</code>æ–‡ä»¶å†…å®¹è½¬æ¢ä¸º<code>base64</code>ç¼–ç æ’å…¥åˆ°<code>sourceMappingURL</code>åé¢ï¼Œå›æº¯çš„æºä»£ç ä¸ºåŸå§‹ä»£ç ï¼Œå¹¶å¸¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯ã€‚</p> <h4 id="cheap-eval-source-map"><a href="#cheap-eval-source-map" class="header-anchor">#</a> cheap-eval-source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>cheap-eval-source-map</code>ï¼Œè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-cheap-eval-source-map-package.png" alt=""></p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-cheap-eval-source-map-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>cheap-eval-source-map</code>é…ç½®é¡¹ä¸­ï¼Œæ‰“åŒ…åæ¨¡å—ä»£ç è¢«<code>eval</code>åŒ…è£¹ï¼ŒåŒæ—¶åŒ…æ‹¬<code>sourceURL</code>å’Œ<code>sourceMappingURL</code>ï¼Œä¸ä¼šç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼Œè€Œæ˜¯å°†<code>map</code>æ–‡ä»¶å†…å®¹è½¬æ¢ä¸º<code>base64</code>ç¼–ç æ’å…¥åˆ°<code>sourceMappingURL</code>åé¢ï¼Œå›æº¯çš„æºä»£ç è¢«<code>loader</code>è½¬æ¢è¿‡ï¼ˆç®­å¤´å‡½æ•°è½¬æ¢ä¸ºæ™®é€šå‡½æ•°ï¼‰ï¼Œä¸å¸¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯ï¼ˆå…‰æ ‡ä½äºè¡Œé¦–ï¼‰ã€‚</p> <h4 id="cheap-module-eval-source-map"><a href="#cheap-module-eval-source-map" class="header-anchor">#</a> cheap-module-eval-source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>cheap-module-eval-source-map</code>ï¼Œè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-cheap-module-eval-source-map-package.png" alt=""></p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-cheap-module-eval-source-map-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>cheap-module-eval-source-map</code>é…ç½®é¡¹ä¸­ï¼Œæ‰“åŒ…åæ¨¡å—ä»£ç è¢«<code>eval</code>åŒ…è£¹ï¼ŒåŒæ—¶åŒ…æ‹¬<code>sourceURL</code>å’Œ<code>sourceMappingURL</code>ï¼Œä¸ä¼šç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼Œè€Œæ˜¯å°†<code>map</code>æ–‡ä»¶å†…å®¹è½¬æ¢ä¸º<code>base64</code>ç¼–ç æ’å…¥åˆ°<code>sourceMappingURL</code>åé¢ï¼Œå›æº¯çš„æºä»£ç ä¸ºåŸå§‹ä»£ç ï¼Œä¸å¸¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯ï¼ˆå…‰æ ‡ä½äºè¡Œé¦–ï¼‰ã€‚</p> <h4 id="cheap-module-source-map"><a href="#cheap-module-source-map" class="header-anchor">#</a> cheap-module-source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>cheap-module-source-map</code>ï¼Œè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-cheap-module-source-map-package.png" alt=""></p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-cheap-module-source-map-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>cheap-module-source-map</code>é…ç½®é¡¹ä¸­ï¼Œä¹Ÿä¼šç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼Œæ‰“åŒ…è¾“å‡ºçš„ä»£ç å°¾éƒ¨ä¹Ÿä¼šè¿½åŠ <code>sourceMappingURL</code>ï¼Œå›æº¯çš„æºä»£ç ä¸ºåŸå§‹ä»£ç ï¼Œä¸å¸¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯ï¼ˆå…‰æ ‡ä½äºè¡Œé¦–ï¼‰ã€‚</p> <h4 id="inline-source-map"><a href="#inline-source-map" class="header-anchor">#</a> inline-source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>inline-source-map</code>ï¼Œè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-inline-source-map-package.png" alt=""></p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-inline-source-map-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>inline-source-map</code>é…ç½®é¡¹ä¸­ï¼Œä¸ä¼šç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼Œè€Œæ˜¯å°†<code>map</code>æ–‡ä»¶å†…å®¹è½¬æ¢ä¸º<code>base64</code>ç¼–ç æ’å…¥åˆ°<code>sourceMappingURL</code>åé¢ï¼Œå›æº¯çš„æºä»£ç ä¸ºåŸå§‹ä»£ç ï¼Œå¹¶å¸¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯ã€‚</p> <h4 id="hidden-source-map"><a href="#hidden-source-map" class="header-anchor">#</a> hidden-source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>hidden-source-map</code>ï¼Œè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤ï¼Œä¹Ÿä¼šåœ¨<code>dist</code>ç›®å½•ä¸‹ç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼ŒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-hidden-source-map-package.png" alt=""></p> <p>â€ƒâ€ƒæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœåå•å‡»å¹¶è·³è½¬ã€‚</p> <p><img src="/other/webpack/middle-config-hidden-source-map-source.png" alt=""></p> <p>â€ƒâ€ƒ;<code>inline-source-map</code>é…ç½®é¡¹ä¸­ï¼Œä¼šç”Ÿæˆ<code>.map</code>æ–‡ä»¶ï¼Œä½†æ˜¯ä¸ä¼šä¿ç•™å¯¹<code>map</code>æ–‡ä»¶çš„å¼•ç”¨ï¼ˆæ— <code>sourceMappingURL</code>ï¼‰ï¼Œæ— æ³•å›æº¯åˆ°æºä»£ç ã€‚</p> <h4 id="nosources-source-map"><a href="#nosources-source-map" class="header-anchor">#</a> nosources-source-map</h4> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ä¸­çš„<code>devtool</code>å±æ€§ä¸º<code>nosources-source-map</code>ï¼Œè¿è¡Œ<code>build</code>è„šæœ¬å‘½ä»¤åï¼Œæ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºç»“æœã€‚</p> <p><img src="/other/webpack/middle-config-nosources-source-map-console.png" alt=""></p> <p>â€ƒâ€ƒå•å‡»<code>main.js:2</code>è·³è½¬å¦‚ä¸‹ã€‚</p> <p><img src="/other/webpack/middle-config-nosources-source-map-main.png" alt=""></p> <p>â€ƒâ€ƒæŸ¥çœ‹æ‰“åŒ…è¾“å‡ºçš„ä»£ç ã€‚</p> <p><img src="/other/webpack/middle-config-nosources-source-map-package.png" alt=""></p> <p>â€ƒâ€ƒ;<code>nosources-source-map</code>é…ç½®é¡¹ä¸­ï¼Œç”Ÿæˆäº†<code>.map</code>æ–‡ä»¶ï¼Œæ‰“åŒ…è¾“å‡ºçš„ä»£ç å°¾éƒ¨è¿½åŠ äº†<code>sourceMappingURL</code>ï¼Œæ— æ³•å›æº¯åˆ°æºä»£ç ï¼ˆæºä»£ç çš„ç›®å½•ç»“æ„å¯æŸ¥çœ‹ï¼Œå…·ä½“å†…å®¹è¢«éšè—ï¼‰ï¼Œä½†æ˜¯å¯ä»¥åœ¨æ§åˆ¶å°æŸ¥çœ‹<code>console</code>æ—¥å¿—çš„å‡†ç¡®è¡Œæ•°ã€‚</p> <h4 id="å·®å¼‚å¯¹æ¯”"><a href="#å·®å¼‚å¯¹æ¯”" class="header-anchor">#</a> å·®å¼‚å¯¹æ¯”</h4> <p>â€ƒâ€ƒå¦‚ä¸‹ä¸ºå„ä¸ªé…ç½®é¡¹çš„å·®å¼‚ï¼Œå…¶ä¸­æ„å»ºé€Ÿåº¦<code>fastest &gt; fast &gt; ok &gt; slow &gt; slowest</code>ã€‚</p> <table><thead><tr><th style="text-align:center;">devtool</th> <th style="text-align:center;">æ„å»ºé€Ÿåº¦</th> <th style="text-align:center;">map æ–¹å¼</th> <th style="text-align:center;">eval åŒ…è£¹</th> <th style="text-align:center;">sourceMappingURL</th> <th style="text-align:center;">æ˜¯å¦æœ‰å…‰æ ‡åˆ—ä¿¡æ¯</th> <th style="text-align:center;">æ˜¯å¦å¯å›æº¯</th> <th style="text-align:center;">å›æº¯ä»£ç </th></tr></thead> <tbody><tr><td style="text-align:center;"><code>none</code></td> <td style="text-align:center;"><code>fastest</code></td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:center;"><code>eval</code></td> <td style="text-align:center;"><code>fast</code></td> <td style="text-align:center;"><code>eval</code>å‡½æ•°å†…<code>sourceURL</code>å¼•ç”¨æºæ–‡ä»¶è·¯å¾„</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;">-</td> <td style="text-align:center;">æœ‰</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;"><code>loader</code>è½¬è¯‘åä»£ç </td></tr> <tr><td style="text-align:center;"><code>source-map</code></td> <td style="text-align:center;"><code>slowest</code></td> <td style="text-align:center;">æ¨¡å—å°¾éƒ¨è¿½åŠ <code>sourceMappingURL</code>å¼•ç”¨<code>map</code></td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">é“¾æ¥<code>map</code>æ–‡ä»¶å</td> <td style="text-align:center;">æœ‰</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;">åŸå§‹ä»£ç </td></tr> <tr><td style="text-align:center;"><code>cheap-source-map</code></td> <td style="text-align:center;"><code>ok</code></td> <td style="text-align:center;">æ¨¡å—å°¾éƒ¨è¿½åŠ <code>sourceMappingURL</code>å¼•ç”¨<code>map</code></td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">é“¾æ¥<code>map</code>æ–‡ä»¶å</td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;"><code>loader</code>è½¬è¯‘åä»£ç </td></tr> <tr><td style="text-align:center;"><code>eval-source-map</code></td> <td style="text-align:center;"><code>slowest</code></td> <td style="text-align:center;"><code>eval</code>å‡½æ•°å†…<code>sourceURL</code>å¼•ç”¨æºæ–‡ä»¶è·¯å¾„ï¼Œå‡½æ•°å°¾éƒ¨å†æ’å…¥<code>sourceMappingURL</code></td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;"><code>map</code>å†…å®¹<code>base64</code>ç¼–ç </td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;">åŸå§‹ä»£ç </td></tr> <tr><td style="text-align:center;"><code>cheap-eval-source-map</code></td> <td style="text-align:center;"><code>ok</code></td> <td style="text-align:center;"><code>eval</code>å‡½æ•°å†…<code>sourceURL</code>å¼•ç”¨æºæ–‡ä»¶è·¯å¾„ï¼Œå‡½æ•°å°¾éƒ¨å†æ’å…¥<code>sourceMappingURL</code></td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;"><code>map</code>å†…å®¹<code>base64</code>ç¼–ç </td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;"><code>loader</code>è½¬è¯‘åä»£ç </td></tr> <tr><td style="text-align:center;"><code>cheap-module-eval-source-map</code></td> <td style="text-align:center;"><code>slow</code></td> <td style="text-align:center;"><code>eval</code>å‡½æ•°å†… sourceURL å¼•ç”¨æºæ–‡ä»¶è·¯å¾„ï¼Œå‡½æ•°å°¾éƒ¨å†æ’å…¥<code>sourceMappingURL</code></td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;"><code>map</code>å†…å®¹<code>base64</code>ç¼–ç </td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;">åŸå§‹ä»£ç </td></tr> <tr><td style="text-align:center;"><code>cheap-module-source-map</code></td> <td style="text-align:center;"><code>slow</code></td> <td style="text-align:center;">æ¨¡å—å°¾éƒ¨è¿½åŠ <code>sourceMappingURL</code>å¼•ç”¨<code>map</code></td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">é“¾æ¥<code>map</code>æ–‡ä»¶å</td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;">åŸå§‹ä»£ç </td></tr> <tr><td style="text-align:center;"><code>inline-source-map</code></td> <td style="text-align:center;"><code>slowest</code></td> <td style="text-align:center;">æ¨¡å—å°¾éƒ¨è¿½åŠ <code>sourceMappingURL</code></td> <td style="text-align:center;">å¦</td> <td style="text-align:center;"><code>map</code>å†…å®¹<code>base64</code>ç¼–ç </td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;">æ˜¯</td> <td style="text-align:center;">åŸå§‹ä»£ç </td></tr> <tr><td style="text-align:center;"><code>hidden-source-map</code></td> <td style="text-align:center;"><code>slowest</code></td> <td style="text-align:center;">-</td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:center;"><code>nosources-source-map</code></td> <td style="text-align:center;"><code>slowest</code></td> <td style="text-align:center;">æ¨¡å—å°¾éƒ¨è¿½åŠ <code>sourceMappingURL</code>å¼•ç”¨<code>map</code></td> <td style="text-align:center;">å¦</td> <td style="text-align:center;">é“¾æ¥<code>map</code>æ–‡ä»¶å</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td> <td style="text-align:center;">-</td></tr></tbody></table> <h3 id="èµ„æºå‹ç¼©"><a href="#èµ„æºå‹ç¼©" class="header-anchor">#</a> èµ„æºå‹ç¼©</h3> <p>â€ƒâ€ƒä¸€èˆ¬å‘å¸ƒåˆ°çº¿ä¸Šç¯å¢ƒçš„èµ„æºï¼Œéƒ½ä¼šè¿›è¡Œä»£ç å‹ç¼©ï¼ˆä¸‘åŒ–ï¼‰ï¼Œå³ç§»å‡ºå¤šä½™çš„ç©ºæ ¼ã€æ¢è¡Œå’Œæ‰§è¡Œä¸åˆ°çš„ä»£ç ã€ç¼©çŸ­å˜é‡åã€ç§»å‡ºæ³¨é‡Šç­‰ï¼Œåœ¨ä¿è¯æ‰§è¡Œç»“æœä¸å˜çš„å‰æä¸‹å°†ä»£ç æ›¿æ¢ä¸ºæ›´çŸ­çš„å½¢å¼ã€‚</p> <p>â€ƒâ€ƒä»£ç åœ¨å‹ç¼©åæ•´ä½“ä½“ç§¯éƒ½ä¼šæ˜¾è‘—å‡å°ï¼ŒåŒæ—¶å°†åŸºæœ¬ä¸å¯è¯»ï¼Œä¸€å®šç¨‹åº¦ä¸Šæå‡äº†ä»£ç çš„å®‰å…¨æ€§ã€‚</p> <h4 id="å‹ç¼©-javascript"><a href="#å‹ç¼©-javascript" class="header-anchor">#</a> å‹ç¼© JavaScript</h4> <p>â€ƒâ€ƒ;<code>webpack3</code>åŠä»¥ä¸‹å¯é€šè¿‡<code>webpack.optimize.UglifyJsPlugin</code>å®ç°ä»£ç å‹ç¼©ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.10.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒ;<code>webpack4</code>ä¹‹åé»˜è®¤ä½¿ç”¨<code>terser-webpack-plugin</code>ä½œä¸ºå†…ç½®å‹ç¼©æ’ä»¶ï¼Œå…¶æ”¯æŒ<code>ES6+</code>ä»£ç çš„å‹ç¼©ã€‚åœ¨<code>webpack4</code>ä¸­å¯é€šè¿‡<code>optimization.minimize</code>æ§åˆ¶æ˜¯å¦å¼€å¯å‹ç¼©ï¼Œå¼€å‘ç¯å¢ƒä¸‹é»˜è®¤å…³é—­ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹é»˜è®¤å¼€å¯ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒä¹Ÿå¯ä»¥é€šè¿‡<code>optimization.minimizer</code>è‡ªå®šä¹‰å‹ç¼©æ’ä»¶åŠå…¶é…ç½®é¡¹ï¼Œå¦‚ä¸‹æ‰“åŒ…æ—¶å¯è‡ªåŠ¨å»é™¤<code>console.log</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">pure_funcs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'console.log'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="å‹ç¼©-css"><a href="#å‹ç¼©-css" class="header-anchor">#</a> å‹ç¼© CSS</h4> <p>â€ƒâ€ƒå‹ç¼©<code>css</code>é¦–å…ˆæ˜¯ä½¿ç”¨<code>extract-text-webpack-plugin</code>æˆ–è€…<code>mini-css-extract-plugin</code>å°†æ ·å¼æå–å‡ºæ¥ï¼Œç„¶åä½¿ç”¨<code>optimize-css-assets-webpack-plugin</code>æ¥è¿›è¡Œå‹ç¼©ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>package.json</code>ã€<code>webpack.config.js</code>å’Œ<code>src</code>æ–‡ä»¶å¤¹ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>å’Œ<code>index.css</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;css-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.28.7&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;mini-css-extract-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.5.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].css'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'[id].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>

<span class="token comment">// src/index.css</span>
p <span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒæ‰§è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…åï¼ŒæŸ¥çœ‹è¾“å‡ºçš„<code>css</code>æ–‡ä»¶ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// dist/main.css</span>
p <span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="header-anchor">#</a> ç¼“å­˜</h3> <p>â€ƒâ€ƒç¼“å­˜æ˜¯æŒ‡é‡å¤åˆ©ç”¨æµè§ˆå™¨å·²ç»è·å–è¿‡çš„èµ„æºï¼Œè¯¦ç»†çš„ç¼“å­˜ç­–ç•¥ï¼ˆå¦‚ç¼“å­˜æ—¶é—´ï¼‰ç”±æœåŠ¡å™¨æ¥å†³å®šï¼Œæµè§ˆå™¨åˆ™ä¼šåœ¨èµ„æºè¿‡æœŸå‰ä¸€ç›´ä½¿ç”¨æœ¬åœ°ç¼“å­˜è¿›è¡Œå“åº”ã€‚</p> <p>â€ƒâ€ƒä½†æ˜¯æ­¤æ–¹å¼ä¹Ÿä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œè‹¥ä»£ç è¿›è¡Œäº†<code>bug fix</code>ï¼Œå¹¶å¸Œæœ›ç«‹å³æ›´æ–°åˆ°æ‰€æœ‰ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯æ›´æ”¹èµ„æº<code>URL</code>ï¼Œè¿«ä½¿å®¢æˆ·ç«¯é‡æ–°ä¸‹è½½èµ„æºã€‚</p> <p>â€ƒâ€ƒå¸¸ç”¨æ–¹æ³•æ˜¯æ¯æ¬¡æ‰“åŒ…å¯¹èµ„æºå†…å®¹è®¡ç®—ä¸€æ¬¡<code>hash</code>ï¼Œå¹¶ä½œä¸ºç‰ˆæœ¬å·å­˜æ”¾åœ¨æ–‡ä»¶åä¸­ã€‚</p> <h4 id="ç‰ˆæœ¬å·"><a href="#ç‰ˆæœ¬å·" class="header-anchor">#</a> ç‰ˆæœ¬å·</h4> <p>â€ƒâ€ƒå¦‚ä¸‹é€šå¸¸ä½¿ç”¨<code>chunkhash</code>æ¥ä½œä¸ºæ–‡ä»¶ç‰ˆæœ¬å·ï¼Œä¼šå•ç‹¬ä¸ºæ¯ä¸€ä¸ª<code>chunk</code>è®¡ç®—ä¸€ä¸ª<code>hash</code>å€¼ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name]@[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…åå¦‚ä¸‹ã€‚</p> <p><img src="/other/webpack/middle-version-chunk.png" alt=""></p> <p>â€ƒâ€ƒèµ„æºæ–‡ä»¶åçš„æ”¹å˜ä¹Ÿå°±æ„å‘³ç€<code>HTML</code>ä¸­å¼•ç”¨è·¯å¾„çš„æ”¹å˜ï¼Œå¯ä½¿ç”¨<code>html-webpack-plugin</code>æ’ä»¶ï¼Œåœ¨æ‰“åŒ…ç»“æŸåè‡ªåŠ¨åŒæ­¥å¼•ç”¨çš„èµ„æºåã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;html-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.0&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>â€ƒâ€ƒå†æ¬¡è¿è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…ï¼Œæ‰“å¼€<code>dist</code>ä¸‹<code>index.html</code>ï¼Œå…¶ä¸­å¼•ç”¨çš„èµ„æºè·¯å¾„å·²åŒæ­¥ã€‚</p> <p><img src="/other/webpack/middle-version-page.png" alt=""></p> <h4 id="commonschunkplugin-2"><a href="#commonschunkplugin-2" class="header-anchor">#</a> CommonsChunkPlugin</h4> <p>â€ƒâ€ƒé€šè¿‡<code>CommonsChunkPlugin</code>å¯ä»¥å°†ä¸€äº›ä¸å¸¸å˜åŠ¨çš„ä»£ç å•ç‹¬æå–å‡ºæ¥ï¼Œä¸ç»å¸¸è¿­ä»£çš„ä¸šåŠ¡ä»£ç åŒºåˆ«å¼€æ¥ï¼Œè¿™éƒ¨åˆ†èµ„æºå¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸€ç›´ç¼“å­˜ã€‚</p> <p>â€ƒâ€ƒä½†æ˜¯<code>webpack3</code>åŠä»¥ä¸‹ä¸ºæ¯ä¸ªæ¨¡å—æŒ‡å®šçš„<code>id</code>æ˜¯æŒ‰æ•°å­—é€’å¢çš„ï¼Œå½“æœ‰æ–°çš„æ¨¡å—æ’å…¥è¿›æ¥å°±ä¼šå¯¼è‡´å…¶ä»–æ¨¡å—çš„<code>id</code>å‘ç”Ÿå˜åŒ–ï¼Œè¿›è€Œå½±å“<code>chunk</code>ä¸­çš„å†…å®¹ï¼Œå³æœ€ç»ˆå½±å“<code>chunkhash</code>å€¼ï¼Œé€ æˆæœ¬ä¸ç”¨ä¸‹è½½çš„èµ„æºé‡æ–°ä¸‹è½½ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>package.json</code>ã€<code>webpack.config.js</code>å’Œ<code>src</code>æ–‡ä»¶å¤¹ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.10.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;jquery&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name]@[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name]@[chunkhash:8].js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'jquery'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…ï¼ŒæŸ¥çœ‹è¾“å‡ºçš„èµ„æºï¼Œå…¶ä¸­<code>vendor</code>ä¸­ä»…åŒ…å«ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>å’Œ<code>webpack</code>è¿è¡Œæ—¶æ–‡ä»¶ã€‚</p> <p><img src="/other/webpack/middle-common-chunk-plugin-vendor.png" alt=""></p> <p>â€ƒâ€ƒç„¶ååœ¨<code>src</code>ä¸‹æ–°å»º<code>utils.js</code>ï¼Œ<code>main.js</code>ä¸­å¼•å…¥ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'jquery'</span>
<span class="token keyword">import</span> <span class="token string">'./utils'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span>

<span class="token comment">// src/utils.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'utils.js'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒå†æ¬¡æ‰§è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…ï¼ŒæŸ¥çœ‹è¾“å‡ºçš„èµ„æºã€‚</p> <p><img src="/other/webpack/middle-common-chunk-plugin-chunks.png" alt=""></p> <p>â€ƒâ€ƒå¦‚æ­¤å°±é€ æˆäº†ä¸€ä¸ªé—®é¢˜ï¼Œ<code>vendor</code>ä¸­çš„æ¨¡å—å¹¶æœªå˜åŒ–ï¼Œå…¶è·¯å¾„åç§°å´å‘ç”Ÿäº†æ”¹å˜ã€‚</p> <p>â€ƒâ€ƒå¯¹æ¯”<code>dist</code>ç›®å½•ä¸‹<code>vendor@5eb95a94.js</code>å’Œ<code>vendor@fe14193b.js</code>ï¼Œä»…å¦‚ä¸‹ä¸¤å¤„å‘ç”Ÿäº†å˜åŒ–ã€‚</p> <p><img src="/other/webpack/middle-common-chunk-plugin-pre.png" alt=""></p> <p><img src="/other/webpack/middle-common-chunk-plugin-cur.png" alt=""></p> <h4 id="hashedmoduleidsplugin"><a href="#hashedmoduleidsplugin" class="header-anchor">#</a> HashedModuleIdsPlugin</h4> <p>â€ƒâ€ƒè§£å†³çš„æ–¹æ³•åœ¨äºæ›´æ”¹æ¨¡å—<code>id</code>çš„ç”Ÿæˆæ–¹å¼ï¼Œ<code>webpack3</code>å†…éƒ¨è‡ªå¸¦äº†<code>HashedModuleIdsPlugin</code>æ’ä»¶ï¼Œå®ƒå¯ä»¥ä¸ºæ¯ä¸ªæ¨¡å—æŒ‰ç…§å…¶æ‰€åœ¨è·¯å¾„ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„<code>hash id</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'jquery'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name]@[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name]@[chunkhash:8].js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…ï¼ŒæŸ¥çœ‹è¾“å‡ºçš„èµ„æºã€‚</p> <p><img src="/other/webpack/middle-hash-module-plugin-chunks.png" alt=""></p> <p>â€ƒâ€ƒ;<code>main.js</code>å¼•å…¥<code>utils.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">'jquery'</span>
<span class="token keyword">import</span> <span class="token string">'./utils'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒå†æ¬¡è¿è¡Œ<code>build</code>æ‰“åŒ…ã€‚</p> <p><img src="/other/webpack/middle-hash-module-plugin-utils.png" alt=""></p> <p>â€ƒâ€ƒç”±äº<code>vendor</code>ä»…ä»…åŒ…æ‹¬ç¬¬ä¸‰æ–¹æ¨¡å—<code>jquery</code>å’Œ<code>webpack</code>è¿è¡Œæ—¶ï¼ŒåŒæ—¶<code>jquery</code>çš„è·¯å¾„å§‹ç»ˆæ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å…¶<code>hash id</code>å§‹ç»ˆæ˜¯å›ºå®šçš„ã€‚</p> <p>â€ƒâ€ƒ;<code>webpack3</code>ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œç”±äºå…¶ä¸æ”¯æŒå­—ç¬¦ä¸²ç±»å‹çš„<code>id</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>webpack-hashed-module-id-plugin</code>æ’ä»¶ã€‚è€Œ<code>webpack4+</code>ä¿®æ”¹äº†æ¨¡å—<code>id</code>çš„ç”Ÿæˆæ–¹å¼ï¼Œä¹Ÿå°±ä¸å†æœ‰æ­¤é—®é¢˜ã€‚</p> <h3 id="ç›‘æ§åˆ†æ"><a href="#ç›‘æ§åˆ†æ" class="header-anchor">#</a> ç›‘æ§åˆ†æ</h3> <p>â€ƒâ€ƒå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶å¯¹æ‰“åŒ…è¾“å‡ºçš„<code>bundle</code>ä½“ç§¯è¿›è¡Œç›‘æ§å’Œåˆ†æï¼Œä»¥é˜²æ­¢ä¸å¿…è¦çš„å†—ä½™æ¨¡å—è¢«æ·»åŠ è¿›æ¥ã€‚</p> <h4 id="import-cost"><a href="#import-cost" class="header-anchor">#</a> Import Cost</h4> <p>â€ƒâ€ƒ;<code>Vs Code</code>ä¸­çš„<code>Import Cost</code>å¯ä»¥å¯¹å¼•å…¥æ¨¡å—çš„å¤§å°è¿›è¡Œå®æ—¶æ£€æµ‹ï¼Œå½“ä»£ç ä¸­å¼•ç”¨ä¸€ä¸ªæ–°çš„æ¨¡å—ï¼ˆä¸»è¦æ˜¯<code>node_modules</code>ä¸­çš„æ¨¡å—ï¼‰ï¼Œå°±ä¼šè®¡ç®—æ­¤æ¨¡å—å‹ç¼©åä»¥åŠ<code>gzip</code>åæ‰€å çš„ä½“ç§¯ã€‚</p> <p><img src="/other/webpack/middle-import-cost.png" alt=""></p> <h4 id="webpack-bundle-analyzer"><a href="#webpack-bundle-analyzer" class="header-anchor">#</a> webpack-bundle-analyzer</h4> <p>â€ƒâ€ƒå¦å¤–ä¸€ä¸ªå¯è§†åŒ–åˆ†æå·¥å…·ä¸º<code>webpack-bundle-analyzer</code>ï¼Œå¯ä»¥åˆ†æä¸€ä¸ª<code>bundle</code>çš„æ„æˆã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.6.12&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue-router&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.5.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vuex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.6.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.10.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-bundle-analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.4.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Analyzer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'vuex'</span><span class="token punctuation">,</span> <span class="token string">'vue-router'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">Analyzer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist/[name].js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./utils.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Vue<span class="token punctuation">,</span> Vuex<span class="token punctuation">,</span> VueRouter<span class="token punctuation">,</span> log<span class="token punctuation">,</span> <span class="token string">'main.js'</span><span class="token punctuation">)</span>

<span class="token comment">// src/utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'utils.js'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬åˆ†æç»“æœå¦‚ä¸‹ã€‚</p> <p><img src="/other/webpack/middle-webpack-bundle-analyzer.png" alt=""></p> <h2 id="æ‰“åŒ…ä¼˜åŒ–"><a href="#æ‰“åŒ…ä¼˜åŒ–" class="header-anchor">#</a> æ‰“åŒ…ä¼˜åŒ–</h2> <p>â€ƒâ€ƒé¡¹ç›®åˆæœŸä¸è¦çœ‹åˆ°ä»»ä½•ä¼˜åŒ–ç‚¹å°±æ‹¿åˆ°é¡¹ç›®ä¸­ï¼Œä¼šå¢åŠ å¤æ‚åº¦ä¼˜åŒ–æ•ˆæœä¹Ÿä¸ç†æƒ³ã€‚ä¸€èˆ¬æ˜¯é¡¹ç›®å‘å±•åˆ°ä¸€å®šè§„æ¨¡ï¼Œå‡ºç°æ€§èƒ½é—®é¢˜å†å»å…·ä½“ä¼˜åŒ–ã€‚</p> <h3 id="happypack"><a href="#happypack" class="header-anchor">#</a> HappyPack</h3> <p>â€ƒâ€ƒ;<code>HappyPack</code>æ˜¯ä¸€ä¸ªé€šè¿‡å¤šçº¿ç¨‹æ¥æå‡<code>webpack</code>æ‰“åŒ…é€Ÿåº¦çš„æ’ä»¶ã€‚</p> <p>â€ƒâ€ƒæ‰“åŒ…è¿‡ç¨‹éå¸¸è€—æ—¶çš„éƒ¨åˆ†å°±æ˜¯é€šè¿‡<code>loader</code>è½¬è¯‘å„ç§èµ„æºï¼Œä¾‹å¦‚<code>babel</code>è½¬è¯‘<code>ES6+</code>ç­‰ï¼Œå…¶å…·ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹ã€‚</p> <ol><li>ä»é…ç½®ä¸­è·å–æ‰“åŒ…å…¥å£</li> <li>åŒ¹é…<code>loader</code>è§„åˆ™ï¼Œå¹¶å¯¹å…¥å£æ¨¡å—è¿›è¡Œè½¬è¯‘</li> <li>å¯¹è½¬è¯‘åçš„æ¨¡å—è¿›è¡Œä¾èµ–æŸ¥æ‰¾</li> <li>å¯¹æ–°æ‰¾åˆ°çš„æ¨¡å—é‡å¤è¿›è¡Œæ­¥éª¤<code>2</code>å’Œæ­¥éª¤<code>3</code>ï¼Œç›´åˆ°æ²¡æœ‰æ–°çš„ä¾èµ–æ¨¡å—</li></ol> <p>â€ƒâ€ƒæ­¥éª¤<code>2</code>åˆ°æ­¥éª¤<code>4</code>æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œ<code>webpack</code>éœ€è¦ä¸€æ­¥æ­¥åœ°è·å–æ›´æ·±å±‚çº§çš„èµ„æºï¼Œç„¶åé€ä¸ªè¿›è¡Œè½¬è¯‘ã€‚æ ¹æœ¬é—®é¢˜åœ¨äº<code>webpack</code>æ˜¯å•çº¿ç¨‹çš„ï¼Œè‹¥ä¸€ä¸ªæ¨¡å—ä¾èµ–äºå…¶ä»–å‡ ä¸ªæ¨¡å—ï¼Œ<code>webpack</code>å¿…é¡»å¯¹è¿™äº›æ¨¡å—é€ä¸ªè¿›è¡Œè½¬è¯‘ã€‚è™½ç„¶è¿™äº›è½¬è¯‘ä»»åŠ¡å½¼æ­¤ä¹‹é—´æ²¡æœ‰ä»»åŠ¡ä¾èµ–å…³ç³»ï¼Œå´å¿…é¡»ä¸²è¡Œåœ°æ‰§è¡Œã€‚è€Œ<code>HappyPack</code>çš„æ ¸å¿ƒç‰¹æ€§æ˜¯å¯ä»¥å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œå¹¶è¡Œåœ°å¯¹ä¸åŒæ¨¡å—è¿›è¡Œè½¬è¯‘ï¼Œå……åˆ†åˆ©ç”¨æœ¬åœ°èµ„æºæ¥æå‡æ‰“åŒ…é€Ÿåº¦ã€‚</p> <h4 id="å•ä¸ª-loader"><a href="#å•ä¸ª-loader" class="header-anchor">#</a> å•ä¸ª loader</h4> <p>â€ƒâ€ƒä½¿ç”¨æ—¶è¦ç”¨<code>HappyPack</code>æä¾›çš„<code>loader</code>æ›¿æ¢åŸæœ‰çš„<code>loader</code>ï¼Œå¹¶å°†åŸæœ‰çš„<code>loader</code>ä¼ ç»™<code>HappyPack</code>æ’ä»¶ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>package.json</code>ã€<code>webpack.config.js</code>å’Œ<code>src</code>ï¼Œå…¶ä¸­<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€<code>bar.js</code>ã€<code>foo.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;@babel/core&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.2.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@babel/preset-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.3.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;babel-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.0.5&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.6.12&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;vuex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.6.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;happypack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.0.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'./foo.js'</span>
<span class="token keyword">import</span> <span class="token string">'./bar.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span>

<span class="token comment">// src/foo.js</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'vue'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vue<span class="token punctuation">,</span> <span class="token string">'foo.js'</span><span class="token punctuation">)</span>

<span class="token comment">// src/bar.js</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">,</span> <span class="token string">'bar.js'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒåˆå§‹<code>webpack</code>é…ç½®å¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒå¼•å…¥<code>HappyPack</code>æ’ä»¶åä¿®æ”¹<code>webpack</code>é…ç½®ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> HappyPack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'happypack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'happypack/loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="å¤šä¸ª-loader"><a href="#å¤šä¸ª-loader" class="header-anchor">#</a> å¤šä¸ª loader</h4> <p>â€ƒâ€ƒ;<code>HappyPack</code>ä¼˜åŒ–å¤šä¸ª<code>loader</code>æ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸€ä¸ª<code>loader</code>é…ç½®ä¸€ä¸ª<code>id</code>ï¼Œå¦åˆ™<code>HappyPack</code>æ— æ³•çŸ¥æ™“<code>rules</code>ä¸<code>plugins</code>å¦‚ä½•ä¸€ä¸€å¯¹åº”ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>package.json</code>ã€<code>webpack.config.js</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>å’Œ<code>index.css</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;@babel/core&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.2.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@babel/preset-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.3.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;babel-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.0.5&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;happypack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;css-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.28.9&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;style-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.19.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span>

<span class="token comment">// src/index.css</span>
p <span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒåˆå§‹<code>webpack</code>é…ç½®å¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒå¼•å…¥<code>HappyPack</code>æ’ä»¶åä¿®æ”¹<code>webpack</code>é…ç½®ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> HappyPack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'happypack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'happypack/loader?id=js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'happypack/loader?id=css'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'js'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ç¼©å°æ‰“åŒ…èŒƒå›´"><a href="#ç¼©å°æ‰“åŒ…èŒƒå›´" class="header-anchor">#</a> ç¼©å°æ‰“åŒ…èŒƒå›´</h3> <p>â€ƒâ€ƒæå‡æ€§èƒ½ä¸€èˆ¬éƒ½æ˜¯ä¸¤ç§æ–¹å¼ï¼Œå¢åŠ èµ„æºæˆ–è€…ç¼©å°èŒƒå›´ã€‚å¢åŠ èµ„æºå³ä½¿ç”¨æ›´å¤šçš„<code>CPU</code>å’Œå†…å­˜ï¼Œç”¨æ›´å¤šçš„è®¡ç®—èƒ½åŠ›æ¥ç¼©çŸ­æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ã€‚ç¼©å°èŒƒå›´åˆ™æ˜¯é’ˆå¯¹ä»»åŠ¡æœ¬èº«ï¼Œä¾‹å¦‚å»æ‰å†—ä½™æµç¨‹ï¼Œæˆ–è€…ä¸åšé‡å¤æ€§çš„å·¥ä½œç­‰ã€‚</p> <h4 id="exclude-include"><a href="#exclude-include" class="header-anchor">#</a> exclude/include</h4> <p>â€ƒâ€ƒå¯¹äº<code>js</code>æ¨¡å—ï¼Œä¸€èˆ¬è¦æŠŠ<code>node_modules</code>ç›®å½•æ’é™¤æ‰ã€‚</p> <h4 id="noparse"><a href="#noparse" class="header-anchor">#</a> noParse</h4> <p>â€ƒâ€ƒéƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“æ˜¯å®Œå…¨ä¸å¸Œæœ›<code>webpack</code>å»è¿›è¡Œè§£æçš„ï¼Œå³ä¸å¸Œæœ›åº”ç”¨ä»»ä½•<code>loader</code>è§„åˆ™ï¼Œåº“çš„å†…éƒ¨ä¹Ÿä¸ä¼šæœ‰å¯¹å…¶ä»–æ¨¡å—çš„ä¾èµ–ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨<code>noParse</code>å¯¹å…¶è¿›è¡Œå¿½ç•¥ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹è¡¨ç¤ºå¿½ç•¥æ‰€æœ‰æ–‡ä»¶ååŒ…æ‹¬<code>lodash</code>çš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—ä»ç„¶ä¼šè¢«æ‰“åŒ…è¿›èµ„æºï¼Œåªä¸è¿‡<code>webpack</code>ä¸ä¼šå¯¹å…¶è¿›è¡Œä»»ä½•è§£æã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">noParse</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">lodash</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ignoreplugin"><a href="#ignoreplugin" class="header-anchor">#</a> IgnorePlugin</h4> <p>â€ƒâ€ƒ;<code>IgnorePlugin</code>æ’ä»¶åˆ™æ˜¯å¯ä»¥å®Œå…¨æ’é™¤ä¸€äº›æ¨¡å—ï¼Œè¢«æ’é™¤çš„æ¨¡å—å³ä¾¿è¢«å¼•ç”¨äº†ä¹Ÿä¸ä¼šè¢«æ‰“åŒ…è¿›èµ„æºæ–‡ä»¶ä¸­ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹<code>moment.js</code>æ˜¯ä¸€ä¸ªæ—¶é—´å¤„ç†çš„åº“ï¼Œä¸ºäº†åšæœ¬åœ°åŒ–å…¶åŠ è½½äº†å¾ˆå¤šè¯­è¨€åŒ…ï¼Œä¸€èˆ¬æ¥è¯´ç”¨ä¸ä¸Šï¼Œè€Œä¸”ä¼šå ç”¨å¾ˆå¤šä½“ç§¯ï¼Œå¯ä»¥ç”¨<code>IgnorePlugin</code>å°†å…¶å¿½ç•¥æ‰ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>package.json</code>ã€<code>webpack.config.js</code>ã€<code>src</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;moment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.29.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'moment'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…ï¼ŒæŸ¥çœ‹è¾“å‡ºçš„èµ„æºã€‚</p> <p><img src="/other/webpack/middle-ignore-plugin.png" alt=""></p> <p>â€ƒâ€ƒä¿®æ”¹<code>webpack.config.js</code>ï¼Œå…¶ä¸­<code>resourceRegExp</code>åŒ¹é…èµ„æºæ–‡ä»¶ï¼Œ<code>contextRegExp</code>åŒ¹é…æ£€ç´¢ç›®å½•ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">resourceRegExp</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\.\/locale$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">contextRegExp</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">moment$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒå†æ¬¡è¿è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…ï¼ŒæŸ¥çœ‹è¾“å‡ºçš„èµ„æºã€‚</p> <p><img src="/other/webpack/middle-ignore-plugin-chunks.png" alt=""></p> <h3 id="dllplugin"><a href="#dllplugin" class="header-anchor">#</a> DllPlugin</h3> <p>â€ƒâ€ƒæ—©æœŸ<code>windows</code>ç³»ç»Ÿç”±äºå—é™äºè®¡ç®—æœºå†…å­˜ç©ºé—´è¾ƒå°çš„é—®é¢˜è€Œå‡ºç°çš„ä¸€ç§å†…å­˜ä¼˜åŒ–æ–¹æ³•å«åŠ¨æ€é“¾æ¥åº“ï¼Œå½“ä¸€æ®µç›¸åŒçš„å­ç¨‹åºè¢«å¤šä¸ªç¨‹åºè°ƒç”¨æ—¶ï¼Œä¸ºäº†å‡å°‘å†…å­˜æ¶ˆè€—ï¼Œå¯ä»¥å°†è¿™æ®µå­ç¨‹åºå­˜å‚¨ä¸ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå½“è¢«å¤šä¸ªç¨‹åºè°ƒç”¨æ—¶åªåœ¨å†…å­˜ä¸­ç”Ÿæˆå’Œä½¿ç”¨åŒä¸€ä¸ªå®ä¾‹ã€‚</p> <p>â€ƒâ€ƒ;<code>DllPlugin</code>å€Ÿé‰´äº†æ­¤æ€è·¯ï¼Œå¯¹äºç¬¬ä¸‰æ–¹æ¨¡å—æˆ–è€…ä¸€äº›ä¸å¸¸å˜åŒ–çš„æ¨¡å—ï¼Œå¯ä»¥å°†ä»–ä»¬é¢„å…ˆç¼–è¯‘å’Œæ‰“åŒ…ï¼Œç„¶ååœ¨é¡¹ç›®ä¸­å®é™…æ„å»ºè¿‡ç¨‹ä¸­ç›´æ¥å–ç”¨å³å¯ã€‚é¢„å…ˆæ‰“åŒ…çš„æ—¶å€™è¿˜ä¼šé™„åŠ ç”Ÿæˆä¸€ä»½æ¨¡å—æ¸…å•ï¼Œæ­¤æ¸…å•å°†ä¼šåœ¨å·¥ç¨‹ä¸šåŠ¡æ¨¡å—æ‰“åŒ…æ—¶èµ·åˆ°é“¾æ¥å’Œç´¢å¼•çš„ä½œç”¨ã€‚</p> <p>â€ƒâ€ƒ;<code>DllPlugin</code>å’Œ<code>Code Splitting</code>ç±»ä¼¼ï¼Œéƒ½å¯ä»¥ç”¨æ¥æå–å…¬å…±æ¨¡å—ï¼Œä½†æ˜¯ä¹Ÿæœ‰æœ¬è´¨åŒºåˆ«ã€‚<code>Code Splitting</code>æ˜¯è®¾ç½®ä¸€äº›ç‰¹å®šçš„è§„åˆ™å¹¶åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­æ ¹æ®è§„åˆ™æå–æ¨¡å—ã€‚<code>DllPlugin</code>åˆ™æ˜¯å°†<code>vendor</code>å®Œå…¨æ‹†åˆ†å‡ºæ¥ï¼Œæœ‰è‡ªå·±çš„ä¸€æ•´å¥—<code>webpack</code>é…ç½®å¹¶ç‹¬ç«‹æ‰“åŒ…ï¼Œåœ¨å®é™…å·¥ç¨‹æ„å»ºæ—¶å°±ä¸å†å¯¹å®ƒè¿›è¡Œä»»ä½•å¤„ç†ï¼Œç›´æ¥å–ç”¨å³å¯ã€‚ç†è®ºä¸Š<code>DllPlugin</code>ä¼šæ¯”<code>Code Splitting</code>åœ¨æ‰“åŒ…é€Ÿåº¦ä¸Šæ›´å¿«ï¼Œä½†æ˜¯ä¹Ÿç›¸åº”çš„å¢åŠ äº†é…ç½®ä»¥åŠèµ„æºç®¡ç†çš„å¤æ‚åº¦ã€‚å¯ä»¥ç†è§£ä¸º<code>DllPlugin</code>é€šè¿‡ä¸¤æ¬¡æ‰“åŒ…æ¥å–ä»£ä¸€æ¬¡æ‰“åŒ…ï¼Œç†è®ºä¸Šé€Ÿåº¦æ›´å¿«ï¼Œç¬¬ä¸€æ¬¡æ‰“åŒ…æ˜¯é’ˆå¯¹ä¸å¸¸å˜åŒ–çš„æ¨¡å—ï¼Œç¬¬äºŒæ¬¡æ‰“åŒ…åˆ™æ˜¯é’ˆå¯¹ä¸šåŠ¡æ¨¡å—ã€‚</p> <h4 id="dll-æ‰“åŒ…"><a href="#dll-æ‰“åŒ…" class="header-anchor">#</a> dll æ‰“åŒ…</h4> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>webpack.config.js</code>ã€<code>package.json</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€<code>index.html</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.6.12&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token string">'vue'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main.js'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒé¦–å…ˆä¸ºåŠ¨æ€é“¾æ¥åº“å•ç‹¬åˆ›å»ºä¸€ä¸ª<code>webpack</code>é…ç½®æ–‡ä»¶ï¼Œå°†å…¶å‘½åä¸º<code>webpack.dll.config.js</code>ã€‚å…¶ä¸­<code>output.filename</code>ä¸ºåŠ¨æ€é“¾æ¥åº“çš„åç§°ï¼Œ<code>output.path</code>ä¸ºåŠ¨æ€é“¾æ¥åº“çš„è¾“å‡ºè·¯å¾„ï¼Œ<code>output.library</code>å¿…é¡»å’Œ<code>DllPlugin</code>ä¸­çš„<code>name</code>ä¸€è‡´ã€‚<code>DllPlugin</code>ä¸­çš„<code>path</code>ä¸ºåŠ¨æ€é“¾æ¥åº“çš„æ¨¡å—æ¸…å•çš„è¾“å‡ºè·¯å¾„ï¼Œ<code>path</code>ä¸º<code>manifest.json</code>æ–‡ä»¶ä¸­<code>name</code>å­—æ®µçš„å€¼ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.dll.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> dllAssetPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token string">'dll'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> dllLibraryName <span class="token operator">=</span> <span class="token string">'dll'</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> dllAssetPath<span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'dll.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> dllLibraryName<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> dllLibraryName<span class="token punctuation">,</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>dllAssetPath<span class="token punctuation">,</span> <span class="token string">'manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒç„¶åé…ç½®<code>package.json</code>ï¼Œæ–°å¢ä¸€æ¡è„šæœ¬å‘½ä»¤ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dll&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.dll.config.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>dll</code>è„šæœ¬å‘½ä»¤ï¼Œå°†åœ¨<code>dist</code>ç›®å½•ä¸‹<code>dll</code>æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆ<code>dll.js</code>å’Œ<code>manifest.json</code>ã€‚å…¶ä¸­<code>dll.js</code>ä¸­çš„å˜é‡åå°±æ˜¯ä¸Šè¿°é…ç½®ä¸­<code>output.library</code>ï¼Œ<code>manifest.json</code>ä¸­çš„<code>name</code>å°±æ˜¯ä¸Šè¿°<code>DllPlugin</code>ä¸­çš„<code>name</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// dist/dll/dll.js</span>
<span class="token keyword">var</span> dll <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span> <span class="token operator">...</span> <span class="token punctuation">)</span>

<span class="token comment">// dist/dll/manifest.json</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dll&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒæœ€åéœ€è¦åœ¨ä¸šåŠ¡ä»£ç ä¸­é“¾æ¥<code>dll.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">manifest</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist/dll/manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒé¡µé¢å¼•å…¥<code>script</code>å¦‚ä¸‹ï¼Œé¡µé¢æ‰§è¡Œåˆ°<code>dll.js</code>æ—¶ä¼šå£°æ˜å…¨å±€å˜é‡<code>dll</code>ï¼Œè€Œ<code>manifest</code>ç›¸å½“äºæ³¨å…¥<code>main.js</code>çš„èµ„æºåœ°å›¾ï¼Œ<code>main.js</code>ä¼šå…ˆé€šè¿‡<code>name</code>å­—æ®µæ‰¾åˆ°åä¸º<code>dll</code>çš„<code>library</code>ï¼Œæ•…åœ¨<code>webpack.dll.config.js</code>ä¸­<code>output.library</code>å¿…é¡»å’Œ<code>DllPlugin</code>ä¸­çš„<code>name</code>ä¸€è‡´ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./dll/dll.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./main.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><h4 id="id-é—®é¢˜"><a href="#id-é—®é¢˜" class="header-anchor">#</a> id é—®é¢˜</h4> <p>â€ƒâ€ƒæŸ¥çœ‹<code>manifest.json</code>ï¼Œå…¶ä¸­æ¯ä¸ªæ¨¡å—éƒ½æœ‰ä¸€ä¸ª<code>id</code>ï¼Œå…¶å€¼æ˜¯æŒ‰ç…§æ•°å­—é¡ºåºé€’å¢çš„ï¼Œ<code>main.js</code>ä»£ç åœ¨å¼•ç”¨<code>dll.js</code>ä¸­çš„æ¨¡å—çš„æ—¶å€™ä¹Ÿæ˜¯å¼•ç”¨æ•°å­—<code>id</code>ã€‚</p> <p>â€ƒâ€ƒå·¥ç¨‹æ‰“åŒ…åå¯èƒ½å­˜åœ¨<code>dll.js</code>ï¼ˆé€šè¿‡<code>DllPlugin</code>æ„å»ºï¼‰ã€<code>utils.js@[chunkhash].js</code>ã€<code>main.js</code>ã€‚å…¶ä¸­<code>dll.js</code>ä¸­åŒ…å«<code>vue</code>ï¼Œå…¶<code>id</code>ä¸º<code>5</code>ã€‚å½“å°è¯•æ·»åŠ æ›´å¤šçš„æ¨¡å—åˆ°<code>dll.js</code>ä¸­æ—¶ï¼Œé‡æ–°æ„å»ºå<code>vue</code>çš„<code>id</code>å˜ä¸º<code>6</code>ã€‚</p> <p>â€ƒâ€ƒç”±äº<code>utils</code>ä¹Ÿå¼•ç”¨äº†<code>vue</code>æ¨¡å—ï¼Œé‡æ–°æ„å»ºåå…¶<code>chunkhash</code>åˆ™ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯å…¶æœ¬èº«å†…å®¹å¹¶æœªæ”¹å˜ï¼Œè€Œåœ¨å®¢æˆ·ç«¯ç”¨æˆ·åªæœ‰é‡æ–°ä¸‹è½½èµ„æºã€‚</p> <p>â€ƒâ€ƒè§£å†³æ­¤é—®é¢˜çš„æ–¹å¼åˆ™ä½¿ç”¨<code>HashedModuleIdsPlugin</code>æ’ä»¶ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.dll.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> tree shaking</h3> <p>â€ƒâ€ƒ;<code>ES6 Module</code>çš„ä¾èµ–å…³ç³»çš„æ„å»ºæ˜¯åœ¨ä»£ç ç¼–è¯‘æ—¶è€Œéè¿è¡Œæ—¶ï¼ŒåŸºäºæ­¤ç‰¹æ€§ï¼Œ<code>webpack</code>æä¾›äº†<code>tree shaking</code>åŠŸèƒ½ï¼Œå®ƒå¯ä»¥åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­æ£€æµ‹å·¥ç¨‹ä¸­æ²¡æœ‰è¢«å¼•ç”¨çš„æ¨¡å—ï¼Œæ­¤éƒ¨åˆ†ä»£ç å°†æ°¸è¿œæ— æ³•è¢«æ‰§è¡Œåˆ°ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºâ€œæ­»ä»£ç â€ã€‚</p> <p>â€ƒâ€ƒ;<code>webpack</code>ä¼šå¯¹è¿™éƒ¨åˆ†ä»£ç è¿›è¡Œæ ‡è®°ï¼Œå¹¶åœ¨èµ„æºå‹ç¼©æ—¶å°†å®ƒä»¬ä»æœ€ç»ˆçš„<code>bundle</code>ä¸­å»æ‰ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹<code>webpack</code>æ‰“åŒ…æ—¶ä¼šå¯¹<code>bar</code>å‡½æ•°æ·»åŠ ä¸€ä¸ªæ ‡è®°ï¼Œç„¶åé€šè¿‡å‹ç¼©å·¥å…·æ¥å»é™¤æ­»ä»£ç ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./utils.js'</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// src/utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="/pages/other/webpack/upper.html">ä¸Šä¸€ç¯‡</a></p> <p><a href="/pages/other/webpack/lower.html">ä¸‹ä¸€ç¯‡</a></p> <h2 id="ğŸ‰-å†™åœ¨æœ€å"><a href="#ğŸ‰-å†™åœ¨æœ€å" class="header-anchor">#</a> ğŸ‰ å†™åœ¨æœ€å</h2> <p>ğŸ»ä¼™ä¼´ä»¬ï¼Œå¦‚æœä½ å·²ç»çœ‹åˆ°äº†è¿™é‡Œï¼Œè§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©åˆ°ä½ çš„è¯ä¸å¦¨ç‚¹èµğŸ‘æˆ– <a href="https://github.com/dongwei1125/blog" target="_blank" rel="noopener noreferrer">Star<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> âœ¨æ”¯æŒä¸€ä¸‹å“¦ï¼</p> <p>æ‰‹åŠ¨ç å­—ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡æ­£ğŸ’¬~</p> <p>ä½ çš„æ”¯æŒå°±æ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ğŸ’ª~</p> <p><a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> / <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer">Gitee<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://dongwei1125.github.io/" target="_blank" rel="noopener noreferrer">GitHub Pages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer">æ˜é‡‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer">CSDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ˜‰~</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">3/6/2022, 9:06:37 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0aa97f73.js" defer></script><script src="/assets/js/2.f850a8ef.js" defer></script><script src="/assets/js/62.66c23699.js" defer></script>
  </body>
</html>
