<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç† Webpack åŸºç¡€ï¼ˆä¸‹ï¼‰ | DonV</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/header.jpg">
    <meta name="description" content="A paper about JavaScript, HTML and CSS.">
    
    <link rel="preload" href="/assets/css/0.styles.87611319.css" as="style"><link rel="preload" href="/assets/js/app.0aa97f73.js" as="script"><link rel="preload" href="/assets/js/2.f850a8ef.js" as="script"><link rel="preload" href="/assets/js/61.0af6cf48.js" as="script"><link rel="prefetch" href="/assets/js/10.cb041c1b.js"><link rel="prefetch" href="/assets/js/11.1aadbcee.js"><link rel="prefetch" href="/assets/js/12.77cc8e56.js"><link rel="prefetch" href="/assets/js/13.7e8162d9.js"><link rel="prefetch" href="/assets/js/14.dea6ba67.js"><link rel="prefetch" href="/assets/js/15.a786d687.js"><link rel="prefetch" href="/assets/js/16.163edf25.js"><link rel="prefetch" href="/assets/js/17.3a0232cb.js"><link rel="prefetch" href="/assets/js/18.91bd2dd7.js"><link rel="prefetch" href="/assets/js/19.a36993f8.js"><link rel="prefetch" href="/assets/js/20.30dd9f79.js"><link rel="prefetch" href="/assets/js/21.5e3c83a3.js"><link rel="prefetch" href="/assets/js/22.88d5e321.js"><link rel="prefetch" href="/assets/js/23.b54a65a7.js"><link rel="prefetch" href="/assets/js/24.51df379f.js"><link rel="prefetch" href="/assets/js/25.79342bd2.js"><link rel="prefetch" href="/assets/js/26.643d5441.js"><link rel="prefetch" href="/assets/js/27.54b7d7b4.js"><link rel="prefetch" href="/assets/js/28.d01a4aee.js"><link rel="prefetch" href="/assets/js/29.7d932073.js"><link rel="prefetch" href="/assets/js/3.31ebf682.js"><link rel="prefetch" href="/assets/js/30.4c2f5636.js"><link rel="prefetch" href="/assets/js/31.b00c42d5.js"><link rel="prefetch" href="/assets/js/32.e9a0f488.js"><link rel="prefetch" href="/assets/js/33.f510b5fd.js"><link rel="prefetch" href="/assets/js/34.6e78f32f.js"><link rel="prefetch" href="/assets/js/35.04d666a2.js"><link rel="prefetch" href="/assets/js/36.900a3beb.js"><link rel="prefetch" href="/assets/js/37.19ddf8d7.js"><link rel="prefetch" href="/assets/js/38.35f899bd.js"><link rel="prefetch" href="/assets/js/39.fe9ea525.js"><link rel="prefetch" href="/assets/js/4.3c7083a8.js"><link rel="prefetch" href="/assets/js/40.0d116ce0.js"><link rel="prefetch" href="/assets/js/41.6cdce4cf.js"><link rel="prefetch" href="/assets/js/42.ab0bd0d5.js"><link rel="prefetch" href="/assets/js/43.66c8f8eb.js"><link rel="prefetch" href="/assets/js/44.ac02981e.js"><link rel="prefetch" href="/assets/js/45.479814b0.js"><link rel="prefetch" href="/assets/js/46.29956259.js"><link rel="prefetch" href="/assets/js/47.a89cf7d2.js"><link rel="prefetch" href="/assets/js/48.859e3502.js"><link rel="prefetch" href="/assets/js/49.d0fa0b25.js"><link rel="prefetch" href="/assets/js/5.206809f3.js"><link rel="prefetch" href="/assets/js/50.d051084c.js"><link rel="prefetch" href="/assets/js/51.fa831e6a.js"><link rel="prefetch" href="/assets/js/52.3ed98760.js"><link rel="prefetch" href="/assets/js/53.016b1c3c.js"><link rel="prefetch" href="/assets/js/54.c88e06c5.js"><link rel="prefetch" href="/assets/js/55.937bfe09.js"><link rel="prefetch" href="/assets/js/56.03003660.js"><link rel="prefetch" href="/assets/js/57.8bcda68a.js"><link rel="prefetch" href="/assets/js/58.286692ba.js"><link rel="prefetch" href="/assets/js/59.fbfe98aa.js"><link rel="prefetch" href="/assets/js/6.6f9d9bda.js"><link rel="prefetch" href="/assets/js/60.0975844e.js"><link rel="prefetch" href="/assets/js/62.66c23699.js"><link rel="prefetch" href="/assets/js/63.7fda9b3f.js"><link rel="prefetch" href="/assets/js/7.6f64fba1.js"><link rel="prefetch" href="/assets/js/8.a163349f.js"><link rel="prefetch" href="/assets/js/9.9058d3cc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.87611319.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/header.jpg" alt="DonV" class="logo"> <span class="site-name can-hide">DonV</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/pages/js/nav.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/pages/html/nav.html" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/pages/css/nav.html" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/pages/other/nav.html" class="nav-link">
  å…¶å®ƒ
</a></div><div class="nav-item"><a href="/pages/app/nav.html" class="nav-link">
  åº”ç”¨
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…³äº" class="dropdown-title"><span class="title">å…³äº</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…³äº" class="mobile-dropdown-title"><span class="title">å…³äº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/~dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/pages/js/nav.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/pages/html/nav.html" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/pages/css/nav.html" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/pages/other/nav.html" class="nav-link">
  å…¶å®ƒ
</a></div><div class="nav-item"><a href="/pages/app/nav.html" class="nav-link">
  åº”ç”¨
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…³äº" class="dropdown-title"><span class="title">å…³äº</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…³äº" class="mobile-dropdown-title"><span class="title">å…³äº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/~dongwei1125" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç† Webpack åŸºç¡€ï¼ˆä¸‹ï¼‰</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/other/webpack/lower.html#webpack-æ’ä»¶" class="sidebar-link">webpack æ’ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/other/webpack/lower.html#æ„å»ºæµç¨‹" class="sidebar-link">æ„å»ºæµç¨‹</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/lower.html#è‡ªå®šä¹‰æ’ä»¶" class="sidebar-link">è‡ªå®šä¹‰æ’ä»¶</a></li></ul></li><li><a href="/pages/other/webpack/lower.html#å¼€å‘ä¼˜åŒ–" class="sidebar-link">å¼€å‘ä¼˜åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/other/webpack/lower.html#webpack-æ’ä»¶-2" class="sidebar-link">webpack æ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/lower.html#webpack-merge" class="sidebar-link">webpack-merge</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/lower.html#æ¨¡å—çƒ­æ›¿æ¢" class="sidebar-link">æ¨¡å—çƒ­æ›¿æ¢</a></li></ul></li><li><a href="/pages/other/webpack/lower.html#æ‰“åŒ…å·¥å…·" class="sidebar-link">æ‰“åŒ…å·¥å…·</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/other/webpack/lower.html#rollup" class="sidebar-link">RollUp</a></li><li class="sidebar-sub-header"><a href="/pages/other/webpack/lower.html#parcel" class="sidebar-link">Parcel</a></li></ul></li><li><a href="/pages/other/webpack/lower.html#ğŸ‰-å†™åœ¨æœ€å" class="sidebar-link">ğŸ‰ å†™åœ¨æœ€å</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç†-webpack-åŸºç¡€-ä¸‹"><a href="#ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç†-webpack-åŸºç¡€-ä¸‹" class="header-anchor">#</a> ä¸‡å­—é•¿æ–‡ç³»ç»Ÿæ¢³ç† Webpack åŸºç¡€ï¼ˆä¸‹ï¼‰</h1> <p><img src="/other/webpack/banner.jpg" alt=""></p> <h2 id="webpack-æ’ä»¶"><a href="#webpack-æ’ä»¶" class="header-anchor">#</a> webpack æ’ä»¶</h2> <h3 id="æ„å»ºæµç¨‹"><a href="#æ„å»ºæµç¨‹" class="header-anchor">#</a> æ„å»ºæµç¨‹</h3> <p>â€ƒâ€ƒ;<code>webpack</code> <code>loader</code>æ˜¯è´Ÿè´£ä¸åŒç±»å‹æ–‡ä»¶çš„è½¬è¯‘ï¼Œå°†å…¶è½¬æ¢ä¸º<code>webpack</code>èƒ½å¤Ÿæ¥æ”¶çš„æ¨¡å—ã€‚è€Œ<code>webpack</code>æ’ä»¶åˆ™ä¸<code>loader</code>æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œ<code>webpack</code>æ’ä»¶æ˜¯è´¯ç©¿æ•´ä¸ªæ„å»ºæµç¨‹çš„ï¼Œæ„å»ºæµç¨‹ä¸­çš„å„ä¸ªé˜¶æ®µä¼šè§¦å‘ä¸åŒçš„é’©å­å‡½æ•°ï¼Œåœ¨ä¸åŒçš„é’©å­å‡½æ•°ä¸­åšä¸€äº›å¤„ç†å°±æ˜¯<code>webpack</code>æ’ä»¶è¦åšçš„äº‹æƒ…ã€‚</p> <p>â€ƒâ€ƒ;<code>webpack</code>ä¸€æ¬¡å®Œæ•´çš„æ‰“åŒ…æ„å»ºæµç¨‹å¦‚ä¸‹ã€‚</p> <ul><li>åˆå§‹åŒ–å‚æ•°ï¼šå°†<code>cli</code>å‘½ä»¤è¡Œå‚æ•°ä¸<code>webpack</code>é…ç½®æ–‡ä»¶åˆå¹¶ã€è§£æå¾—åˆ°å‚æ•°å¯¹è±¡</li> <li>åŠ è½½æ’ä»¶ï¼šå‚æ•°å¯¹è±¡ä¼ ç»™<code>webpack</code>åˆå§‹åŒ–ç”Ÿæˆ<code>compiler</code>å¯¹è±¡ï¼Œæ‰§è¡Œé…ç½®æ–‡ä»¶ä¸­çš„æ’ä»¶å®ä¾‹åŒ–è¯­å¥ï¼ˆä¾‹å¦‚<code>new HtmlWebpackPlugin()</code>ï¼‰ï¼Œä¸º<code>webpack</code>äº‹ä»¶æµæŒ‚ä¸Šè‡ªå®šä¹‰<code>hooks</code></li> <li>å¼€å§‹ç¼–è¯‘ï¼šæ‰§è¡Œ<code>compiler</code>å¯¹è±¡çš„<code>run</code>æ–¹æ³•å¼€å§‹ç¼–è¯‘ï¼Œæ¯æ¬¡<code>run</code>ç¼–è¯‘éƒ½ä¼šç”Ÿæˆä¸€ä¸ª<code>compilation</code>å¯¹è±¡</li> <li>ç¡®å®šå…¥å£ï¼šè§¦å‘<code>compiler</code>å¯¹è±¡çš„<code>make</code>æ–¹æ³•ï¼Œå¼€å§‹åˆ†æå…¥å£æ–‡ä»¶</li> <li>ç¼–è¯‘æ¨¡å—ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨<code>loader</code>å¯¹æ¨¡å—è¿›è¡Œè½¬è¯‘ï¼Œå†æŸ¥æ‰¾æ¨¡å—ä¾èµ–çš„æ¨¡å—å¹¶è½¬è¯‘ï¼Œé€’å½’å®Œæˆæ‰€æœ‰æ¨¡å—çš„è½¬è¯‘</li> <li>å®Œæˆç¼–è¯‘ï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªçš„<code>chunk</code>ï¼Œæ‰§è¡Œ<code>compilation</code>çš„<code>seal</code>æ–¹æ³•å¯¹æ¯ä¸ª<code>chunk</code>è¿›è¡Œæ•´ç†ã€ä¼˜åŒ–ã€å°è£…</li> <li>è¾“å‡ºèµ„æºï¼šæ‰§è¡Œ<code>compiler</code>çš„<code>emitAssets</code>æ–¹æ³•æŠŠç”Ÿæˆçš„æ–‡ä»¶è¾“å‡ºåˆ°<code>output</code>çš„ç›®å½•ä¸­</li></ul> <p><img src="/other/webpack/lower-process.png" alt=""></p> <h3 id="è‡ªå®šä¹‰æ’ä»¶"><a href="#è‡ªå®šä¹‰æ’ä»¶" class="header-anchor">#</a> è‡ªå®šä¹‰æ’ä»¶</h3> <p>â€ƒâ€ƒ;<code>webpack</code>æ’ä»¶ç‰¹ç‚¹å¦‚ä¸‹ã€‚</p> <ul><li>ç‹¬ç«‹çš„<code>js</code>æ¨¡å—ï¼Œæš´éœ²ç›¸åº”çš„å‡½æ•°</li> <li>å‡½æ•°åŸå‹ä¸Šçš„<code>apply</code>æ–¹æ³•ä¼šæ³¨å…¥<code>compiler</code>å¯¹è±¡</li> <li><code>compiler</code>å¯¹è±¡ä¸ŠæŒ‚è½½äº†ç›¸åº”çš„<code>webpack</code>é’©å­</li> <li>äº‹ä»¶é’©å­çš„å›è°ƒå‡½æ•°é‡Œèƒ½æ‹¿åˆ°ç¼–è¯‘åçš„<code>compilation</code>å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¼‚æ­¥é’©å­è¿˜èƒ½æ‹¿åˆ°ç›¸åº”çš„<code>callback</code>å‡½æ•°</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">CustomDlugins</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'CustomDlugins'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> CustomDlugins
</code></pre></div><p>â€ƒâ€ƒå¤§å¤šæ•°é¢å‘ç”¨æˆ·çš„æ’ä»¶éƒ½é¦–å…ˆåœ¨<code>compiler</code>ä¸Šæ³¨å†Œï¼Œå¦‚ä¸‹ä¸º<code>compiler</code>ä¸Šæš´éœ²çš„ä¸€äº›å¸¸ç”¨çš„é’©å­ã€‚</p> <table><thead><tr><th style="text-align:center;">é’©å­</th> <th style="text-align:center;">ç±»å‹</th> <th style="text-align:center;">ä½œç”¨</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>run</code></td> <td style="text-align:center;"><code>AsyncSeriesHook</code></td> <td style="text-align:center;">åœ¨ç¼–è¯‘å™¨å¼€å§‹è¯»å–è®°å½•å‰æ‰§è¡Œ</td></tr> <tr><td style="text-align:center;"><code>compiler</code></td> <td style="text-align:center;"><code>SyncHook</code></td> <td style="text-align:center;">åœ¨ä¸€ä¸ªæ–°çš„<code>compilation</code>åˆ›å»ºä¹‹å‰æ‰§è¡Œ</td></tr> <tr><td style="text-align:center;"><code>compilation</code></td> <td style="text-align:center;"><code>SyncHook</code></td> <td style="text-align:center;">åœ¨ä¸€æ¬¡<code>compilation</code>åˆ›å»ºåæ‰§è¡Œæ’ä»¶</td></tr> <tr><td style="text-align:center;"><code>make</code></td> <td style="text-align:center;"><code>AsyncSeriesHook</code></td> <td style="text-align:center;">å®Œæˆä¸€æ¬¡ç¼–è¯‘ä¹‹å‰æ‰§è¡Œ</td></tr> <tr><td style="text-align:center;"><code>emit</code></td> <td style="text-align:center;"><code>AsyncSeriesHook</code></td> <td style="text-align:center;">åœ¨ç”Ÿæˆåˆ°<code>output</code>ç›®å½•ä¹‹å‰æ‰§è¡Œï¼Œå›è°ƒå‚æ•°<code>compilation</code></td></tr> <tr><td style="text-align:center;"><code>afterEmit</code></td> <td style="text-align:center;"><code>AsyncSeriesHook</code></td> <td style="text-align:center;">åœ¨ç”Ÿæˆæ–‡ä»¶åˆ°<code>output</code>ç›®å½•ä¹‹åæ‰§è¡Œ</td></tr> <tr><td style="text-align:center;"><code>assetEmitted</code></td> <td style="text-align:center;"><code>AsyncSeriesHook</code></td> <td style="text-align:center;">ç”Ÿæˆæ–‡ä»¶çš„æ—¶å€™æ‰§è¡Œï¼Œæä¾›è®¿é—®äº§å‡ºæ–‡ä»¶ä¿¡æ¯çš„å…¥å£ï¼Œå›è°ƒå‚æ•°<code>file</code>ã€<code>info</code></td></tr> <tr><td style="text-align:center;"><code>done</code></td> <td style="text-align:center;"><code>AsyncSeriesHook</code></td> <td style="text-align:center;">ä¸€æ¬¡ç¼–è¯‘å®Œæˆåæ‰§è¡Œï¼Œå›è°ƒå‚æ•°<code>stats</code></td></tr></tbody></table> <p>â€ƒâ€ƒè‡ªå®šä¹‰æ–‡ä»¶æ¸…å•æ’ä»¶ï¼Œæ‰“åŒ…åè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶æ¸…å•ï¼Œè®°å½•æ–‡ä»¶åˆ—è¡¨ã€æ–‡ä»¶æ•°é‡ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>package.json</code>ã€<code>webpack.config.js</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒç„¶åç»§ç»­åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º<code>plugins</code>æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æ–°å»º<code>FileListPlugin.js</code>æ–‡ä»¶ï¼Œ<code>webpack.config.js</code>ä¸­å¼•å…¥æ’ä»¶ã€‚</p> <p>â€ƒâ€ƒæ³¨æ„æ­¤åœºæ™¯è¦åœ¨æ–‡ä»¶ç”Ÿæˆåˆ°<code>dist</code>ç›®å½•ä¹‹å‰è¿›è¡Œï¼Œæ‰€ä»¥è¦æ³¨å†Œçš„æ˜¯<code>compiler</code>ä¸Šçš„<code>emit</code>é’©å­ã€‚<code>emit</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥ä¸²è¡Œé’©å­ï¼Œç”¨<code>tapAsync</code>æ¥æ³¨å†Œã€‚</p> <p>â€ƒâ€ƒ;<code>emit</code>çš„å›è°ƒå‡½æ•°é‡Œå¯ä»¥æ‹¿åˆ°<code>compilation</code>å¯¹è±¡ï¼Œæ‰€æœ‰å¾…ç”Ÿæˆçš„æ–‡ä»¶éƒ½åœ¨å…¶<code>assets</code>å±æ€§ä¸Šã€‚é€šè¿‡<code>compilation.assets</code>è·å–æ–‡ä»¶åˆ—è¡¨ï¼Œæ•´ç†åå°†å…¶å†™å…¥æ–°æ–‡ä»¶å‡†å¤‡è¾“å‡ºã€‚</p> <p>â€ƒâ€ƒæœ€åå†å¾€<code>compilation.assets</code>æ·»åŠ æ–°æ–‡ä»¶ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// plugins/FileListPlugin.js</span>
<span class="token keyword">class</span> <span class="token class-name">FileListPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>filename <span class="token operator">=</span> options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>filename <span class="token operator">?</span> options<span class="token punctuation">.</span>filename <span class="token operator">:</span> <span class="token string">'FILELIST.md'</span>
  <span class="token punctuation">}</span>

  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'FileListPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>compilation<span class="token punctuation">.</span>assets<span class="token punctuation">)</span>
      <span class="token keyword">const</span> length <span class="token operator">=</span> keys<span class="token punctuation">.</span>length

      <span class="token keyword">var</span> content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"># </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'s'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> emitted by webpack\n\n</span><span class="token template-punctuation string">`</span></span>

      keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        content <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">- </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>filename<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">source</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> content
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">size</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> content<span class="token punctuation">.</span>length
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>

      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> FileListPlugin

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> FileListPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./plugins/FileListPlugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">FileListPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'filelist.md'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å¼€å‘ä¼˜åŒ–"><a href="#å¼€å‘ä¼˜åŒ–" class="header-anchor">#</a> å¼€å‘ä¼˜åŒ–</h2> <h3 id="webpack-æ’ä»¶-2"><a href="#webpack-æ’ä»¶-2" class="header-anchor">#</a> webpack æ’ä»¶</h3> <h4 id="webpack-dashboard"><a href="#webpack-dashboard" class="header-anchor">#</a> webpack-dashboard</h4> <p>â€ƒâ€ƒ;<code>webpack-dashboard</code>æ˜¯ç”¨æ¥ä¼˜åŒ–<code>webpack</code>æ—¥å¿—çš„å·¥å…·ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>webpack.config.js</code>ã€<code>package.json</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.6.12&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-dashboard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> DashboardPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dashboard/plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">DashboardPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'vue'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vue<span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒè‹¥è¦ä½¿<code>webpack-dashboard</code>ç”Ÿæ•ˆï¼Œè¿˜è¦ä¿®æ”¹åŸæœ‰çš„å¯åŠ¨å‘½ä»¤ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dashboard -- webpack&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>å‘½ä»¤åï¼Œæ§åˆ¶å°ä¼šæ‰“å°å¦‚ä¸‹å†…å®¹ï¼Œå·¦ä¸Šè§’<code>Log</code>ä¸º<code>webpack</code>æœ¬èº«çš„æ—¥å¿—ï¼Œå·¦ä¸‹è§’<code>Modules</code>åˆ™æ˜¯æ­¤æ¬¡å‚ä¸æ‰“åŒ…çš„æ¨¡å—ï¼Œå¯ä»¥æŸ¥çœ‹æ¨¡å—çš„å ç”¨ä½“ç§¯å’Œæ¯”ä¾‹ï¼Œå³ä¸‹è§’<code>Problems</code>å¯ä»¥æŸ¥çœ‹æ„å»ºè¿‡ç¨‹çš„è­¦å‘Šå’Œé”™è¯¯ç­‰ã€‚</p> <p><img src="/other/webpack/lower-webpack-dashboard.png" alt=""></p> <h4 id="speed-measure-webpack-plugin"><a href="#speed-measure-webpack-plugin" class="header-anchor">#</a> speed-measure-webpack-plugin</h4> <p>â€ƒâ€ƒ;<code>speed-measure-webpack-plugin</code>ï¼ˆ<code>SMP</code>ï¼‰å¯ä»¥åˆ†æå‡º<code>webpack</code>æ•´ä¸ªæ‰“åŒ…è¿‡ç¨‹ä¸­åœ¨å„ä¸ª<code>loader</code>å’Œ<code>plugin</code>ä¸Šè€—è´¹çš„æ—¶é—´ï¼Œæ ¹æ®åˆ†æç»“æœå¯ä»¥æ‰¾å‡ºå“ªäº›æ„å»ºæ­¥éª¤è€—æ—¶è¾ƒé•¿ï¼Œä»¥ä¾¿äºä¼˜åŒ–å’Œåå¤æµ‹è¯•ã€‚</p> <p>â€ƒâ€ƒ;<code>SMP</code>ä½¿ç”¨æ—¶éœ€è¦æŠŠå®ƒçš„<code>wrap</code>æ–¹æ³•åŒ…è£¹åœ¨<code>webpack</code>çš„é…ç½®å¯¹è±¡å¤–é¢ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> SpeedMeasurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'speed-measure-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> smp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeedMeasurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> smp<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@babel/core&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.2.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@babel/preset-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.3.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;babel-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.0.5&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;speed-measure-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.2.2&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬æ‰“åŒ…åæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹å‡º<code>babel-loader</code>è½¬è¯‘æ—¶è€—è´¹äº†<code>1.16</code>ç§’ã€‚</p> <p><img src="/other/webpack/lower-speed-measure-webpack-plugin.png" alt=""></p> <h3 id="webpack-merge"><a href="#webpack-merge" class="header-anchor">#</a> webpack-merge</h3> <p>â€ƒâ€ƒ;<code>webpack-merge</code>ç”¨äºéœ€è¦é…ç½®å¤šç§æ‰“åŒ…ç¯å¢ƒçš„é¡¹ç›®ã€‚</p> <p>â€ƒâ€ƒè‹¥é¡¹ç›®åŒ…æ‹¬æœ¬åœ°ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒå¯¹åº”çš„é…ç½®éƒ½ä¸åŒï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å…¬å…±çš„éƒ¨åˆ†ï¼Œåˆ™éœ€è¦å°†å…¬å…±éƒ¨åˆ†æå–å‡ºæ¥ã€‚</p> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>package.json</code>ã€<code>src</code>å’Œ<code>build</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>index.html</code>ã€<code>main.js</code>ï¼Œ<code>build</code>ä¸‹åŒ…æ‹¬<code>webpack.base.conf.js</code>ã€<code>webpack.dev.conf.js</code>å’Œ<code>webpack.prod.conf.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --config=./build/webpack.dev.conf.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config=./build/webpack.prod.conf.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.1.14&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-merge&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;file-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.1.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;css-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.28.7&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;style-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.19.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;html-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>

<span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>â€ƒâ€ƒå…¶ä¸­å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„å…¬å…±é…ç½®å¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// build/webpack.base.conf.js</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒå¼€å‘ç¯å¢ƒçš„é…ç½®å¦‚ä¸‹ï¼Œå…¶ä¸­<code>webpack-merge</code>åœ¨åˆå¹¶<code>module.rules</code>çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä»¥<code>test</code>å±æ€§ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œå½“å‘ç°æœ‰ç›¸åŒé¡¹å‡ºç°æ—¶ä¼šä»¥åé¢çš„è§„åˆ™è¦†ç›–å‰é¢çš„è§„åˆ™ï¼Œå¦‚æ­¤å°±ä¸å¿…æ·»åŠ å†—ä½™ä»£ç ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹å¼€å‘ç¯å¢ƒçš„<code>loader</code>åŒ…æ‹¬<code>file-loader</code>ã€<code>css-loader</code>ã€<code>babel-loader</code>ï¼Œå…¶ä¸­<code>css-loader</code>å’Œ<code>babel-loader</code>è¦†ç›–äº†ä¹‹å‰<code>loader</code>å¹¶å¼€å¯äº†<code>sourceMap</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// build/webpack.dev.conf.js</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.conf.js'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> merge<span class="token punctuation">.</span><span class="token function">smart</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">sourceMap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒç”Ÿäº§ç¯å¢ƒé…ç½®å¦‚ä¸‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// build/webpack.prod.conf.js</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.conf.js'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> merge<span class="token punctuation">.</span><span class="token function">smart</span><span class="token punctuation">(</span>baseConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].[chunkhash:8].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æ¨¡å—çƒ­æ›¿æ¢"><a href="#æ¨¡å—çƒ­æ›¿æ¢" class="header-anchor">#</a> æ¨¡å—çƒ­æ›¿æ¢</h3> <p>â€ƒâ€ƒè‡ªåŠ¨åˆ·æ–°ï¼ˆ<code>live reload</code>ï¼‰å³åªè¦ä»£ç æ”¹åŠ¨å°±ä¼šé‡æ–°æ„å»ºï¼Œå†è§¦å‘ç½‘é¡µåˆ·æ–°ã€‚è€Œ<code>webpack</code>åœ¨æ­¤åŸºç¡€ä¸Šåˆè¿›äº†ä¸€æ­¥ï¼Œå¯ä»¥åœ¨ä¸åˆ·æ–°ç½‘é¡µçš„å‰æä¸‹å¾—åˆ°æœ€æ–°çš„ä»£ç æ”¹åŠ¨ï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ï¼ˆ<code>Hot Module Replacementï¼ŒHMR</code>ï¼‰ã€‚</p> <h4 id="é…ç½®"><a href="#é…ç½®" class="header-anchor">#</a> é…ç½®</h4> <p>â€ƒâ€ƒ;<code>HMR</code>éœ€æ‰‹åŠ¨é…ç½®å¼€å¯ï¼Œå¦‚ä¸‹é…ç½®ä¼šä¸ºæ¯ä¸ªæ¨¡å—ç»‘å®šä¸Š<code>module.hot</code>å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†<code>HMR</code>çš„<code>API</code>ï¼ˆä¾‹å¦‚å¯ä»¥å¯¹ç‰¹å®šæ¨¡å—å¼€å¯æˆ–å…³é—­<code>HMR</code>ç­‰ï¼‰ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒé…ç½®åè¿˜éœ€è¦æ‰‹åŠ¨è°ƒç”¨<code>module.hot</code>ä¸Šçš„<code>API</code>æ¥å¼€å¯<code>HMR</code>ã€‚å¦‚ä¸‹è‹¥<code>main.js</code>æ˜¯åº”ç”¨çš„å…¥å£ï¼Œåˆ™å¯ä»¥å°†è°ƒç”¨<code>HMR API</code>çš„ä»£ç æ”¾åœ¨æ­¤å…¥å£ä¸­ï¼Œé‚£ä¹ˆ<code>main.js</code>åŠå…¶ä¾èµ–çš„æ‰€æœ‰æ¨¡å—éƒ½ä¼šå¼€å¯<code>HMR</code>ã€‚å½“å‘ç°æ¨¡å—æœ‰æ”¹åŠ¨æ—¶ï¼Œ<code>HMR</code>ä¼šä½¿åº”ç”¨åœ¨å½“å‰ç¯å¢ƒä¸‹é‡æ–°æ‰§è¡Œ<code>main.js</code>ï¼Œä½†æ˜¯é¡µé¢æœ¬èº«ä¸ä¼šåˆ·æ–°ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token operator">...</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒè‹¥åº”ç”¨çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œåˆ™ä¸æ¨èä½¿ç”¨<code>webpack</code>çš„<code>HMR</code>ï¼Œå› ä¸º<code>HMR</code>è§¦å‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæœ‰é¢„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œå»ºè®®å¼€å‘è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„<code>HMR</code>è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚<code>vue-loader</code>ã€<code>react-hot-loader</code>ã€‚</p> <h4 id="å¼€å¯-hmr"><a href="#å¼€å¯-hmr" class="header-anchor">#</a> å¼€å¯ HMR</h4> <p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹ä¸º<code>webpack.config.js</code>ã€<code>package.json</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹åŒ…æ‹¬<code>main.js</code>ã€<code>index.html</code>å’Œ<code>utils.js</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.1.14&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;html-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> logToHtml <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./utils.js'</span>

<span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token function">logToHtml</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token comment">// src/utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">logToHtml</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>dev</code>è„šæœ¬å‘½ä»¤åæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼Œå•å‡»<code>http://localhost:8080/</code>æ‰“å¼€<code>html</code>ã€‚</p> <p><img src="/other/webpack/lower-hmr.png" alt=""></p> <p>â€ƒâ€ƒ;<code>html</code>è¾“å‡ºæ•´æ•°å¹¶æ¯ç§’åŠ <code>1</code>ï¼Œä¿®æ”¹<code>utils.js</code>å¦‚ä¸‹ï¼Œä¿å­˜åæŸ¥çœ‹<code>html</code>ï¼Œé¡µé¢åˆ·æ–°ï¼Œä¹‹å‰è®¡æ•°çš„<code>count</code>é‡æ–°å¼€å§‹ç”±<code>0</code>æ¯ç§’åŠ <code>1</code>ï¼ˆæœªå±€éƒ¨åˆ·æ–°ï¼‰ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">logToHtml</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count update: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒ;<code>utils.js</code>è¿˜åŸï¼Œ<code>main.js</code>æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå¼€å¯<code>HMR</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token operator">...</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â€ƒâ€ƒç„¶åå†æ¬¡ä¿®æ”¹<code>utils.js</code>ï¼ŒæŸ¥çœ‹<code>html</code>æœªåˆ·æ–°ï¼Œè€Œæ˜¯å±€éƒ¨æ›´æ–°äº†ï¼Œ<code>count</code>æ•°å€¼ä¹Ÿæ˜¯åœ¨ä¹‹å‰åŸºç¡€ä¸ŠåŠ <code>1</code>ã€‚</p> <p>â€ƒâ€ƒä½†æ˜¯åˆä¼šå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼Œå½“å‰çš„<code>html</code>å·²ç»æœ‰äº†ä¸€ä¸ª<code>setInterval</code>ï¼Œè€Œ<code>HMR</code>ååˆä¼šæ·»åŠ æ–°çš„<code>setInterval</code>ï¼Œå¹¶æœªå¯¹ä¹‹å‰çš„è¿›è¡Œæ¸…é™¤ï¼Œå¯¼è‡´æœ€å<code>html</code>ä¸Šæœ‰ä¸åŒçš„æ•°å­—é—ªæ¥é—ªå»ã€‚</p> <p>â€ƒâ€ƒä¸ºäº†é¿å…æ­¤é—®é¢˜ï¼Œå½“<code>main.js</code>å‘ç”Ÿæ”¹å˜åˆ™åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œé˜²æ­¢æœ‰å¤šä¸ªå®šæ—¶å™¨ï¼Œä½†æ˜¯å¯¹äºå…¶ä»–æ¨¡å—åˆ™ç»§ç»­å¼€å¯<code>HMR</code>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// src/main.js</span>
<span class="token operator">...</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">decline</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./utils.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="hmr-æµç¨‹"><a href="#hmr-æµç¨‹" class="header-anchor">#</a> HMR æµç¨‹</h4> <p>â€ƒâ€ƒé¡¹ç›®åˆæ¬¡è¿è¡Œ<code>dev</code>è„šæœ¬ï¼Œé¦–å…ˆä¼šè¿›è¡Œæ„å»ºæ‰“åŒ…ï¼ŒåŒæ—¶å°†å¦‚ä½•æ›´æ–°æ¨¡å—å’Œæ¥æ”¶åæ˜¯å¦æ›´æ–°æ¨¡å—çš„ä»£ç æ³¨å…¥åˆ°<code>bundle</code>ä¸­ã€‚</p> <p>â€ƒâ€ƒè€Œ<code>bundle</code>ä¼šè¢«å†™å…¥åˆ°å†…å­˜ä¸­ï¼Œä¸å†™å…¥ç£ç›˜çš„åŸå› æ˜¯å› ä¸ºè®¿é—®å†…å­˜ä¸­çš„ä»£ç æ¯”è®¿é—®ç£ç›˜ä¸­çš„æ–‡ä»¶å¿«ï¼Œå¹¶ä¸”ä¹Ÿå‡å°‘äº†ä»£ç å†™å…¥æ–‡ä»¶çš„æ€§èƒ½å¼€é”€ã€‚</p> <p><img src="/other/webpack/lower-hmr-process.png" alt=""></p> <p>â€ƒâ€ƒç´§æ¥ç€<code>webpack-dev-server</code>ä½¿ç”¨<code>express</code>å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œè®©æµè§ˆå™¨å¯ä»¥è¯·æ±‚åˆ°æœ¬åœ°èµ„æºã€‚ç„¶åå†å¯åŠ¨<code>websocket</code>æœåŠ¡ï¼Œç”¨äºå»ºç«‹æµè§ˆå™¨å’Œæœ¬åœ°æœåŠ¡ä¹‹é—´çš„åŒå‘é€šä¿¡ã€‚</p> <p>â€ƒâ€ƒå•å‡»<code>http://localhost:8081/</code>åœ¨æµè§ˆå™¨æ‰“å¼€é¡µé¢ï¼Œæ­¤æ—¶é¡µé¢å»ºç«‹ä¸æœ¬åœ°æœåŠ¡çš„<code>websocket</code>è¿æ¥ï¼ŒåŒæ—¶æœ¬åœ°æœåŠ¡ä¼šå°†åˆšæ‰é¦–æ¬¡æ‰“åŒ…çš„<code>hash</code>å€¼è¿”å›ã€‚</p> <p><img src="/other/webpack/lower-hmr-process-first.png" alt=""></p> <p>â€ƒâ€ƒé¡µé¢è·å–åˆ°<code>hash</code>åï¼Œå°†æ­¤<code>hash</code>ä½œä¸ºä¸‹ä¸€æ¬¡è¯·æ±‚æœåŠ¡ç«¯<code>js</code>å’Œ<code>json</code>çš„<code>hash</code>ã€‚</p> <p>â€ƒâ€ƒä¿®æ”¹é¡µé¢ä»£ç ï¼Œ<code>webpack</code>ç›‘å¬åˆ°æ–‡ä»¶ä¿®æ”¹ï¼Œé‡æ–°å¼€å§‹æ‰“åŒ…ç¼–è¯‘ã€‚</p> <p>â€ƒâ€ƒæ ¹æ®æ–°ç”Ÿæˆæ–‡ä»¶åå¯ä»¥å‘ç°ï¼Œä¸Šæ¬¡è¾“å‡ºçš„<code>hash</code>å€¼ä¼šä½œä¸ºæœ¬æ¬¡ç¼–è¯‘æ–°ç”Ÿæˆçš„æ–‡ä»¶æ ‡è¯†ã€‚ä¾æ¬¡ç±»æ¨ï¼Œæœ¬æ¬¡è¾“å‡ºçš„<code>hash</code>å€¼ä¼šè¢«ä½œä¸ºä¸‹æ¬¡çƒ­æ›¿æ¢çš„æ ‡è¯†ã€‚</p> <p><img src="/other/webpack/lower-hmr-process-chunks.png" alt=""></p> <p>â€ƒâ€ƒç¼–è¯‘å®Œæˆåï¼Œæœ¬åœ°æœåŠ¡é€šè¿‡<code>websocket</code>å‘é€æœ¬æ¬¡æ‰“åŒ…çš„<code>hash</code>ç»™é¡µé¢ã€‚</p> <p><img src="/other/webpack/lower-hmr-process-websocket.png" alt=""></p> <p>â€ƒâ€ƒé¡µé¢è·å–åˆ°<code>hash</code>åï¼Œæ„é€ <code>[hash].hot-update.json</code>å’Œ<code>[hash].hot-update.js</code>ï¼Œç´§æ¥ç€å‘å‡ºä¸€æ¬¡<code>ajax</code>è¯·æ±‚ï¼Œè·å–<code>json</code>æ–‡ä»¶ï¼Œæ­¤<code>json</code>æ–‡ä»¶åŒ…æ‹¬æ‰€æœ‰è¦æ›´æ–°çš„æ¨¡å—ã€‚ç„¶åå†æ¬¡é€šè¿‡<code>jsonp</code>è¯·æ±‚ï¼Œè·å–åˆ°æœ€æ–°çš„æ¨¡å—ä»£ç ã€‚</p> <p>â€ƒâ€ƒå…¶ä¸­<code>json</code>æ–‡ä»¶è¿”å›å†…å®¹ä¸­ï¼Œ<code>h</code>è¡¨ç¤ºæœ¬æ¬¡æ–°ç”Ÿæˆçš„<code>hash</code>å€¼ï¼Œç”¨äºä¸‹æ¬¡æ–‡ä»¶çƒ­æ›¿æ¢è¯·æ±‚èµ„æºçš„å‰ç¼€ï¼Œ<code>c</code>è¡¨ç¤ºå½“å‰è¦çƒ­æ›¿æ¢çš„æ–‡ä»¶å¯¹åº”çš„æ˜¯<code>main</code>æ¨¡å—ã€‚</p> <p><img src="/other/webpack/lower-hmr-process-main.png" alt=""></p> <p>â€ƒâ€ƒ;<code>js</code>æ–‡ä»¶è¿”å›å†…å®¹ä¸­åˆ™æ˜¯æœ¬æ¬¡ä¿®æ”¹çš„ä»£ç ã€‚</p> <p><img src="/other/webpack/lower-hmr-process-js.png" alt=""></p> <p>â€ƒâ€ƒé¡µé¢æ¥æ”¶åˆ°è¯·æ±‚æ•°æ®åï¼Œå°†ä¼šå¯¹æ–°æ—§æ¨¡å—è¿›è¡Œå¯¹æ¯”ï¼Œå†³å®šæ˜¯å¦æ›´æ–°æ¨¡å—ã€‚æ³¨æ„å¦‚æœåœ¨çƒ­æ›´æ–°è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œçƒ­æ›´æ–°å°†å›é€€åˆ°<code>live reload</code>ï¼Œå³è¿›è¡Œæµè§ˆå™¨åˆ·æ–°æ¥è·å–æœ€æ–°çš„æ‰“åŒ…ä»£ç ã€‚</p> <h2 id="æ‰“åŒ…å·¥å…·"><a href="#æ‰“åŒ…å·¥å…·" class="header-anchor">#</a> æ‰“åŒ…å·¥å…·</h2> <h3 id="rollup"><a href="#rollup" class="header-anchor">#</a> RollUp</h3> <p>â€ƒâ€ƒ;<a href="https://www.rollupjs.com/" target="_blank" rel="noopener noreferrer">RollUp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¹Ÿæ˜¯<code>JavaScript</code>æ¨¡å—æ‰“åŒ…å™¨ï¼Œå…¶æ›´ä¸“æ³¨äº<code>JavaScript</code>çš„æ‰“åŒ…ï¼Œåœ¨é€šç”¨æ€§ä¸Šä¸åŠ<code>webpack</code>ã€‚ä½†æ˜¯ç›¸è¾ƒäºå…¶ä»–æ‰“åŒ…å·¥å…·ï¼Œ<code>RollUp</code>æ€»èƒ½æ‰“åŒ…å‡ºæ›´å°æ›´å¿«çš„åŒ…ã€‚<code>RollUp</code>å¯¹äºä»£ç çš„<code>tree shaking</code>å’Œ<code>es6</code>æ¨¡å—æœ‰ç®—æ³•ä¼˜åŠ¿çš„æ”¯æŒã€‚æ‰€ä»¥ä¸€èˆ¬å¼€å‘åº”ç”¨ç”¨<code>webpack</code>ï¼Œå¼€å‘åº“çš„æ—¶å€™ç”¨<code>RollUp</code>ã€‚</p> <p>â€ƒâ€ƒä¸<code>webpack</code>ä¸€èˆ¬é¡¹ç›®å†…éƒ¨å®‰è£…ä¸åŒï¼Œ<code>RollUp</code>å¯ä»¥ç›´æ¥å…¨å±€å®‰è£…ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npm i rollup <span class="token operator">-</span>g
</code></pre></div><p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>package.json</code>ã€<code>rollup.config.js</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹ä¸º<code>main.js</code>ã€‚å…¶ä¸­<code>rollup.config.js</code>ä¸­<code>output.format</code>ä¸ºè¾“å‡ºèµ„æºçš„æ¨¡å—å½¢å¼ï¼Œæ­¤ç‰¹æ€§æ˜¯<code>webpack</code>ä¸å…·å¤‡çš„ã€‚å¦‚ä¸‹ä½¿ç”¨çš„æ˜¯<code>cjs</code>ï¼ˆ<code>CommonJs</code>ï¼‰ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰<code>amd</code>ã€<code>es</code>ï¼ˆ<code>ES Module</code>ï¼‰ã€<code>umd</code>ã€<code>iife</code>ï¼ˆè‡ªæ‰§è¡Œå‡½æ•°ï¼‰ã€<code>system</code>ï¼ˆ<code>SystemJs</code>åŠ è½½å™¨æ ¼å¼ï¼‰ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup -c rollup.config.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// rollup.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">'src/main.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">'dist/bundle.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">'cjs'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒè¿è¡Œ<code>build</code>è„šæœ¬ï¼Œæ ¹ç›®å½•<code>dist</code>ä¸‹è¾“å‡º<code>bundle.js</code>ã€‚å¯ä»¥æ˜æ˜¾çœ‹åˆ°æ‰“åŒ…å‡ºæ¥çš„<code>bundle</code>éå¸¸å¹²å‡€ï¼Œ<code>RollUp</code>å¹¶æœªæ·»åŠ é¢å¤–çš„ä»£ç ï¼Œè€ŒåŒæ ·çš„æºä»£ç ï¼Œ<code>webpack</code>æ‰“åŒ…ä¼šé¢å¤–æ·»åŠ å¾ˆå¤šä»£ç ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// dist/bundle.js</span>
<span class="token string">'use strict'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
</code></pre></div><p>â€ƒâ€ƒæ­¤å¤–<code>tree shaking</code>ç‰¹æ€§æœ€å¼€å§‹æ˜¯ç”±<code>RollUp</code>å®ç°çš„ï¼ŒåŸºäºå¯¹<code>ES6 Module</code>çš„é™æ€åˆ†æï¼Œæ‰¾å‡ºæ²¡æœ‰è¢«å¼•ç”¨çš„æ¨¡å—ï¼Œæœ€åå°†å…¶ä»ç”Ÿæˆçš„<code>bundle</code>ä¸­æ’é™¤ã€‚</p> <h3 id="parcel"><a href="#parcel" class="header-anchor">#</a> Parcel</h3> <p>â€ƒâ€ƒ;<a href="https://zh.parceljs.org/" target="_blank" rel="noopener noreferrer">Parcel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åœ¨<code>JavaScript</code>æ‰“åŒ…å·¥å…·ä¸­å±äºç›¸å¯¹åæ¥è€…ï¼Œåœ¨å…¶å®˜ç½‘çš„æµ‹è¯•ä¸­ï¼Œå…¶æ„å»ºé€Ÿåº¦ç›¸è¾ƒäº<code>webpack</code>å¿«äº†å¥½å‡ å€ï¼Œå¹¶ä¸”æ˜¯é›¶é…ç½®å¼€ç®±å³ç”¨çš„ã€‚</p> <p>â€ƒâ€ƒ;<code>Parcel</code>åœ¨æ‰“åŒ…é€Ÿåº¦çš„ä¼˜åŒ–ä¸Šä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼ŒåŒ…æ‹¬åˆ©ç”¨<code>worker</code>æ¥å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ã€èµ„æºç¼–è¯‘å¤„ç†æµç¨‹ä¼˜åŒ–ã€‚</p> <p>â€ƒâ€ƒå…¶ä¸­å‰ä¸¤ä»¶<code>webpack</code>ä¹Ÿæœ‰ï¼Œæ¯”å¦‚<code>webpack</code>åœ¨èµ„æºå‹ç¼©æ—¶å¯ä»¥åˆ©ç”¨å¤šæ ¸åŒæ—¶å‹ç¼©å¤šä¸ªèµ„æºï¼Œ<code>babel-loader</code>ä¼šå°†ç¼–è¯‘ç»“æœç¼“å­˜åˆ°é¡¹ç›®éšè—ç›®å½•ä¸‹ï¼Œé€šè¿‡æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´å’ŒçŠ¶æ€æ¥åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ä¸Šæ¬¡ç¼–è¯‘çš„ç¼“å­˜ã€‚</p> <p>â€ƒâ€ƒ;<code>webpack</code>é€šè¿‡<code>loader</code>æ¥å¤„ç†ä¸åŒç±»å‹çš„èµ„æºï¼Œ<code>loader</code>æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶è¾“å…¥è¾“å‡ºéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚<code>babel-loader</code>ï¼Œè¾“å…¥<code>ES6+</code>çš„å†…å®¹ï¼Œè¯­æ³•è½¬æ¢åè¾“å‡ºä¸º<code>ES5</code>ã€‚å…¶å¤§è‡´è¿‡ç¨‹ä¸ºå°†<code>ES6</code>å­—ç¬¦ä¸²å†…å®¹è§£æä¸º<code>AST</code>ï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ã€å¯¹<code>AST</code>è¿›è¡Œè¯­æ³•è½¬æ¢ã€ç”Ÿæˆ<code>ES5</code>ä»£ç å¹¶è¿”å›å­—ç¬¦ä¸²ã€‚</p> <p>â€ƒâ€ƒè‹¥æ˜¯åœ¨<code>babel-loader</code>åå†æ·»åŠ å¤šä¸ª<code>loader</code>ï¼Œå…¶å¤„ç†å¤§è‡´æµç¨‹å¦‚ä¸‹ã€‚å…¶ä¸­æ¶‰åŠå¤§é‡çš„<code>String</code>ä¸<code>AST</code>çš„è½¬æ¢ï¼Œ<code>loader</code>ä¹‹é—´äº’ä¸å½±å“ï¼Œå„å¸å…¶èŒï¼Œè™½ç„¶å¯èƒ½ä¼šæœ‰éƒ¨åˆ†å†—ä½™ï¼Œä½†æ˜¯æœ‰åˆ©äºä¿æŒ<code>loader</code>çš„ç‹¬ç«‹æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>          èµ„æºè¾“å…¥
             â†“
<span class="token function">loader1</span>   <span class="token punctuation">(</span>String <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">AST</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> è¯­æ³•è½¬æ¢ <span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token constant">AST</span> <span class="token operator">-</span><span class="token operator">&gt;</span> String<span class="token punctuation">)</span>
                                                 â†“
<span class="token function">loader2</span>   <span class="token punctuation">(</span><span class="token constant">AST</span> <span class="token operator">-</span><span class="token operator">&gt;</span> String<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">--</span> è¯­æ³•è½¬æ¢ <span class="token operator">&lt;</span><span class="token operator">--</span> <span class="token punctuation">(</span>String <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">AST</span><span class="token punctuation">)</span>
                 â†“
<span class="token function">loader3</span>   <span class="token punctuation">(</span>String <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">AST</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> è¯­æ³•è½¬æ¢ <span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token constant">AST</span> <span class="token operator">-</span><span class="token operator">&gt;</span> String<span class="token punctuation">)</span>
                                                 â†“
                                              èµ„æºè¾“å‡º
</code></pre></div><p>â€ƒâ€ƒè€Œ<code>Parcel</code>æœªæ˜ç¡®æš´éœ²<code>loader</code>çš„æ¦‚å¿µï¼Œå…¶èµ„æºå¤„ç†æµç¨‹ä¸åƒ<code>webpack</code>å¯ä»¥å¯¹<code>loader</code>éšæ„ç»„åˆï¼Œä¹Ÿæ­£æ˜¯ç”±æ­¤å®ƒä¸éœ€è¦å¤ªå¤š<code>AST</code>ä¸<code>String</code>ä¹‹é—´çš„è½¬æ¢ã€‚</p> <p>â€ƒâ€ƒå¦‚ä¸‹å¯¹äºæ¯ä¸€æ­¥æ¥è¯´ï¼Œå‰é¢å·²è§£æè¿‡çš„<code>AST</code>ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥ç›´æ¥ä½¿ç”¨ä¸Šä¸€æ­¥è§£æå’Œè½¬æ¢å¥½çš„<code>AST</code>å³å¯ï¼Œåªç”¨åœ¨æœ€åä¸€æ­¥å†å°†<code>AST</code>è½¬å›<code>String</code>ã€‚å¯¹äºä¸€ä¸ªåºå¤§å·¥ç¨‹ï¼Œè§£æ<code>AST</code>éå¸¸è€—æ—¶ï¼Œä¼˜åŒ–æ­¤å¤„å°†ä¼šèŠ‚çœå¾ˆå¤šæ—¶é—´ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>           èµ„æºè¾“å…¥
              â†“
<span class="token function">process1</span>   <span class="token punctuation">(</span>String <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">AST</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> è¯­æ³•è½¬æ¢
                                  <span class="token function">â†“</span> <span class="token punctuation">(</span>process1 è¿”å›çš„ <span class="token constant">AST</span><span class="token punctuation">)</span>
process2                       è¯­æ³•è½¬æ¢
                                  <span class="token function">â†“</span> <span class="token punctuation">(</span>process2 è¿”å›çš„ <span class="token constant">AST</span><span class="token punctuation">)</span>
process3                       è¯­æ³•è½¬æ¢ <span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token constant">AST</span> <span class="token operator">-</span><span class="token operator">&gt;</span> String<span class="token punctuation">)</span>
                                                  â†“
                                               èµ„æºè¾“å‡º
</code></pre></div><p>â€ƒâ€ƒ;<code>Parcel</code>ä¹Ÿèƒ½ç›´æ¥å…¨å±€å®‰è£…ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npm i <span class="token operator">-</span>g parcel<span class="token operator">-</span>bundler
</code></pre></div><p>â€ƒâ€ƒæ ¹ç›®å½•ä¸‹åŒ…æ‹¬<code>package.json</code>å’Œ<code>src</code>ï¼Œ<code>src</code>ä¸‹ä¸º<code>index.js</code>å’Œ<code>index.html</code>ã€‚å…¶ä¸­<code>Parcel</code>æ˜¯å¯ä»¥ç”¨<code>html</code>æ–‡ä»¶ä½œä¸ºé¡¹ç›®å…¥å£çš„ï¼Œä»<code>html</code>å¼€å§‹å†è¿›ä¸€æ­¥å¯»æ‰¾ä¾èµ–çš„èµ„æºã€‚</p> <p>â€ƒâ€ƒ;<code>Parcel</code>å¹¶æ²¡æœ‰å±äºè‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œè€Œæœ¬è´¨ä¸Šæ˜¯å°†é…ç½®è¿›è¡Œäº†æ‹†åˆ†ï¼Œäº¤ç»™<code>babel</code>ã€<code>PostCss</code>ç­‰ç‰¹å®šçš„å·¥å…·åˆ†åˆ«è¿›è¡Œç®¡ç†ã€‚æ¯”å¦‚<code>.babelrc</code>ï¼Œ<code>Parcel</code>åœ¨æ‰“åŒ…æ—¶å°±ä¼šé‡‡ç”¨å®ƒä½œä¸º<code>ES6</code>ä»£ç è§£æçš„é…ç½®ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;parcel ./src/index.html&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;parcel build ./src/index.html&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// src/index.html</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;zh-CN&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./index.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

<span class="token comment">// src/index.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="/pages/other/webpack/middle.html">ä¸Šä¸€ç¯‡</a></p> <h2 id="ğŸ‰-å†™åœ¨æœ€å"><a href="#ğŸ‰-å†™åœ¨æœ€å" class="header-anchor">#</a> ğŸ‰ å†™åœ¨æœ€å</h2> <p>ğŸ»ä¼™ä¼´ä»¬ï¼Œå¦‚æœä½ å·²ç»çœ‹åˆ°äº†è¿™é‡Œï¼Œè§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©åˆ°ä½ çš„è¯ä¸å¦¨ç‚¹èµğŸ‘æˆ– <a href="https://github.com/dongwei1125/blog" target="_blank" rel="noopener noreferrer">Star<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> âœ¨æ”¯æŒä¸€ä¸‹å“¦ï¼</p> <p>æ‰‹åŠ¨ç å­—ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡æ­£ğŸ’¬~</p> <p>ä½ çš„æ”¯æŒå°±æ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ğŸ’ª~</p> <p><a href="https://github.com/dongwei1125" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> / <a href="https://gitee.com/dongwei1125" target="_blank" rel="noopener noreferrer">Gitee<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://dongwei1125.github.io/" target="_blank" rel="noopener noreferrer">GitHub Pages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://juejin.cn/user/2621689331987783" target="_blank" rel="noopener noreferrer">æ˜é‡‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://blog.csdn.net/Don_GW" target="_blank" rel="noopener noreferrer">CSDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ˜‰~</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">3/6/2022, 9:06:37 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0aa97f73.js" defer></script><script src="/assets/js/2.f850a8ef.js" defer></script><script src="/assets/js/61.0af6cf48.js" defer></script>
  </body>
</html>
